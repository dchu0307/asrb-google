function Ng(a,r){for(var s=0;s<r.length;s++){const o=r[s];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in a)){const u=Object.getOwnPropertyDescriptor(o,c);u&&Object.defineProperty(a,c,u.get?u:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function kg(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Ls(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var r=a.default;if(typeof r=="function"){var s=function o(){return this instanceof o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var c=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:function(){return a[o]}})}),s}var wl={exports:{}},Ns={},jl={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Sg(){if(ah)return me;ah=1;var a=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function _(T){return T===null||typeof T!="object"?null:(T=b&&T[b]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function N(T,B,fe){this.props=T,this.context=B,this.refs=k,this.updater=fe||w}N.prototype.isReactComponent={},N.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function P(){}P.prototype=N.prototype;function $(T,B,fe){this.props=T,this.context=B,this.refs=k,this.updater=fe||w}var C=$.prototype=new P;C.constructor=$,x(C,N.prototype),C.isPureReactComponent=!0;var R=Array.isArray,F=Object.prototype.hasOwnProperty,U={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function q(T,B,fe){var pe,ye={},ve=null,_e=null;if(B!=null)for(pe in B.ref!==void 0&&(_e=B.ref),B.key!==void 0&&(ve=""+B.key),B)F.call(B,pe)&&!D.hasOwnProperty(pe)&&(ye[pe]=B[pe]);var we=arguments.length-2;if(we===1)ye.children=fe;else if(1<we){for(var Ae=Array(we),mt=0;mt<we;mt++)Ae[mt]=arguments[mt+2];ye.children=Ae}if(T&&T.defaultProps)for(pe in we=T.defaultProps,we)ye[pe]===void 0&&(ye[pe]=we[pe]);return{$$typeof:a,type:T,key:ve,ref:_e,props:ye,_owner:U.current}}function oe(T,B){return{$$typeof:a,type:T.type,key:B,ref:T.ref,props:T.props,_owner:T._owner}}function Se(T){return typeof T=="object"&&T!==null&&T.$$typeof===a}function he(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(fe){return B[fe]})}var I=/\/+/g;function K(T,B){return typeof T=="object"&&T!==null&&T.key!=null?he(""+T.key):B.toString(36)}function G(T,B,fe,pe,ye){var ve=typeof T;(ve==="undefined"||ve==="boolean")&&(T=null);var _e=!1;if(T===null)_e=!0;else switch(ve){case"string":case"number":_e=!0;break;case"object":switch(T.$$typeof){case a:case r:_e=!0}}if(_e)return _e=T,ye=ye(_e),T=pe===""?"."+K(_e,0):pe,R(ye)?(fe="",T!=null&&(fe=T.replace(I,"$&/")+"/"),G(ye,B,fe,"",function(mt){return mt})):ye!=null&&(Se(ye)&&(ye=oe(ye,fe+(!ye.key||_e&&_e.key===ye.key?"":(""+ye.key).replace(I,"$&/")+"/")+T)),B.push(ye)),1;if(_e=0,pe=pe===""?".":pe+":",R(T))for(var we=0;we<T.length;we++){ve=T[we];var Ae=pe+K(ve,we);_e+=G(ve,B,fe,Ae,ye)}else if(Ae=_(T),typeof Ae=="function")for(T=Ae.call(T),we=0;!(ve=T.next()).done;)ve=ve.value,Ae=pe+K(ve,we++),_e+=G(ve,B,fe,Ae,ye);else if(ve==="object")throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return _e}function le(T,B,fe){if(T==null)return T;var pe=[],ye=0;return G(T,pe,"","",function(ve){return B.call(fe,ve,ye++)}),pe}function be(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(fe){(T._status===0||T._status===-1)&&(T._status=1,T._result=fe)},function(fe){(T._status===0||T._status===-1)&&(T._status=2,T._result=fe)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var Ee={current:null},Q={transition:null},ue={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:Q,ReactCurrentOwner:U};function X(){throw Error("act(...) is not supported in production builds of React.")}return me.Children={map:le,forEach:function(T,B,fe){le(T,function(){B.apply(this,arguments)},fe)},count:function(T){var B=0;return le(T,function(){B++}),B},toArray:function(T){return le(T,function(B){return B})||[]},only:function(T){if(!Se(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},me.Component=N,me.Fragment=s,me.Profiler=c,me.PureComponent=$,me.StrictMode=o,me.Suspense=m,me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,me.act=X,me.cloneElement=function(T,B,fe){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var pe=x({},T.props),ye=T.key,ve=T.ref,_e=T._owner;if(B!=null){if(B.ref!==void 0&&(ve=B.ref,_e=U.current),B.key!==void 0&&(ye=""+B.key),T.type&&T.type.defaultProps)var we=T.type.defaultProps;for(Ae in B)F.call(B,Ae)&&!D.hasOwnProperty(Ae)&&(pe[Ae]=B[Ae]===void 0&&we!==void 0?we[Ae]:B[Ae])}var Ae=arguments.length-2;if(Ae===1)pe.children=fe;else if(1<Ae){we=Array(Ae);for(var mt=0;mt<Ae;mt++)we[mt]=arguments[mt+2];pe.children=we}return{$$typeof:a,type:T.type,key:ye,ref:ve,props:pe,_owner:_e}},me.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:u,_context:T},T.Consumer=T},me.createElement=q,me.createFactory=function(T){var B=q.bind(null,T);return B.type=T,B},me.createRef=function(){return{current:null}},me.forwardRef=function(T){return{$$typeof:p,render:T}},me.isValidElement=Se,me.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:be}},me.memo=function(T,B){return{$$typeof:y,type:T,compare:B===void 0?null:B}},me.startTransition=function(T){var B=Q.transition;Q.transition={};try{T()}finally{Q.transition=B}},me.unstable_act=X,me.useCallback=function(T,B){return Ee.current.useCallback(T,B)},me.useContext=function(T){return Ee.current.useContext(T)},me.useDebugValue=function(){},me.useDeferredValue=function(T){return Ee.current.useDeferredValue(T)},me.useEffect=function(T,B){return Ee.current.useEffect(T,B)},me.useId=function(){return Ee.current.useId()},me.useImperativeHandle=function(T,B,fe){return Ee.current.useImperativeHandle(T,B,fe)},me.useInsertionEffect=function(T,B){return Ee.current.useInsertionEffect(T,B)},me.useLayoutEffect=function(T,B){return Ee.current.useLayoutEffect(T,B)},me.useMemo=function(T,B){return Ee.current.useMemo(T,B)},me.useReducer=function(T,B,fe){return Ee.current.useReducer(T,B,fe)},me.useRef=function(T){return Ee.current.useRef(T)},me.useState=function(T){return Ee.current.useState(T)},me.useSyncExternalStore=function(T,B,fe){return Ee.current.useSyncExternalStore(T,B,fe)},me.useTransition=function(){return Ee.current.useTransition()},me.version="18.3.1",me}var oh;function ec(){return oh||(oh=1,jl.exports=Sg()),jl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function Eg(){if(lh)return Ns;lh=1;var a=ec(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,y){var v,b={},_=null,w=null;y!==void 0&&(_=""+y),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(w=m.ref);for(v in m)o.call(m,v)&&!u.hasOwnProperty(v)&&(b[v]=m[v]);if(p&&p.defaultProps)for(v in m=p.defaultProps,m)b[v]===void 0&&(b[v]=m[v]);return{$$typeof:r,type:p,key:_,ref:w,props:b,_owner:c.current}}return Ns.Fragment=s,Ns.jsx=h,Ns.jsxs=h,Ns}var ch;function Cg(){return ch||(ch=1,wl.exports=Eg()),wl.exports}var n=Cg(),Gi={},_l={exports:{}},dt={},Nl={exports:{}},kl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Tg(){return uh||(uh=1,(function(a){function r(Q,ue){var X=Q.length;Q.push(ue);e:for(;0<X;){var T=X-1>>>1,B=Q[T];if(0<c(B,ue))Q[T]=ue,Q[X]=B,X=T;else break e}}function s(Q){return Q.length===0?null:Q[0]}function o(Q){if(Q.length===0)return null;var ue=Q[0],X=Q.pop();if(X!==ue){Q[0]=X;e:for(var T=0,B=Q.length,fe=B>>>1;T<fe;){var pe=2*(T+1)-1,ye=Q[pe],ve=pe+1,_e=Q[ve];if(0>c(ye,X))ve<B&&0>c(_e,ye)?(Q[T]=_e,Q[ve]=X,T=ve):(Q[T]=ye,Q[pe]=X,T=pe);else if(ve<B&&0>c(_e,X))Q[T]=_e,Q[ve]=X,T=ve;else break e}}return ue}function c(Q,ue){var X=Q.sortIndex-ue.sortIndex;return X!==0?X:Q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();a.unstable_now=function(){return h.now()-p}}var m=[],y=[],v=1,b=null,_=3,w=!1,x=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Q){for(var ue=s(y);ue!==null;){if(ue.callback===null)o(y);else if(ue.startTime<=Q)o(y),ue.sortIndex=ue.expirationTime,r(m,ue);else break;ue=s(y)}}function R(Q){if(k=!1,C(Q),!x)if(s(m)!==null)x=!0,be(F);else{var ue=s(y);ue!==null&&Ee(R,ue.startTime-Q)}}function F(Q,ue){x=!1,k&&(k=!1,P(q),q=-1),w=!0;var X=_;try{for(C(ue),b=s(m);b!==null&&(!(b.expirationTime>ue)||Q&&!he());){var T=b.callback;if(typeof T=="function"){b.callback=null,_=b.priorityLevel;var B=T(b.expirationTime<=ue);ue=a.unstable_now(),typeof B=="function"?b.callback=B:b===s(m)&&o(m),C(ue)}else o(m);b=s(m)}if(b!==null)var fe=!0;else{var pe=s(y);pe!==null&&Ee(R,pe.startTime-ue),fe=!1}return fe}finally{b=null,_=X,w=!1}}var U=!1,D=null,q=-1,oe=5,Se=-1;function he(){return!(a.unstable_now()-Se<oe)}function I(){if(D!==null){var Q=a.unstable_now();Se=Q;var ue=!0;try{ue=D(!0,Q)}finally{ue?K():(U=!1,D=null)}}else U=!1}var K;if(typeof $=="function")K=function(){$(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,le=G.port2;G.port1.onmessage=I,K=function(){le.postMessage(null)}}else K=function(){N(I,0)};function be(Q){D=Q,U||(U=!0,K())}function Ee(Q,ue){q=N(function(){Q(a.unstable_now())},ue)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Q){Q.callback=null},a.unstable_continueExecution=function(){x||w||(x=!0,be(F))},a.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Q?Math.floor(1e3/Q):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_getFirstCallbackNode=function(){return s(m)},a.unstable_next=function(Q){switch(_){case 1:case 2:case 3:var ue=3;break;default:ue=_}var X=_;_=ue;try{return Q()}finally{_=X}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Q,ue){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=_;_=Q;try{return ue()}finally{_=X}},a.unstable_scheduleCallback=function(Q,ue,X){var T=a.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?T+X:T):X=T,Q){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,Q={id:v++,callback:ue,priorityLevel:Q,startTime:X,expirationTime:B,sortIndex:-1},X>T?(Q.sortIndex=X,r(y,Q),s(m)===null&&Q===s(y)&&(k?(P(q),q=-1):k=!0,Ee(R,X-T))):(Q.sortIndex=B,r(m,Q),x||w||(x=!0,be(F))),Q},a.unstable_shouldYield=he,a.unstable_wrapCallback=function(Q){var ue=_;return function(){var X=_;_=ue;try{return Q.apply(this,arguments)}finally{_=X}}}})(kl)),kl}var dh;function Ag(){return dh||(dh=1,Nl.exports=Tg()),Nl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh;function Rg(){if(hh)return dt;hh=1;var a=ec(),r=Ag();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},b={};function _(e){return m.call(b,e)?!0:m.call(v,e)?!1:y.test(e)?b[e]=!0:(v[e]=!0,!1)}function w(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function x(e,t,i,l){if(t===null||typeof t>"u"||w(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function k(e,t,i,l,d,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];N[t]=new k(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(P,$);N[t]=new k(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(P,$);N[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(P,$);N[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});function C(e,t,i,l){var d=N.hasOwnProperty(t)?N[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(x(t,i,d,l)&&(i=null),l||d===null?_(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,l=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var R=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),U=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),he=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ue(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,T;function B(e){if(T===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||""}return`
`+T+e}var fe=!1;function pe(e,t){if(!e||fe)return"";fe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(L){var l=L}Reflect.construct(e,[],t)}else{try{t.call()}catch(L){l=L}e.call(t.prototype)}else{try{throw Error()}catch(L){l=L}e()}}catch(L){if(L&&l&&typeof L.stack=="string"){for(var d=L.stack.split(`
`),f=l.stack.split(`
`),g=d.length-1,j=f.length-1;1<=g&&0<=j&&d[g]!==f[j];)j--;for(;1<=g&&0<=j;g--,j--)if(d[g]!==f[j]){if(g!==1||j!==1)do if(g--,j--,0>j||d[g]!==f[j]){var S=`
`+d[g].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=g&&0<=j);break}}}finally{fe=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?B(e):""}function ye(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=pe(e.type,!1),e;case 11:return e=pe(e.type.render,!1),e;case 1:return e=pe(e.type,!0),e;default:return""}}function ve(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case U:return"Portal";case oe:return"Profiler";case q:return"StrictMode";case K:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case he:return(e.displayName||"Context")+".Consumer";case Se:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case le:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case be:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}function _e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(t);case 8:return t===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function we(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ae(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mt(e){var t=Ae(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ds(e){e._valueTracker||(e._valueTracker=mt(e))}function hc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Ae(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function Us(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var i=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function fc(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=we(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mc(e,t){t=t.checked,t!=null&&C(e,"checked",t,!1)}function Ca(e,t){mc(e,t);var i=we(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ta(e,t.type,i):t.hasOwnProperty("defaultValue")&&Ta(e,t.type,we(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pc(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Ta(e,t,i){(t!=="number"||Us(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Un=Array.isArray;function Kr(e,t,i,l){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+we(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gc(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(s(92));if(Un(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:we(i)}}function yc(e,t){var i=we(t.value),l=we(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function vc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zs,bc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cm=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(e){Cm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fn[t]=Fn[e]})});function wc(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Fn.hasOwnProperty(e)&&Fn[e]?(""+t).trim():t+"px"}function jc(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,d=wc(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,d):e[i]=d}}var Tm=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oa(e,t){if(t){if(Tm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Pa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ia=null;function La(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $a=null,Gr=null,Qr=null;function _c(e){if(e=cs(e)){if(typeof $a!="function")throw Error(s(280));var t=e.stateNode;t&&(t=ci(t),$a(e.stateNode,e.type,t))}}function Nc(e){Gr?Qr?Qr.push(e):Qr=[e]:Gr=e}function kc(){if(Gr){var e=Gr,t=Qr;if(Qr=Gr=null,_c(e),t)for(e=0;e<t.length;e++)_c(t[e])}}function Sc(e,t){return e(t)}function Ec(){}var Ma=!1;function Cc(e,t,i){if(Ma)return e(t,i);Ma=!0;try{return Sc(e,t,i)}finally{Ma=!1,(Gr!==null||Qr!==null)&&(Ec(),kc())}}function Bn(e,t){var i=e.stateNode;if(i===null)return null;var l=ci(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Da=!1;if(p)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){Da=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Da=!1}function Am(e,t,i,l,d,f,g,j,S){var L=Array.prototype.slice.call(arguments,3);try{t.apply(i,L)}catch(V){this.onError(V)}}var qn=!1,Fs=null,Bs=!1,Ua=null,Rm={onError:function(e){qn=!0,Fs=e}};function Om(e,t,i,l,d,f,g,j,S){qn=!1,Fs=null,Am.apply(Rm,arguments)}function Pm(e,t,i,l,d,f,g,j,S){if(Om.apply(this,arguments),qn){if(qn){var L=Fs;qn=!1,Fs=null}else throw Error(s(198));Bs||(Bs=!0,Ua=L)}}function kr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Tc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ac(e){if(kr(e)!==e)throw Error(s(188))}function Im(e){var t=e.alternate;if(!t){if(t=kr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return Ac(d),e;if(f===l)return Ac(d),t;f=f.sibling}throw Error(s(188))}if(i.return!==l.return)i=d,l=f;else{for(var g=!1,j=d.child;j;){if(j===i){g=!0,i=d,l=f;break}if(j===l){g=!0,l=d,i=f;break}j=j.sibling}if(!g){for(j=f.child;j;){if(j===i){g=!0,i=f,l=d;break}if(j===l){g=!0,l=f,i=d;break}j=j.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function Rc(e){return e=Im(e),e!==null?Oc(e):null}function Oc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Oc(e);if(t!==null)return t;e=e.sibling}return null}var Pc=r.unstable_scheduleCallback,Ic=r.unstable_cancelCallback,Lm=r.unstable_shouldYield,$m=r.unstable_requestPaint,$e=r.unstable_now,Mm=r.unstable_getCurrentPriorityLevel,za=r.unstable_ImmediatePriority,Lc=r.unstable_UserBlockingPriority,Vs=r.unstable_NormalPriority,Dm=r.unstable_LowPriority,$c=r.unstable_IdlePriority,qs=null,Mt=null;function Um(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(qs,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:Bm,zm=Math.log,Fm=Math.LN2;function Bm(e){return e>>>=0,e===0?32:31-(zm(e)/Fm|0)|0}var Hs=64,Ws=4194304;function Hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ks(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,g=i&268435455;if(g!==0){var j=g&~d;j!==0?l=Hn(j):(f&=g,f!==0&&(l=Hn(f)))}else g=i&~d,g!==0?l=Hn(g):f!==0&&(l=Hn(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-Et(t),d=1<<i,l|=e[i],t&=~d;return l}function Vm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qm(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Et(f),j=1<<g,S=d[g];S===-1?((j&i)===0||(j&l)!==0)&&(d[g]=Vm(j,t)):S<=t&&(e.expiredLanes|=j),f&=~j}}function Fa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mc(){var e=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),e}function Ba(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Wn(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=i}function Hm(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-Et(i),f=1<<d;t[d]=0,l[d]=-1,e[d]=-1,i&=~f}}function Va(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Et(i),d=1<<l;d&t|e[l]&t&&(e[l]|=t),i&=~d}}var je=0;function Dc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Uc,qa,zc,Fc,Bc,Ha=!1,Gs=[],rr=null,nr=null,sr=null,Kn=new Map,Gn=new Map,ir=[],Wm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(e,t){switch(e){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Kn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(t.pointerId)}}function Qn(e,t,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=cs(t),t!==null&&qa(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Km(e,t,i,l,d){switch(t){case"focusin":return rr=Qn(rr,e,t,i,l,d),!0;case"dragenter":return nr=Qn(nr,e,t,i,l,d),!0;case"mouseover":return sr=Qn(sr,e,t,i,l,d),!0;case"pointerover":var f=d.pointerId;return Kn.set(f,Qn(Kn.get(f)||null,e,t,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Gn.set(f,Qn(Gn.get(f)||null,e,t,i,l,d)),!0}return!1}function qc(e){var t=Sr(e.target);if(t!==null){var i=kr(t);if(i!==null){if(t=i.tag,t===13){if(t=Tc(i),t!==null){e.blockedOn=t,Bc(e.priority,function(){zc(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Ka(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Ia=l,i.target.dispatchEvent(l),Ia=null}else return t=cs(i),t!==null&&qa(t),e.blockedOn=i,!1;t.shift()}return!0}function Hc(e,t,i){Qs(e)&&i.delete(t)}function Gm(){Ha=!1,rr!==null&&Qs(rr)&&(rr=null),nr!==null&&Qs(nr)&&(nr=null),sr!==null&&Qs(sr)&&(sr=null),Kn.forEach(Hc),Gn.forEach(Hc)}function Jn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ha||(Ha=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Gm)))}function Yn(e){function t(d){return Jn(d,e)}if(0<Gs.length){Jn(Gs[0],e);for(var i=1;i<Gs.length;i++){var l=Gs[i];l.blockedOn===e&&(l.blockedOn=null)}}for(rr!==null&&Jn(rr,e),nr!==null&&Jn(nr,e),sr!==null&&Jn(sr,e),Kn.forEach(t),Gn.forEach(t),i=0;i<ir.length;i++)l=ir[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<ir.length&&(i=ir[0],i.blockedOn===null);)qc(i),i.blockedOn===null&&ir.shift()}var Jr=R.ReactCurrentBatchConfig,Js=!0;function Qm(e,t,i,l){var d=je,f=Jr.transition;Jr.transition=null;try{je=1,Wa(e,t,i,l)}finally{je=d,Jr.transition=f}}function Jm(e,t,i,l){var d=je,f=Jr.transition;Jr.transition=null;try{je=4,Wa(e,t,i,l)}finally{je=d,Jr.transition=f}}function Wa(e,t,i,l){if(Js){var d=Ka(e,t,i,l);if(d===null)uo(e,t,l,Ys,i),Vc(e,l);else if(Km(d,e,t,i,l))l.stopPropagation();else if(Vc(e,l),t&4&&-1<Wm.indexOf(e)){for(;d!==null;){var f=cs(d);if(f!==null&&Uc(f),f=Ka(e,t,i,l),f===null&&uo(e,t,l,Ys,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else uo(e,t,l,null,i)}}var Ys=null;function Ka(e,t,i,l){if(Ys=null,e=La(l),e=Sr(e),e!==null)if(t=kr(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Tc(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ys=e,null}function Wc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mm()){case za:return 1;case Lc:return 4;case Vs:case Dm:return 16;case $c:return 536870912;default:return 16}default:return 16}}var ar=null,Ga=null,Xs=null;function Kc(){if(Xs)return Xs;var e,t=Ga,i=t.length,l,d="value"in ar?ar.value:ar.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var g=i-e;for(l=1;l<=g&&t[i-l]===d[f-l];l++);return Xs=d.slice(e,1<l?1-l:void 0)}function Zs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ei(){return!0}function Gc(){return!1}function pt(e){function t(i,l,d,f,g){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(i=e[j],this[j]=i?i(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ei:Gc,this.isPropagationStopped=Gc,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),t}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=pt(Yr),Xn=X({},Yr,{view:0,detail:0}),Ym=pt(Xn),Ja,Ya,Zn,ti=X({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zn&&(Zn&&e.type==="mousemove"?(Ja=e.screenX-Zn.screenX,Ya=e.screenY-Zn.screenY):Ya=Ja=0,Zn=e),Ja)},movementY:function(e){return"movementY"in e?e.movementY:Ya}}),Qc=pt(ti),Xm=X({},ti,{dataTransfer:0}),Zm=pt(Xm),ep=X({},Xn,{relatedTarget:0}),Xa=pt(ep),tp=X({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=pt(tp),np=X({},Yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sp=pt(np),ip=X({},Yr,{data:0}),Jc=pt(ip),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lp[e])?!!t[e]:!1}function Za(){return cp}var up=X({},Xn,{key:function(e){if(e.key){var t=ap[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?op[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(e){return e.type==="keypress"?Zs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dp=pt(up),hp=X({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yc=pt(hp),fp=X({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),mp=pt(fp),pp=X({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gp=pt(pp),yp=X({},ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vp=pt(yp),xp=[9,13,27,32],eo=p&&"CompositionEvent"in window,es=null;p&&"documentMode"in document&&(es=document.documentMode);var bp=p&&"TextEvent"in window&&!es,Xc=p&&(!eo||es&&8<es&&11>=es),Zc=" ",eu=!1;function tu(e,t){switch(e){case"keyup":return xp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xr=!1;function wp(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return t.which!==32?null:(eu=!0,Zc);case"textInput":return e=t.data,e===Zc&&eu?null:e;default:return null}}function jp(e,t){if(Xr)return e==="compositionend"||!eo&&tu(e,t)?(e=Kc(),Xs=Ga=ar=null,Xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xc&&t.locale!=="ko"?null:t.data;default:return null}}var _p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_p[e.type]:t==="textarea"}function su(e,t,i,l){Nc(l),t=ai(t,"onChange"),0<t.length&&(i=new Qa("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var ts=null,rs=null;function Np(e){ju(e,0)}function ri(e){var t=nn(e);if(hc(t))return e}function kp(e,t){if(e==="change")return t}var iu=!1;if(p){var to;if(p){var ro="oninput"in document;if(!ro){var au=document.createElement("div");au.setAttribute("oninput","return;"),ro=typeof au.oninput=="function"}to=ro}else to=!1;iu=to&&(!document.documentMode||9<document.documentMode)}function ou(){ts&&(ts.detachEvent("onpropertychange",lu),rs=ts=null)}function lu(e){if(e.propertyName==="value"&&ri(rs)){var t=[];su(t,rs,e,La(e)),Cc(Np,t)}}function Sp(e,t,i){e==="focusin"?(ou(),ts=t,rs=i,ts.attachEvent("onpropertychange",lu)):e==="focusout"&&ou()}function Ep(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ri(rs)}function Cp(e,t){if(e==="click")return ri(t)}function Tp(e,t){if(e==="input"||e==="change")return ri(t)}function Ap(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Ap;function ns(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!m.call(t,d)||!Ct(e[d],t[d]))return!1}return!0}function cu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uu(e,t){var i=cu(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=cu(i)}}function du(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?du(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hu(){for(var e=window,t=Us();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Us(e.document)}return t}function no(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rp(e){var t=hu(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&du(i.ownerDocument.documentElement,i)){if(l!==null&&no(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=uu(i,f);var g=uu(i,l);d&&g&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Op=p&&"documentMode"in document&&11>=document.documentMode,Zr=null,so=null,ss=null,io=!1;function fu(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;io||Zr==null||Zr!==Us(l)||(l=Zr,"selectionStart"in l&&no(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ss&&ns(ss,l)||(ss=l,l=ai(so,"onSelect"),0<l.length&&(t=new Qa("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Zr)))}function ni(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var en={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},ao={},mu={};p&&(mu=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function si(e){if(ao[e])return ao[e];if(!en[e])return e;var t=en[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in mu)return ao[e]=t[i];return e}var pu=si("animationend"),gu=si("animationiteration"),yu=si("animationstart"),vu=si("transitionend"),xu=new Map,bu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(e,t){xu.set(e,t),u(t,[e])}for(var oo=0;oo<bu.length;oo++){var lo=bu[oo],Pp=lo.toLowerCase(),Ip=lo[0].toUpperCase()+lo.slice(1);or(Pp,"on"+Ip)}or(pu,"onAnimationEnd"),or(gu,"onAnimationIteration"),or(yu,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(vu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function wu(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,Pm(l,t,void 0,e),e.currentTarget=null}function ju(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var g=l.length-1;0<=g;g--){var j=l[g],S=j.instance,L=j.currentTarget;if(j=j.listener,S!==f&&d.isPropagationStopped())break e;wu(d,j,L),f=S}else for(g=0;g<l.length;g++){if(j=l[g],S=j.instance,L=j.currentTarget,j=j.listener,S!==f&&d.isPropagationStopped())break e;wu(d,j,L),f=S}}}if(Bs)throw e=Ua,Bs=!1,Ua=null,e}function Ce(e,t){var i=t[yo];i===void 0&&(i=t[yo]=new Set);var l=e+"__bubble";i.has(l)||(_u(t,e,2,!1),i.add(l))}function co(e,t,i){var l=0;t&&(l|=4),_u(i,e,l,t)}var ii="_reactListening"+Math.random().toString(36).slice(2);function as(e){if(!e[ii]){e[ii]=!0,o.forEach(function(i){i!=="selectionchange"&&(Lp.has(i)||co(i,!1,e),co(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ii]||(t[ii]=!0,co("selectionchange",!1,t))}}function _u(e,t,i,l){switch(Wc(t)){case 1:var d=Qm;break;case 4:d=Jm;break;default:d=Wa}i=d.bind(null,t,i,e),d=void 0,!Da||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function uo(e,t,i,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var j=l.stateNode.containerInfo;if(j===d||j.nodeType===8&&j.parentNode===d)break;if(g===4)for(g=l.return;g!==null;){var S=g.tag;if((S===3||S===4)&&(S=g.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;g=g.return}for(;j!==null;){if(g=Sr(j),g===null)return;if(S=g.tag,S===5||S===6){l=f=g;continue e}j=j.parentNode}}l=l.return}Cc(function(){var L=f,V=La(i),H=[];e:{var z=xu.get(e);if(z!==void 0){var J=Qa,ee=e;switch(e){case"keypress":if(Zs(i)===0)break e;case"keydown":case"keyup":J=dp;break;case"focusin":ee="focus",J=Xa;break;case"focusout":ee="blur",J=Xa;break;case"beforeblur":case"afterblur":J=Xa;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=mp;break;case pu:case gu:case yu:J=rp;break;case vu:J=gp;break;case"scroll":J=Ym;break;case"wheel":J=vp;break;case"copy":case"cut":case"paste":J=sp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Yc}var re=(t&4)!==0,Me=!re&&e==="scroll",A=re?z!==null?z+"Capture":null:z;re=[];for(var E=L,O;E!==null;){O=E;var W=O.stateNode;if(O.tag===5&&W!==null&&(O=W,A!==null&&(W=Bn(E,A),W!=null&&re.push(os(E,W,O)))),Me)break;E=E.return}0<re.length&&(z=new J(z,ee,null,i,V),H.push({event:z,listeners:re}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",z&&i!==Ia&&(ee=i.relatedTarget||i.fromElement)&&(Sr(ee)||ee[qt]))break e;if((J||z)&&(z=V.window===V?V:(z=V.ownerDocument)?z.defaultView||z.parentWindow:window,J?(ee=i.relatedTarget||i.toElement,J=L,ee=ee?Sr(ee):null,ee!==null&&(Me=kr(ee),ee!==Me||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(J=null,ee=L),J!==ee)){if(re=Qc,W="onMouseLeave",A="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(re=Yc,W="onPointerLeave",A="onPointerEnter",E="pointer"),Me=J==null?z:nn(J),O=ee==null?z:nn(ee),z=new re(W,E+"leave",J,i,V),z.target=Me,z.relatedTarget=O,W=null,Sr(V)===L&&(re=new re(A,E+"enter",ee,i,V),re.target=O,re.relatedTarget=Me,W=re),Me=W,J&&ee)t:{for(re=J,A=ee,E=0,O=re;O;O=tn(O))E++;for(O=0,W=A;W;W=tn(W))O++;for(;0<E-O;)re=tn(re),E--;for(;0<O-E;)A=tn(A),O--;for(;E--;){if(re===A||A!==null&&re===A.alternate)break t;re=tn(re),A=tn(A)}re=null}else re=null;J!==null&&Nu(H,z,J,re,!1),ee!==null&&Me!==null&&Nu(H,Me,ee,re,!0)}}e:{if(z=L?nn(L):window,J=z.nodeName&&z.nodeName.toLowerCase(),J==="select"||J==="input"&&z.type==="file")var ne=kp;else if(nu(z))if(iu)ne=Tp;else{ne=Ep;var ie=Sp}else(J=z.nodeName)&&J.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ne=Cp);if(ne&&(ne=ne(e,L))){su(H,ne,i,V);break e}ie&&ie(e,z,L),e==="focusout"&&(ie=z._wrapperState)&&ie.controlled&&z.type==="number"&&Ta(z,"number",z.value)}switch(ie=L?nn(L):window,e){case"focusin":(nu(ie)||ie.contentEditable==="true")&&(Zr=ie,so=L,ss=null);break;case"focusout":ss=so=Zr=null;break;case"mousedown":io=!0;break;case"contextmenu":case"mouseup":case"dragend":io=!1,fu(H,i,V);break;case"selectionchange":if(Op)break;case"keydown":case"keyup":fu(H,i,V)}var ae;if(eo)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Xr?tu(e,i)&&(de="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(de="onCompositionStart");de&&(Xc&&i.locale!=="ko"&&(Xr||de!=="onCompositionStart"?de==="onCompositionEnd"&&Xr&&(ae=Kc()):(ar=V,Ga="value"in ar?ar.value:ar.textContent,Xr=!0)),ie=ai(L,de),0<ie.length&&(de=new Jc(de,e,null,i,V),H.push({event:de,listeners:ie}),ae?de.data=ae:(ae=ru(i),ae!==null&&(de.data=ae)))),(ae=bp?wp(e,i):jp(e,i))&&(L=ai(L,"onBeforeInput"),0<L.length&&(V=new Jc("onBeforeInput","beforeinput",null,i,V),H.push({event:V,listeners:L}),V.data=ae))}ju(H,t)})}function os(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ai(e,t){for(var i=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Bn(e,i),f!=null&&l.unshift(os(e,f,d)),f=Bn(e,t),f!=null&&l.push(os(e,f,d))),e=e.return}return l}function tn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nu(e,t,i,l,d){for(var f=t._reactName,g=[];i!==null&&i!==l;){var j=i,S=j.alternate,L=j.stateNode;if(S!==null&&S===l)break;j.tag===5&&L!==null&&(j=L,d?(S=Bn(i,f),S!=null&&g.unshift(os(i,S,j))):d||(S=Bn(i,f),S!=null&&g.push(os(i,S,j)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var $p=/\r\n?/g,Mp=/\u0000|\uFFFD/g;function ku(e){return(typeof e=="string"?e:""+e).replace($p,`
`).replace(Mp,"")}function oi(e,t,i){if(t=ku(t),ku(e)!==t&&i)throw Error(s(425))}function li(){}var ho=null,fo=null;function mo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var po=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,Su=typeof Promise=="function"?Promise:void 0,Up=typeof queueMicrotask=="function"?queueMicrotask:typeof Su<"u"?function(e){return Su.resolve(null).then(e).catch(zp)}:po;function zp(e){setTimeout(function(){throw e})}function go(e,t){var i=t,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(l===0){e.removeChild(d),Yn(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=d}while(i);Yn(t)}function lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Eu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var rn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+rn,ls="__reactProps$"+rn,qt="__reactContainer$"+rn,yo="__reactEvents$"+rn,Fp="__reactListeners$"+rn,Bp="__reactHandles$"+rn;function Sr(e){var t=e[Dt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[qt]||i[Dt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Eu(e);e!==null;){if(i=e[Dt])return i;e=Eu(e)}return t}e=i,i=e.parentNode}return null}function cs(e){return e=e[Dt]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ci(e){return e[ls]||null}var vo=[],sn=-1;function cr(e){return{current:e}}function Te(e){0>sn||(e.current=vo[sn],vo[sn]=null,sn--)}function Ne(e,t){sn++,vo[sn]=e.current,e.current=t}var ur={},Ye=cr(ur),at=cr(!1),Er=ur;function an(e,t){var i=e.type.contextTypes;if(!i)return ur;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in i)d[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function ot(e){return e=e.childContextTypes,e!=null}function ui(){Te(at),Te(Ye)}function Cu(e,t,i){if(Ye.current!==ur)throw Error(s(168));Ne(Ye,t),Ne(at,i)}function Tu(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(s(108,_e(e)||"Unknown",d));return X({},i,l)}function di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,Er=Ye.current,Ne(Ye,e),Ne(at,at.current),!0}function Au(e,t,i){var l=e.stateNode;if(!l)throw Error(s(169));i?(e=Tu(e,t,Er),l.__reactInternalMemoizedMergedChildContext=e,Te(at),Te(Ye),Ne(Ye,e)):Te(at),Ne(at,i)}var Ht=null,hi=!1,xo=!1;function Ru(e){Ht===null?Ht=[e]:Ht.push(e)}function Vp(e){hi=!0,Ru(e)}function dr(){if(!xo&&Ht!==null){xo=!0;var e=0,t=je;try{var i=Ht;for(je=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Ht=null,hi=!1}catch(d){throw Ht!==null&&(Ht=Ht.slice(e+1)),Pc(za,dr),d}finally{je=t,xo=!1}}return null}var on=[],ln=0,fi=null,mi=0,wt=[],jt=0,Cr=null,Wt=1,Kt="";function Tr(e,t){on[ln++]=mi,on[ln++]=fi,fi=e,mi=t}function Ou(e,t,i){wt[jt++]=Wt,wt[jt++]=Kt,wt[jt++]=Cr,Cr=e;var l=Wt;e=Kt;var d=32-Et(l)-1;l&=~(1<<d),i+=1;var f=32-Et(t)+d;if(30<f){var g=d-d%5;f=(l&(1<<g)-1).toString(32),l>>=g,d-=g,Wt=1<<32-Et(t)+d|i<<d|l,Kt=f+e}else Wt=1<<f|i<<d|l,Kt=e}function bo(e){e.return!==null&&(Tr(e,1),Ou(e,1,0))}function wo(e){for(;e===fi;)fi=on[--ln],on[ln]=null,mi=on[--ln],on[ln]=null;for(;e===Cr;)Cr=wt[--jt],wt[jt]=null,Kt=wt[--jt],wt[jt]=null,Wt=wt[--jt],wt[jt]=null}var gt=null,yt=null,Re=!1,Tt=null;function Pu(e,t){var i=St(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Iu(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,yt=lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Cr!==null?{id:Wt,overflow:Kt}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=St(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,gt=e,yt=null,!0):!1;default:return!1}}function jo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _o(e){if(Re){var t=yt;if(t){var i=t;if(!Iu(e,t)){if(jo(e))throw Error(s(418));t=lr(i.nextSibling);var l=gt;t&&Iu(e,t)?Pu(l,i):(e.flags=e.flags&-4097|2,Re=!1,gt=e)}}else{if(jo(e))throw Error(s(418));e.flags=e.flags&-4097|2,Re=!1,gt=e}}}function Lu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function pi(e){if(e!==gt)return!1;if(!Re)return Lu(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mo(e.type,e.memoizedProps)),t&&(t=yt)){if(jo(e))throw $u(),Error(s(418));for(;t;)Pu(e,t),t=lr(t.nextSibling)}if(Lu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){yt=lr(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=gt?lr(e.stateNode.nextSibling):null;return!0}function $u(){for(var e=yt;e;)e=lr(e.nextSibling)}function cn(){yt=gt=null,Re=!1}function No(e){Tt===null?Tt=[e]:Tt.push(e)}var qp=R.ReactCurrentBatchConfig;function us(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var l=i.stateNode}if(!l)throw Error(s(147,e));var d=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var j=d.refs;g===null?delete j[f]:j[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function gi(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mu(e){var t=e._init;return t(e._payload)}function Du(e){function t(A,E){if(e){var O=A.deletions;O===null?(A.deletions=[E],A.flags|=16):O.push(E)}}function i(A,E){if(!e)return null;for(;E!==null;)t(A,E),E=E.sibling;return null}function l(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function d(A,E){return A=xr(A,E),A.index=0,A.sibling=null,A}function f(A,E,O){return A.index=O,e?(O=A.alternate,O!==null?(O=O.index,O<E?(A.flags|=2,E):O):(A.flags|=2,E)):(A.flags|=1048576,E)}function g(A){return e&&A.alternate===null&&(A.flags|=2),A}function j(A,E,O,W){return E===null||E.tag!==6?(E=pl(O,A.mode,W),E.return=A,E):(E=d(E,O),E.return=A,E)}function S(A,E,O,W){var ne=O.type;return ne===D?V(A,E,O.props.children,W,O.key):E!==null&&(E.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===be&&Mu(ne)===E.type)?(W=d(E,O.props),W.ref=us(A,E,O),W.return=A,W):(W=zi(O.type,O.key,O.props,null,A.mode,W),W.ref=us(A,E,O),W.return=A,W)}function L(A,E,O,W){return E===null||E.tag!==4||E.stateNode.containerInfo!==O.containerInfo||E.stateNode.implementation!==O.implementation?(E=gl(O,A.mode,W),E.return=A,E):(E=d(E,O.children||[]),E.return=A,E)}function V(A,E,O,W,ne){return E===null||E.tag!==7?(E=Mr(O,A.mode,W,ne),E.return=A,E):(E=d(E,O),E.return=A,E)}function H(A,E,O){if(typeof E=="string"&&E!==""||typeof E=="number")return E=pl(""+E,A.mode,O),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case F:return O=zi(E.type,E.key,E.props,null,A.mode,O),O.ref=us(A,null,E),O.return=A,O;case U:return E=gl(E,A.mode,O),E.return=A,E;case be:var W=E._init;return H(A,W(E._payload),O)}if(Un(E)||ue(E))return E=Mr(E,A.mode,O,null),E.return=A,E;gi(A,E)}return null}function z(A,E,O,W){var ne=E!==null?E.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ne!==null?null:j(A,E,""+O,W);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case F:return O.key===ne?S(A,E,O,W):null;case U:return O.key===ne?L(A,E,O,W):null;case be:return ne=O._init,z(A,E,ne(O._payload),W)}if(Un(O)||ue(O))return ne!==null?null:V(A,E,O,W,null);gi(A,O)}return null}function J(A,E,O,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number")return A=A.get(O)||null,j(E,A,""+W,ne);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case F:return A=A.get(W.key===null?O:W.key)||null,S(E,A,W,ne);case U:return A=A.get(W.key===null?O:W.key)||null,L(E,A,W,ne);case be:var ie=W._init;return J(A,E,O,ie(W._payload),ne)}if(Un(W)||ue(W))return A=A.get(O)||null,V(E,A,W,ne,null);gi(E,W)}return null}function ee(A,E,O,W){for(var ne=null,ie=null,ae=E,de=E=0,We=null;ae!==null&&de<O.length;de++){ae.index>de?(We=ae,ae=null):We=ae.sibling;var xe=z(A,ae,O[de],W);if(xe===null){ae===null&&(ae=We);break}e&&ae&&xe.alternate===null&&t(A,ae),E=f(xe,E,de),ie===null?ne=xe:ie.sibling=xe,ie=xe,ae=We}if(de===O.length)return i(A,ae),Re&&Tr(A,de),ne;if(ae===null){for(;de<O.length;de++)ae=H(A,O[de],W),ae!==null&&(E=f(ae,E,de),ie===null?ne=ae:ie.sibling=ae,ie=ae);return Re&&Tr(A,de),ne}for(ae=l(A,ae);de<O.length;de++)We=J(ae,A,de,O[de],W),We!==null&&(e&&We.alternate!==null&&ae.delete(We.key===null?de:We.key),E=f(We,E,de),ie===null?ne=We:ie.sibling=We,ie=We);return e&&ae.forEach(function(br){return t(A,br)}),Re&&Tr(A,de),ne}function re(A,E,O,W){var ne=ue(O);if(typeof ne!="function")throw Error(s(150));if(O=ne.call(O),O==null)throw Error(s(151));for(var ie=ne=null,ae=E,de=E=0,We=null,xe=O.next();ae!==null&&!xe.done;de++,xe=O.next()){ae.index>de?(We=ae,ae=null):We=ae.sibling;var br=z(A,ae,xe.value,W);if(br===null){ae===null&&(ae=We);break}e&&ae&&br.alternate===null&&t(A,ae),E=f(br,E,de),ie===null?ne=br:ie.sibling=br,ie=br,ae=We}if(xe.done)return i(A,ae),Re&&Tr(A,de),ne;if(ae===null){for(;!xe.done;de++,xe=O.next())xe=H(A,xe.value,W),xe!==null&&(E=f(xe,E,de),ie===null?ne=xe:ie.sibling=xe,ie=xe);return Re&&Tr(A,de),ne}for(ae=l(A,ae);!xe.done;de++,xe=O.next())xe=J(ae,A,de,xe.value,W),xe!==null&&(e&&xe.alternate!==null&&ae.delete(xe.key===null?de:xe.key),E=f(xe,E,de),ie===null?ne=xe:ie.sibling=xe,ie=xe);return e&&ae.forEach(function(_g){return t(A,_g)}),Re&&Tr(A,de),ne}function Me(A,E,O,W){if(typeof O=="object"&&O!==null&&O.type===D&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case F:e:{for(var ne=O.key,ie=E;ie!==null;){if(ie.key===ne){if(ne=O.type,ne===D){if(ie.tag===7){i(A,ie.sibling),E=d(ie,O.props.children),E.return=A,A=E;break e}}else if(ie.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===be&&Mu(ne)===ie.type){i(A,ie.sibling),E=d(ie,O.props),E.ref=us(A,ie,O),E.return=A,A=E;break e}i(A,ie);break}else t(A,ie);ie=ie.sibling}O.type===D?(E=Mr(O.props.children,A.mode,W,O.key),E.return=A,A=E):(W=zi(O.type,O.key,O.props,null,A.mode,W),W.ref=us(A,E,O),W.return=A,A=W)}return g(A);case U:e:{for(ie=O.key;E!==null;){if(E.key===ie)if(E.tag===4&&E.stateNode.containerInfo===O.containerInfo&&E.stateNode.implementation===O.implementation){i(A,E.sibling),E=d(E,O.children||[]),E.return=A,A=E;break e}else{i(A,E);break}else t(A,E);E=E.sibling}E=gl(O,A.mode,W),E.return=A,A=E}return g(A);case be:return ie=O._init,Me(A,E,ie(O._payload),W)}if(Un(O))return ee(A,E,O,W);if(ue(O))return re(A,E,O,W);gi(A,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,E!==null&&E.tag===6?(i(A,E.sibling),E=d(E,O),E.return=A,A=E):(i(A,E),E=pl(O,A.mode,W),E.return=A,A=E),g(A)):i(A,E)}return Me}var un=Du(!0),Uu=Du(!1),yi=cr(null),vi=null,dn=null,ko=null;function So(){ko=dn=vi=null}function Eo(e){var t=yi.current;Te(yi),e._currentValue=t}function Co(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function hn(e,t){vi=e,ko=dn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(lt=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},dn===null){if(vi===null)throw Error(s(308));dn=e,vi.dependencies={lanes:0,firstContext:e}}else dn=dn.next=e;return t}var Ar=null;function To(e){Ar===null?Ar=[e]:Ar.push(e)}function zu(e,t,i,l){var d=t.interleaved;return d===null?(i.next=i,To(t)):(i.next=d.next,d.next=i),t.interleaved=i,Gt(e,l)}function Gt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var hr=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ge&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,Gt(e,i)}return d=l.interleaved,d===null?(t.next=t,To(l)):(t.next=d.next,d.next=t),l.interleaved=t,Gt(e,i)}function xi(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,Va(e,i)}}function Bu(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?d=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function bi(e,t,i,l){var d=e.updateQueue;hr=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var S=j,L=S.next;S.next=null,g===null?f=L:g.next=L,g=S;var V=e.alternate;V!==null&&(V=V.updateQueue,j=V.lastBaseUpdate,j!==g&&(j===null?V.firstBaseUpdate=L:j.next=L,V.lastBaseUpdate=S))}if(f!==null){var H=d.baseState;g=0,V=L=S=null,j=f;do{var z=j.lane,J=j.eventTime;if((l&z)===z){V!==null&&(V=V.next={eventTime:J,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ee=e,re=j;switch(z=t,J=i,re.tag){case 1:if(ee=re.payload,typeof ee=="function"){H=ee.call(J,H,z);break e}H=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=re.payload,z=typeof ee=="function"?ee.call(J,H,z):ee,z==null)break e;H=X({},H,z);break e;case 2:hr=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,z=d.effects,z===null?d.effects=[j]:z.push(j))}else J={eventTime:J,lane:z,tag:j.tag,payload:j.payload,callback:j.callback,next:null},V===null?(L=V=J,S=H):V=V.next=J,g|=z;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;z=j,j=z.next,z.next=null,d.lastBaseUpdate=z,d.shared.pending=null}}while(!0);if(V===null&&(S=H),d.baseState=S,d.firstBaseUpdate=L,d.lastBaseUpdate=V,t=d.shared.interleaved,t!==null){d=t;do g|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Pr|=g,e.lanes=g,e.memoizedState=H}}function Vu(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=i,typeof d!="function")throw Error(s(191,d));d.call(l)}}}var ds={},Ut=cr(ds),hs=cr(ds),fs=cr(ds);function Rr(e){if(e===ds)throw Error(s(174));return e}function Ro(e,t){switch(Ne(fs,t),Ne(hs,e),Ne(Ut,ds),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ra(t,e)}Te(Ut),Ne(Ut,t)}function fn(){Te(Ut),Te(hs),Te(fs)}function qu(e){Rr(fs.current);var t=Rr(Ut.current),i=Ra(t,e.type);t!==i&&(Ne(hs,e),Ne(Ut,i))}function Oo(e){hs.current===e&&(Te(Ut),Te(hs))}var Pe=cr(0);function wi(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Po=[];function Io(){for(var e=0;e<Po.length;e++)Po[e]._workInProgressVersionPrimary=null;Po.length=0}var ji=R.ReactCurrentDispatcher,Lo=R.ReactCurrentBatchConfig,Or=0,Ie=null,Fe=null,qe=null,_i=!1,ms=!1,ps=0,Hp=0;function Xe(){throw Error(s(321))}function $o(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ct(e[i],t[i]))return!1;return!0}function Mo(e,t,i,l,d,f){if(Or=f,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ji.current=e===null||e.memoizedState===null?Qp:Jp,e=i(l,d),ms){f=0;do{if(ms=!1,ps=0,25<=f)throw Error(s(301));f+=1,qe=Fe=null,t.updateQueue=null,ji.current=Yp,e=i(l,d)}while(ms)}if(ji.current=Si,t=Fe!==null&&Fe.next!==null,Or=0,qe=Fe=Ie=null,_i=!1,t)throw Error(s(300));return e}function Do(){var e=ps!==0;return ps=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ie.memoizedState=qe=e:qe=qe.next=e,qe}function Nt(){if(Fe===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=qe===null?Ie.memoizedState:qe.next;if(t!==null)qe=t,Fe=e;else{if(e===null)throw Error(s(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},qe===null?Ie.memoizedState=qe=e:qe=qe.next=e}return qe}function gs(e,t){return typeof t=="function"?t(e):t}function Uo(e){var t=Nt(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=Fe,d=l.baseQueue,f=i.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}l.baseQueue=d=f,i.pending=null}if(d!==null){f=d.next,l=l.baseState;var j=g=null,S=null,L=f;do{var V=L.lane;if((Or&V)===V)S!==null&&(S=S.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),l=L.hasEagerState?L.eagerState:e(l,L.action);else{var H={lane:V,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};S===null?(j=S=H,g=l):S=S.next=H,Ie.lanes|=V,Pr|=V}L=L.next}while(L!==null&&L!==f);S===null?g=l:S.next=j,Ct(l,t.memoizedState)||(lt=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=S,i.lastRenderedState=l}if(e=i.interleaved,e!==null){d=e;do f=d.lane,Ie.lanes|=f,Pr|=f,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function zo(e){var t=Nt(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var g=d=d.next;do f=e(f,g.action),g=g.next;while(g!==d);Ct(f,t.memoizedState)||(lt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Hu(){}function Wu(e,t){var i=Ie,l=Nt(),d=t(),f=!Ct(l.memoizedState,d);if(f&&(l.memoizedState=d,lt=!0),l=l.queue,Fo(Qu.bind(null,i,l,e),[e]),l.getSnapshot!==t||f||qe!==null&&qe.memoizedState.tag&1){if(i.flags|=2048,ys(9,Gu.bind(null,i,l,d,t),void 0,null),He===null)throw Error(s(349));(Or&30)!==0||Ku(i,t,d)}return d}function Ku(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Gu(e,t,i,l){t.value=i,t.getSnapshot=l,Ju(t)&&Yu(e)}function Qu(e,t,i){return i(function(){Ju(t)&&Yu(e)})}function Ju(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ct(e,i)}catch{return!0}}function Yu(e){var t=Gt(e,1);t!==null&&Pt(t,e,1,-1)}function Xu(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gp.bind(null,Ie,e),[t.memoizedState,e]}function ys(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function Zu(){return Nt().memoizedState}function Ni(e,t,i,l){var d=zt();Ie.flags|=e,d.memoizedState=ys(1|t,i,void 0,l===void 0?null:l)}function ki(e,t,i,l){var d=Nt();l=l===void 0?null:l;var f=void 0;if(Fe!==null){var g=Fe.memoizedState;if(f=g.destroy,l!==null&&$o(l,g.deps)){d.memoizedState=ys(t,i,f,l);return}}Ie.flags|=e,d.memoizedState=ys(1|t,i,f,l)}function ed(e,t){return Ni(8390656,8,e,t)}function Fo(e,t){return ki(2048,8,e,t)}function td(e,t){return ki(4,2,e,t)}function rd(e,t){return ki(4,4,e,t)}function nd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sd(e,t,i){return i=i!=null?i.concat([e]):null,ki(4,4,nd.bind(null,t,e),i)}function Bo(){}function id(e,t){var i=Nt();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&$o(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function ad(e,t){var i=Nt();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&$o(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function od(e,t,i){return(Or&21)===0?(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=i):(Ct(i,t)||(i=Mc(),Ie.lanes|=i,Pr|=i,e.baseState=!0),t)}function Wp(e,t){var i=je;je=i!==0&&4>i?i:4,e(!0);var l=Lo.transition;Lo.transition={};try{e(!1),t()}finally{je=i,Lo.transition=l}}function ld(){return Nt().memoizedState}function Kp(e,t,i){var l=yr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},cd(e))ud(t,i);else if(i=zu(e,t,i,l),i!==null){var d=st();Pt(i,e,l,d),dd(i,t,l)}}function Gp(e,t,i){var l=yr(e),d={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(cd(e))ud(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,j=f(g,i);if(d.hasEagerState=!0,d.eagerState=j,Ct(j,g)){var S=t.interleaved;S===null?(d.next=d,To(t)):(d.next=S.next,S.next=d),t.interleaved=d;return}}catch{}finally{}i=zu(e,t,d,l),i!==null&&(d=st(),Pt(i,e,l,d),dd(i,t,l))}}function cd(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function ud(e,t){ms=_i=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function dd(e,t,i){if((i&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,Va(e,i)}}var Si={readContext:_t,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Qp={readContext:_t,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:ed,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Ni(4194308,4,nd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ni(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ni(4,2,e,t)},useMemo:function(e,t){var i=zt();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=zt();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=Kp.bind(null,Ie,e),[l.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:Xu,useDebugValue:Bo,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=Xu(!1),t=e[0];return e=Wp.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Ie,d=zt();if(Re){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),He===null)throw Error(s(349));(Or&30)!==0||Ku(l,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,ed(Qu.bind(null,l,f,e),[e]),l.flags|=2048,ys(9,Gu.bind(null,l,f,i,t),void 0,null),i},useId:function(){var e=zt(),t=He.identifierPrefix;if(Re){var i=Kt,l=Wt;i=(l&~(1<<32-Et(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=ps++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Hp++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jp={readContext:_t,useCallback:id,useContext:_t,useEffect:Fo,useImperativeHandle:sd,useInsertionEffect:td,useLayoutEffect:rd,useMemo:ad,useReducer:Uo,useRef:Zu,useState:function(){return Uo(gs)},useDebugValue:Bo,useDeferredValue:function(e){var t=Nt();return od(t,Fe.memoizedState,e)},useTransition:function(){var e=Uo(gs)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Hu,useSyncExternalStore:Wu,useId:ld,unstable_isNewReconciler:!1},Yp={readContext:_t,useCallback:id,useContext:_t,useEffect:Fo,useImperativeHandle:sd,useInsertionEffect:td,useLayoutEffect:rd,useMemo:ad,useReducer:zo,useRef:Zu,useState:function(){return zo(gs)},useDebugValue:Bo,useDeferredValue:function(e){var t=Nt();return Fe===null?t.memoizedState=e:od(t,Fe.memoizedState,e)},useTransition:function(){var e=zo(gs)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Hu,useSyncExternalStore:Wu,useId:ld,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Vo(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:X({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ei={isMounted:function(e){return(e=e._reactInternals)?kr(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=st(),d=yr(e),f=Qt(l,d);f.payload=t,i!=null&&(f.callback=i),t=fr(e,f,d),t!==null&&(Pt(t,e,d,l),xi(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=st(),d=yr(e),f=Qt(l,d);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=fr(e,f,d),t!==null&&(Pt(t,e,d,l),xi(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=st(),l=yr(e),d=Qt(i,l);d.tag=2,t!=null&&(d.callback=t),t=fr(e,d,l),t!==null&&(Pt(t,e,l,i),xi(t,e,l))}};function hd(e,t,i,l,d,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,g):t.prototype&&t.prototype.isPureReactComponent?!ns(i,l)||!ns(d,f):!0}function fd(e,t,i){var l=!1,d=ur,f=t.contextType;return typeof f=="object"&&f!==null?f=_t(f):(d=ot(t)?Er:Ye.current,l=t.contextTypes,f=(l=l!=null)?an(e,d):ur),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ei,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function md(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function qo(e,t,i,l){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs={},Ao(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=_t(f):(f=ot(t)?Er:Ye.current,d.context=an(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Vo(e,t,f,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Ei.enqueueReplaceState(d,d.state,null),bi(e,i,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function mn(e,t){try{var i="",l=t;do i+=ye(l),l=l.return;while(l);var d=i}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Ho(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Wo(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Xp=typeof WeakMap=="function"?WeakMap:Map;function pd(e,t,i){i=Qt(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){Ii||(Ii=!0,ol=l),Wo(e,t)},i}function gd(e,t,i){i=Qt(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;i.payload=function(){return l(d)},i.callback=function(){Wo(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Wo(e,t),typeof l!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function yd(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Xp;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(i)||(d.add(i),e=hg.bind(null,e,t,i),t.then(e,e))}function vd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xd(e,t,i,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Qt(-1,1),t.tag=2,fr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Zp=R.ReactCurrentOwner,lt=!1;function nt(e,t,i,l){t.child=e===null?Uu(t,null,i,l):un(t,e.child,i,l)}function bd(e,t,i,l,d){i=i.render;var f=t.ref;return hn(t,d),l=Mo(e,t,i,l,f,d),i=Do(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(Re&&i&&bo(t),t.flags|=1,nt(e,t,l,d),t.child)}function wd(e,t,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!ml(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,jd(e,t,f,l,d)):(e=zi(i.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:ns,i(g,l)&&e.ref===t.ref)return Jt(e,t,d)}return t.flags|=1,e=xr(f,l),e.ref=t.ref,e.return=t,t.child=e}function jd(e,t,i,l,d){if(e!==null){var f=e.memoizedProps;if(ns(f,l)&&e.ref===t.ref)if(lt=!1,t.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(lt=!0);else return t.lanes=e.lanes,Jt(e,t,d)}return Ko(e,t,i,l,d)}function _d(e,t,i){var l=t.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(gn,vt),vt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(gn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Ne(gn,vt),vt|=l}else f!==null?(l=f.baseLanes|i,t.memoizedState=null):l=i,Ne(gn,vt),vt|=l;return nt(e,t,d,i),t.child}function Nd(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ko(e,t,i,l,d){var f=ot(i)?Er:Ye.current;return f=an(t,f),hn(t,d),i=Mo(e,t,i,l,f,d),l=Do(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(Re&&l&&bo(t),t.flags|=1,nt(e,t,i,d),t.child)}function kd(e,t,i,l,d){if(ot(i)){var f=!0;di(t)}else f=!1;if(hn(t,d),t.stateNode===null)Ti(e,t),fd(t,i,l),qo(t,i,l,d),l=!0;else if(e===null){var g=t.stateNode,j=t.memoizedProps;g.props=j;var S=g.context,L=i.contextType;typeof L=="object"&&L!==null?L=_t(L):(L=ot(i)?Er:Ye.current,L=an(t,L));var V=i.getDerivedStateFromProps,H=typeof V=="function"||typeof g.getSnapshotBeforeUpdate=="function";H||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==l||S!==L)&&md(t,g,l,L),hr=!1;var z=t.memoizedState;g.state=z,bi(t,l,g,d),S=t.memoizedState,j!==l||z!==S||at.current||hr?(typeof V=="function"&&(Vo(t,i,V,l),S=t.memoizedState),(j=hr||hd(t,i,j,l,z,S,L))?(H||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=S),g.props=l,g.state=S,g.context=L,l=j):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,Fu(e,t),j=t.memoizedProps,L=t.type===t.elementType?j:At(t.type,j),g.props=L,H=t.pendingProps,z=g.context,S=i.contextType,typeof S=="object"&&S!==null?S=_t(S):(S=ot(i)?Er:Ye.current,S=an(t,S));var J=i.getDerivedStateFromProps;(V=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==H||z!==S)&&md(t,g,l,S),hr=!1,z=t.memoizedState,g.state=z,bi(t,l,g,d);var ee=t.memoizedState;j!==H||z!==ee||at.current||hr?(typeof J=="function"&&(Vo(t,i,J,l),ee=t.memoizedState),(L=hr||hd(t,i,L,l,z,ee,S)||!1)?(V||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,ee,S),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,ee,S)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ee),g.props=l,g.state=ee,g.context=S,l=L):(typeof g.componentDidUpdate!="function"||j===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),l=!1)}return Go(e,t,i,l,f,d)}function Go(e,t,i,l,d,f){Nd(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return d&&Au(t,i,!1),Jt(e,t,f);l=t.stateNode,Zp.current=t;var j=g&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=un(t,e.child,null,f),t.child=un(t,null,j,f)):nt(e,t,j,f),t.memoizedState=l.state,d&&Au(t,i,!0),t.child}function Sd(e){var t=e.stateNode;t.pendingContext?Cu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cu(e,t.context,!1),Ro(e,t.containerInfo)}function Ed(e,t,i,l,d){return cn(),No(d),t.flags|=256,nt(e,t,i,l),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0};function Jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cd(e,t,i){var l=t.pendingProps,d=Pe.current,f=!1,g=(t.flags&128)!==0,j;if((j=g)||(j=e!==null&&e.memoizedState===null?!1:(d&2)!==0),j?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ne(Pe,d&1),e===null)return _o(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=l.children,e=l.fallback,f?(l=t.mode,f=t.child,g={mode:"hidden",children:g},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Fi(g,l,0,null),e=Mr(e,l,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Jo(i),t.memoizedState=Qo,e):Yo(t,g));if(d=e.memoizedState,d!==null&&(j=d.dehydrated,j!==null))return eg(e,t,g,l,j,d,i);if(f){f=l.fallback,g=t.mode,d=e.child,j=d.sibling;var S={mode:"hidden",children:l.children};return(g&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=S,t.deletions=null):(l=xr(d,S),l.subtreeFlags=d.subtreeFlags&14680064),j!==null?f=xr(j,f):(f=Mr(f,g,i,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,g=e.child.memoizedState,g=g===null?Jo(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~i,t.memoizedState=Qo,l}return f=e.child,e=f.sibling,l=xr(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function Yo(e,t){return t=Fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ci(e,t,i,l){return l!==null&&No(l),un(t,e.child,null,i),e=Yo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eg(e,t,i,l,d,f,g){if(i)return t.flags&256?(t.flags&=-257,l=Ho(Error(s(422))),Ci(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,d=t.mode,l=Fi({mode:"visible",children:l.children},d,0,null),f=Mr(f,d,g,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&un(t,e.child,null,g),t.child.memoizedState=Jo(g),t.memoizedState=Qo,f);if((t.mode&1)===0)return Ci(e,t,g,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var j=l.dgst;return l=j,f=Error(s(419)),l=Ho(f,l,void 0),Ci(e,t,g,l)}if(j=(g&e.childLanes)!==0,lt||j){if(l=He,l!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Gt(e,d),Pt(l,e,d,-1))}return fl(),l=Ho(Error(s(421))),Ci(e,t,g,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=fg.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,yt=lr(d.nextSibling),gt=t,Re=!0,Tt=null,e!==null&&(wt[jt++]=Wt,wt[jt++]=Kt,wt[jt++]=Cr,Wt=e.id,Kt=e.overflow,Cr=t),t=Yo(t,l.children),t.flags|=4096,t)}function Td(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Co(e.return,t,i)}function Xo(e,t,i,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=d)}function Ad(e,t,i){var l=t.pendingProps,d=l.revealOrder,f=l.tail;if(nt(e,t,l.children,i),l=Pe.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Td(e,i,t);else if(e.tag===19)Td(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ne(Pe,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&wi(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),Xo(t,!1,d,i,f);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&wi(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Xo(t,!0,i,null,f);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ti(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=xr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=xr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function tg(e,t,i){switch(t.tag){case 3:Sd(t),cn();break;case 5:qu(t);break;case 1:ot(t.type)&&di(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Ne(yi,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ne(Pe,Pe.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Cd(e,t,i):(Ne(Pe,Pe.current&1),e=Jt(e,t,i),e!==null?e.sibling:null);Ne(Pe,Pe.current&1);break;case 19:if(l=(i&t.childLanes)!==0,(e.flags&128)!==0){if(l)return Ad(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ne(Pe,Pe.current),l)break;return null;case 22:case 23:return t.lanes=0,_d(e,t,i)}return Jt(e,t,i)}var Rd,Zo,Od,Pd;Rd=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Zo=function(){},Od=function(e,t,i,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,Rr(Ut.current);var f=null;switch(i){case"input":d=Ea(e,d),l=Ea(e,l),f=[];break;case"select":d=X({},d,{value:void 0}),l=X({},l,{value:void 0}),f=[];break;case"textarea":d=Aa(e,d),l=Aa(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=li)}Oa(i,l);var g;i=null;for(L in d)if(!l.hasOwnProperty(L)&&d.hasOwnProperty(L)&&d[L]!=null)if(L==="style"){var j=d[L];for(g in j)j.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(c.hasOwnProperty(L)?f||(f=[]):(f=f||[]).push(L,null));for(L in l){var S=l[L];if(j=d?.[L],l.hasOwnProperty(L)&&S!==j&&(S!=null||j!=null))if(L==="style")if(j){for(g in j)!j.hasOwnProperty(g)||S&&S.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in S)S.hasOwnProperty(g)&&j[g]!==S[g]&&(i||(i={}),i[g]=S[g])}else i||(f||(f=[]),f.push(L,i)),i=S;else L==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,j=j?j.__html:void 0,S!=null&&j!==S&&(f=f||[]).push(L,S)):L==="children"?typeof S!="string"&&typeof S!="number"||(f=f||[]).push(L,""+S):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(c.hasOwnProperty(L)?(S!=null&&L==="onScroll"&&Ce("scroll",e),f||j===S||(f=[])):(f=f||[]).push(L,S))}i&&(f=f||[]).push("style",i);var L=f;(t.updateQueue=L)&&(t.flags|=4)}},Pd=function(e,t,i,l){i!==l&&(t.flags|=4)};function vs(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function rg(e,t,i){var l=t.pendingProps;switch(wo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ot(t.type)&&ui(),Ze(t),null;case 3:return l=t.stateNode,fn(),Te(at),Te(Ye),Io(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(pi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tt!==null&&(ul(Tt),Tt=null))),Zo(e,t),Ze(t),null;case 5:Oo(t);var d=Rr(fs.current);if(i=t.type,e!==null&&t.stateNode!=null)Od(e,t,i,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ze(t),null}if(e=Rr(Ut.current),pi(t)){l=t.stateNode,i=t.type;var f=t.memoizedProps;switch(l[Dt]=t,l[ls]=f,e=(t.mode&1)!==0,i){case"dialog":Ce("cancel",l),Ce("close",l);break;case"iframe":case"object":case"embed":Ce("load",l);break;case"video":case"audio":for(d=0;d<is.length;d++)Ce(is[d],l);break;case"source":Ce("error",l);break;case"img":case"image":case"link":Ce("error",l),Ce("load",l);break;case"details":Ce("toggle",l);break;case"input":fc(l,f),Ce("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Ce("invalid",l);break;case"textarea":gc(l,f),Ce("invalid",l)}Oa(i,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var j=f[g];g==="children"?typeof j=="string"?l.textContent!==j&&(f.suppressHydrationWarning!==!0&&oi(l.textContent,j,e),d=["children",j]):typeof j=="number"&&l.textContent!==""+j&&(f.suppressHydrationWarning!==!0&&oi(l.textContent,j,e),d=["children",""+j]):c.hasOwnProperty(g)&&j!=null&&g==="onScroll"&&Ce("scroll",l)}switch(i){case"input":Ds(l),pc(l,f,!0);break;case"textarea":Ds(l),vc(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=li)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xc(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(i,{is:l.is}):(e=g.createElement(i),i==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,i),e[Dt]=t,e[ls]=l,Rd(e,t,!1,!1),t.stateNode=e;e:{switch(g=Pa(i,l),i){case"dialog":Ce("cancel",e),Ce("close",e),d=l;break;case"iframe":case"object":case"embed":Ce("load",e),d=l;break;case"video":case"audio":for(d=0;d<is.length;d++)Ce(is[d],e);d=l;break;case"source":Ce("error",e),d=l;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),d=l;break;case"details":Ce("toggle",e),d=l;break;case"input":fc(e,l),d=Ea(e,l),Ce("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=X({},l,{value:void 0}),Ce("invalid",e);break;case"textarea":gc(e,l),d=Aa(e,l),Ce("invalid",e);break;default:d=l}Oa(i,d),j=d;for(f in j)if(j.hasOwnProperty(f)){var S=j[f];f==="style"?jc(e,S):f==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&bc(e,S)):f==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&zn(e,S):typeof S=="number"&&zn(e,""+S):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(c.hasOwnProperty(f)?S!=null&&f==="onScroll"&&Ce("scroll",e):S!=null&&C(e,f,S,g))}switch(i){case"input":Ds(e),pc(e,l,!1);break;case"textarea":Ds(e),vc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+we(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Kr(e,!!l.multiple,f,!1):l.defaultValue!=null&&Kr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=li)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Pd(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(i=Rr(fs.current),Rr(Ut.current),pi(t)){if(l=t.stateNode,i=t.memoizedProps,l[Dt]=t,(f=l.nodeValue!==i)&&(e=gt,e!==null))switch(e.tag){case 3:oi(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oi(l.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[Dt]=t,t.stateNode=l}return Ze(t),null;case 13:if(Te(Pe),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&yt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)$u(),cn(),t.flags|=98560,f=!1;else if(f=pi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Dt]=t}else cn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),f=!1}else Tt!==null&&(ul(Tt),Tt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Pe.current&1)!==0?Be===0&&(Be=3):fl())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return fn(),Zo(e,t),e===null&&as(t.stateNode.containerInfo),Ze(t),null;case 10:return Eo(t.type._context),Ze(t),null;case 17:return ot(t.type)&&ui(),Ze(t),null;case 19:if(Te(Pe),f=t.memoizedState,f===null)return Ze(t),null;if(l=(t.flags&128)!==0,g=f.rendering,g===null)if(l)vs(f,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=wi(e),g!==null){for(t.flags|=128,vs(f,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)f=i,e=l,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ne(Pe,Pe.current&1|2),t.child}e=e.sibling}f.tail!==null&&$e()>yn&&(t.flags|=128,l=!0,vs(f,!1),t.lanes=4194304)}else{if(!l)if(e=wi(g),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),vs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Re)return Ze(t),null}else 2*$e()-f.renderingStartTime>yn&&i!==1073741824&&(t.flags|=128,l=!0,vs(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(i=f.last,i!==null?i.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=$e(),t.sibling=null,i=Pe.current,Ne(Pe,l?i&1|2:i&1),t):(Ze(t),null);case 22:case 23:return hl(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(vt&1073741824)!==0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function ng(e,t){switch(wo(t),t.tag){case 1:return ot(t.type)&&ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fn(),Te(at),Te(Ye),Io(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Oo(t),null;case 13:if(Te(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Pe),null;case 4:return fn(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return hl(),null;case 24:return null;default:return null}}var Ai=!1,et=!1,sg=typeof WeakSet=="function"?WeakSet:Set,Y=null;function pn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Le(e,t,l)}else i.current=null}function el(e,t,i){try{i()}catch(l){Le(e,t,l)}}var Id=!1;function ig(e,t){if(ho=Js,e=hu(),no(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,j=-1,S=-1,L=0,V=0,H=e,z=null;t:for(;;){for(var J;H!==i||d!==0&&H.nodeType!==3||(j=g+d),H!==f||l!==0&&H.nodeType!==3||(S=g+l),H.nodeType===3&&(g+=H.nodeValue.length),(J=H.firstChild)!==null;)z=H,H=J;for(;;){if(H===e)break t;if(z===i&&++L===d&&(j=g),z===f&&++V===l&&(S=g),(J=H.nextSibling)!==null)break;H=z,z=H.parentNode}H=J}i=j===-1||S===-1?null:{start:j,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(fo={focusedElem:e,selectionRange:i},Js=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var ee=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var re=ee.memoizedProps,Me=ee.memoizedState,A=t.stateNode,E=A.getSnapshotBeforeUpdate(t.elementType===t.type?re:At(t.type,re),Me);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(W){Le(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return ee=Id,Id=!1,ee}function xs(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&el(t,i,f)}d=d.next}while(d!==l)}}function Ri(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function tl(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Ld(e){var t=e.alternate;t!==null&&(e.alternate=null,Ld(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dt],delete t[ls],delete t[yo],delete t[Fp],delete t[Bp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $d(e){return e.tag===5||e.tag===3||e.tag===4}function Md(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$d(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rl(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=li));else if(l!==4&&(e=e.child,e!==null))for(rl(e,t,i),e=e.sibling;e!==null;)rl(e,t,i),e=e.sibling}function nl(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(nl(e,t,i),e=e.sibling;e!==null;)nl(e,t,i),e=e.sibling}var Ke=null,Rt=!1;function mr(e,t,i){for(i=i.child;i!==null;)Dd(e,t,i),i=i.sibling}function Dd(e,t,i){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(qs,i)}catch{}switch(i.tag){case 5:et||pn(i,t);case 6:var l=Ke,d=Rt;Ke=null,mr(e,t,i),Ke=l,Rt=d,Ke!==null&&(Rt?(e=Ke,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ke.removeChild(i.stateNode));break;case 18:Ke!==null&&(Rt?(e=Ke,i=i.stateNode,e.nodeType===8?go(e.parentNode,i):e.nodeType===1&&go(e,i),Yn(e)):go(Ke,i.stateNode));break;case 4:l=Ke,d=Rt,Ke=i.stateNode.containerInfo,Rt=!0,mr(e,t,i),Ke=l,Rt=d;break;case 0:case 11:case 14:case 15:if(!et&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&el(i,t,g),d=d.next}while(d!==l)}mr(e,t,i);break;case 1:if(!et&&(pn(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(j){Le(i,t,j)}mr(e,t,i);break;case 21:mr(e,t,i);break;case 22:i.mode&1?(et=(l=et)||i.memoizedState!==null,mr(e,t,i),et=l):mr(e,t,i);break;default:mr(e,t,i)}}function Ud(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new sg),t.forEach(function(l){var d=mg.bind(null,e,l);i.has(l)||(i.add(l),l.then(d,d))})}}function Ot(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];try{var f=e,g=t,j=g;e:for(;j!==null;){switch(j.tag){case 5:Ke=j.stateNode,Rt=!1;break e;case 3:Ke=j.stateNode.containerInfo,Rt=!0;break e;case 4:Ke=j.stateNode.containerInfo,Rt=!0;break e}j=j.return}if(Ke===null)throw Error(s(160));Dd(f,g,d),Ke=null,Rt=!1;var S=d.alternate;S!==null&&(S.return=null),d.return=null}catch(L){Le(d,t,L)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zd(t,e),t=t.sibling}function zd(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Ft(e),l&4){try{xs(3,e,e.return),Ri(3,e)}catch(re){Le(e,e.return,re)}try{xs(5,e,e.return)}catch(re){Le(e,e.return,re)}}break;case 1:Ot(t,e),Ft(e),l&512&&i!==null&&pn(i,i.return);break;case 5:if(Ot(t,e),Ft(e),l&512&&i!==null&&pn(i,i.return),e.flags&32){var d=e.stateNode;try{zn(d,"")}catch(re){Le(e,e.return,re)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,g=i!==null?i.memoizedProps:f,j=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{j==="input"&&f.type==="radio"&&f.name!=null&&mc(d,f),Pa(j,g);var L=Pa(j,f);for(g=0;g<S.length;g+=2){var V=S[g],H=S[g+1];V==="style"?jc(d,H):V==="dangerouslySetInnerHTML"?bc(d,H):V==="children"?zn(d,H):C(d,V,H,L)}switch(j){case"input":Ca(d,f);break;case"textarea":yc(d,f);break;case"select":var z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var J=f.value;J!=null?Kr(d,!!f.multiple,J,!1):z!==!!f.multiple&&(f.defaultValue!=null?Kr(d,!!f.multiple,f.defaultValue,!0):Kr(d,!!f.multiple,f.multiple?[]:"",!1))}d[ls]=f}catch(re){Le(e,e.return,re)}}break;case 6:if(Ot(t,e),Ft(e),l&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(re){Le(e,e.return,re)}}break;case 3:if(Ot(t,e),Ft(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Yn(t.containerInfo)}catch(re){Le(e,e.return,re)}break;case 4:Ot(t,e),Ft(e);break;case 13:Ot(t,e),Ft(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(al=$e())),l&4&&Ud(e);break;case 22:if(V=i!==null&&i.memoizedState!==null,e.mode&1?(et=(L=et)||V,Ot(t,e),et=L):Ot(t,e),Ft(e),l&8192){if(L=e.memoizedState!==null,(e.stateNode.isHidden=L)&&!V&&(e.mode&1)!==0)for(Y=e,V=e.child;V!==null;){for(H=Y=V;Y!==null;){switch(z=Y,J=z.child,z.tag){case 0:case 11:case 14:case 15:xs(4,z,z.return);break;case 1:pn(z,z.return);var ee=z.stateNode;if(typeof ee.componentWillUnmount=="function"){l=z,i=z.return;try{t=l,ee.props=t.memoizedProps,ee.state=t.memoizedState,ee.componentWillUnmount()}catch(re){Le(l,i,re)}}break;case 5:pn(z,z.return);break;case 22:if(z.memoizedState!==null){Vd(H);continue}}J!==null?(J.return=z,Y=J):Vd(H)}V=V.sibling}e:for(V=null,H=e;;){if(H.tag===5){if(V===null){V=H;try{d=H.stateNode,L?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(j=H.stateNode,S=H.memoizedProps.style,g=S!=null&&S.hasOwnProperty("display")?S.display:null,j.style.display=wc("display",g))}catch(re){Le(e,e.return,re)}}}else if(H.tag===6){if(V===null)try{H.stateNode.nodeValue=L?"":H.memoizedProps}catch(re){Le(e,e.return,re)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;V===H&&(V=null),H=H.return}V===H&&(V=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Ot(t,e),Ft(e),l&4&&Ud(e);break;case 21:break;default:Ot(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if($d(i)){var l=i;break e}i=i.return}throw Error(s(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(zn(d,""),l.flags&=-33);var f=Md(e);nl(e,f,d);break;case 3:case 4:var g=l.stateNode.containerInfo,j=Md(e);rl(e,j,g);break;default:throw Error(s(161))}}catch(S){Le(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ag(e,t,i){Y=e,Fd(e)}function Fd(e,t,i){for(var l=(e.mode&1)!==0;Y!==null;){var d=Y,f=d.child;if(d.tag===22&&l){var g=d.memoizedState!==null||Ai;if(!g){var j=d.alternate,S=j!==null&&j.memoizedState!==null||et;j=Ai;var L=et;if(Ai=g,(et=S)&&!L)for(Y=d;Y!==null;)g=Y,S=g.child,g.tag===22&&g.memoizedState!==null?qd(d):S!==null?(S.return=g,Y=S):qd(d);for(;f!==null;)Y=f,Fd(f),f=f.sibling;Y=d,Ai=j,et=L}Bd(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,Y=f):Bd(e)}}function Bd(e){for(;Y!==null;){var t=Y;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:et||Ri(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!et)if(i===null)l.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:At(t.type,i.memoizedProps);l.componentDidUpdate(d,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Vu(t,f,l);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Vu(t,g,i)}break;case 5:var j=t.stateNode;if(i===null&&t.flags&4){i=j;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var L=t.alternate;if(L!==null){var V=L.memoizedState;if(V!==null){var H=V.dehydrated;H!==null&&Yn(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}et||t.flags&512&&tl(t)}catch(z){Le(t,t.return,z)}}if(t===e){Y=null;break}if(i=t.sibling,i!==null){i.return=t.return,Y=i;break}Y=t.return}}function Vd(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}function qd(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Ri(4,t)}catch(S){Le(t,i,S)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(S){Le(t,d,S)}}var f=t.return;try{tl(t)}catch(S){Le(t,f,S)}break;case 5:var g=t.return;try{tl(t)}catch(S){Le(t,g,S)}}}catch(S){Le(t,t.return,S)}if(t===e){Y=null;break}var j=t.sibling;if(j!==null){j.return=t.return,Y=j;break}Y=t.return}}var og=Math.ceil,Oi=R.ReactCurrentDispatcher,sl=R.ReactCurrentOwner,kt=R.ReactCurrentBatchConfig,ge=0,He=null,De=null,Ge=0,vt=0,gn=cr(0),Be=0,bs=null,Pr=0,Pi=0,il=0,ws=null,ct=null,al=0,yn=1/0,Yt=null,Ii=!1,ol=null,pr=null,Li=!1,gr=null,$i=0,js=0,ll=null,Mi=-1,Di=0;function st(){return(ge&6)!==0?$e():Mi!==-1?Mi:Mi=$e()}function yr(e){return(e.mode&1)===0?1:(ge&2)!==0&&Ge!==0?Ge&-Ge:qp.transition!==null?(Di===0&&(Di=Mc()),Di):(e=je,e!==0||(e=window.event,e=e===void 0?16:Wc(e.type)),e)}function Pt(e,t,i,l){if(50<js)throw js=0,ll=null,Error(s(185));Wn(e,i,l),((ge&2)===0||e!==He)&&(e===He&&((ge&2)===0&&(Pi|=i),Be===4&&vr(e,Ge)),ut(e,l),i===1&&ge===0&&(t.mode&1)===0&&(yn=$e()+500,hi&&dr()))}function ut(e,t){var i=e.callbackNode;qm(e,t);var l=Ks(e,e===He?Ge:0);if(l===0)i!==null&&Ic(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&Ic(i),t===1)e.tag===0?Vp(Wd.bind(null,e)):Ru(Wd.bind(null,e)),Up(function(){(ge&6)===0&&dr()}),i=null;else{switch(Dc(l)){case 1:i=za;break;case 4:i=Lc;break;case 16:i=Vs;break;case 536870912:i=$c;break;default:i=Vs}i=eh(i,Hd.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Hd(e,t){if(Mi=-1,Di=0,(ge&6)!==0)throw Error(s(327));var i=e.callbackNode;if(vn()&&e.callbackNode!==i)return null;var l=Ks(e,e===He?Ge:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Ui(e,l);else{t=l;var d=ge;ge|=2;var f=Gd();(He!==e||Ge!==t)&&(Yt=null,yn=$e()+500,Lr(e,t));do try{ug();break}catch(j){Kd(e,j)}while(!0);So(),Oi.current=f,ge=d,De!==null?t=0:(He=null,Ge=0,t=Be)}if(t!==0){if(t===2&&(d=Fa(e),d!==0&&(l=d,t=cl(e,d))),t===1)throw i=bs,Lr(e,0),vr(e,l),ut(e,$e()),i;if(t===6)vr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!lg(d)&&(t=Ui(e,l),t===2&&(f=Fa(e),f!==0&&(l=f,t=cl(e,f))),t===1))throw i=bs,Lr(e,0),vr(e,l),ut(e,$e()),i;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(s(345));case 2:$r(e,ct,Yt);break;case 3:if(vr(e,l),(l&130023424)===l&&(t=al+500-$e(),10<t)){if(Ks(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){st(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=po($r.bind(null,e,ct,Yt),t);break}$r(e,ct,Yt);break;case 4:if(vr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var g=31-Et(l);f=1<<g,g=t[g],g>d&&(d=g),l&=~f}if(l=d,l=$e()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*og(l/1960))-l,10<l){e.timeoutHandle=po($r.bind(null,e,ct,Yt),l);break}$r(e,ct,Yt);break;case 5:$r(e,ct,Yt);break;default:throw Error(s(329))}}}return ut(e,$e()),e.callbackNode===i?Hd.bind(null,e):null}function cl(e,t){var i=ws;return e.current.memoizedState.isDehydrated&&(Lr(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=ct,ct=i,t!==null&&ul(t)),e}function ul(e){ct===null?ct=e:ct.push.apply(ct,e)}function lg(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!Ct(f(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vr(e,t){for(t&=~il,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Et(t),l=1<<i;e[i]=-1,t&=~l}}function Wd(e){if((ge&6)!==0)throw Error(s(327));vn();var t=Ks(e,0);if((t&1)===0)return ut(e,$e()),null;var i=Ui(e,t);if(e.tag!==0&&i===2){var l=Fa(e);l!==0&&(t=l,i=cl(e,l))}if(i===1)throw i=bs,Lr(e,0),vr(e,t),ut(e,$e()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,ct,Yt),ut(e,$e()),null}function dl(e,t){var i=ge;ge|=1;try{return e(t)}finally{ge=i,ge===0&&(yn=$e()+500,hi&&dr())}}function Ir(e){gr!==null&&gr.tag===0&&(ge&6)===0&&vn();var t=ge;ge|=1;var i=kt.transition,l=je;try{if(kt.transition=null,je=1,e)return e()}finally{je=l,kt.transition=i,ge=t,(ge&6)===0&&dr()}}function hl(){vt=gn.current,Te(gn)}function Lr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Dp(i)),De!==null)for(i=De.return;i!==null;){var l=i;switch(wo(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ui();break;case 3:fn(),Te(at),Te(Ye),Io();break;case 5:Oo(l);break;case 4:fn();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:Eo(l.type._context);break;case 22:case 23:hl()}i=i.return}if(He=e,De=e=xr(e.current,null),Ge=vt=t,Be=0,bs=null,il=Pi=Pr=0,ct=ws=null,Ar!==null){for(t=0;t<Ar.length;t++)if(i=Ar[t],l=i.interleaved,l!==null){i.interleaved=null;var d=l.next,f=i.pending;if(f!==null){var g=f.next;f.next=d,l.next=g}i.pending=l}Ar=null}return e}function Kd(e,t){do{var i=De;try{if(So(),ji.current=Si,_i){for(var l=Ie.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}_i=!1}if(Or=0,qe=Fe=Ie=null,ms=!1,ps=0,sl.current=null,i===null||i.return===null){Be=1,bs=t,De=null;break}e:{var f=e,g=i.return,j=i,S=t;if(t=Ge,j.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var L=S,V=j,H=V.tag;if((V.mode&1)===0&&(H===0||H===11||H===15)){var z=V.alternate;z?(V.updateQueue=z.updateQueue,V.memoizedState=z.memoizedState,V.lanes=z.lanes):(V.updateQueue=null,V.memoizedState=null)}var J=vd(g);if(J!==null){J.flags&=-257,xd(J,g,j,f,t),J.mode&1&&yd(f,L,t),t=J,S=L;var ee=t.updateQueue;if(ee===null){var re=new Set;re.add(S),t.updateQueue=re}else ee.add(S);break e}else{if((t&1)===0){yd(f,L,t),fl();break e}S=Error(s(426))}}else if(Re&&j.mode&1){var Me=vd(g);if(Me!==null){(Me.flags&65536)===0&&(Me.flags|=256),xd(Me,g,j,f,t),No(mn(S,j));break e}}f=S=mn(S,j),Be!==4&&(Be=2),ws===null?ws=[f]:ws.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=pd(f,S,t);Bu(f,A);break e;case 1:j=S;var E=f.type,O=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(pr===null||!pr.has(O)))){f.flags|=65536,t&=-t,f.lanes|=t;var W=gd(f,j,t);Bu(f,W);break e}}f=f.return}while(f!==null)}Jd(i)}catch(ne){t=ne,De===i&&i!==null&&(De=i=i.return);continue}break}while(!0)}function Gd(){var e=Oi.current;return Oi.current=Si,e===null?Si:e}function fl(){(Be===0||Be===3||Be===2)&&(Be=4),He===null||(Pr&268435455)===0&&(Pi&268435455)===0||vr(He,Ge)}function Ui(e,t){var i=ge;ge|=2;var l=Gd();(He!==e||Ge!==t)&&(Yt=null,Lr(e,t));do try{cg();break}catch(d){Kd(e,d)}while(!0);if(So(),ge=i,Oi.current=l,De!==null)throw Error(s(261));return He=null,Ge=0,Be}function cg(){for(;De!==null;)Qd(De)}function ug(){for(;De!==null&&!Lm();)Qd(De)}function Qd(e){var t=Zd(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Jd(e):De=t,sl.current=null}function Jd(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=rg(i,t,vt),i!==null){De=i;return}}else{if(i=ng(i,t),i!==null){i.flags&=32767,De=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,De=null;return}}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Be===0&&(Be=5)}function $r(e,t,i){var l=je,d=kt.transition;try{kt.transition=null,je=1,dg(e,t,i,l)}finally{kt.transition=d,je=l}return null}function dg(e,t,i,l){do vn();while(gr!==null);if((ge&6)!==0)throw Error(s(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Hm(e,f),e===He&&(De=He=null,Ge=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Li||(Li=!0,eh(Vs,function(){return vn(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=kt.transition,kt.transition=null;var g=je;je=1;var j=ge;ge|=4,sl.current=null,ig(e,i),zd(i,e),Rp(fo),Js=!!ho,fo=ho=null,e.current=i,ag(i),$m(),ge=j,je=g,kt.transition=f}else e.current=i;if(Li&&(Li=!1,gr=e,$i=d),f=e.pendingLanes,f===0&&(pr=null),Um(i.stateNode),ut(e,$e()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],l(d.value,{componentStack:d.stack,digest:d.digest});if(Ii)throw Ii=!1,e=ol,ol=null,e;return($i&1)!==0&&e.tag!==0&&vn(),f=e.pendingLanes,(f&1)!==0?e===ll?js++:(js=0,ll=e):js=0,dr(),null}function vn(){if(gr!==null){var e=Dc($i),t=kt.transition,i=je;try{if(kt.transition=null,je=16>e?16:e,gr===null)var l=!1;else{if(e=gr,gr=null,$i=0,(ge&6)!==0)throw Error(s(331));var d=ge;for(ge|=4,Y=e.current;Y!==null;){var f=Y,g=f.child;if((Y.flags&16)!==0){var j=f.deletions;if(j!==null){for(var S=0;S<j.length;S++){var L=j[S];for(Y=L;Y!==null;){var V=Y;switch(V.tag){case 0:case 11:case 15:xs(8,V,f)}var H=V.child;if(H!==null)H.return=V,Y=H;else for(;Y!==null;){V=Y;var z=V.sibling,J=V.return;if(Ld(V),V===L){Y=null;break}if(z!==null){z.return=J,Y=z;break}Y=J}}}var ee=f.alternate;if(ee!==null){var re=ee.child;if(re!==null){ee.child=null;do{var Me=re.sibling;re.sibling=null,re=Me}while(re!==null)}}Y=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Y=g;else e:for(;Y!==null;){if(f=Y,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:xs(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,Y=A;break e}Y=f.return}}var E=e.current;for(Y=E;Y!==null;){g=Y;var O=g.child;if((g.subtreeFlags&2064)!==0&&O!==null)O.return=g,Y=O;else e:for(g=E;Y!==null;){if(j=Y,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Ri(9,j)}}catch(ne){Le(j,j.return,ne)}if(j===g){Y=null;break e}var W=j.sibling;if(W!==null){W.return=j.return,Y=W;break e}Y=j.return}}if(ge=d,dr(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(qs,e)}catch{}l=!0}return l}finally{je=i,kt.transition=t}}return!1}function Yd(e,t,i){t=mn(i,t),t=pd(e,t,1),e=fr(e,t,1),t=st(),e!==null&&(Wn(e,1,t),ut(e,t))}function Le(e,t,i){if(e.tag===3)Yd(e,e,i);else for(;t!==null;){if(t.tag===3){Yd(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(pr===null||!pr.has(l))){e=mn(i,e),e=gd(t,e,1),t=fr(t,e,1),e=st(),t!==null&&(Wn(t,1,e),ut(t,e));break}}t=t.return}}function hg(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&i,He===e&&(Ge&i)===i&&(Be===4||Be===3&&(Ge&130023424)===Ge&&500>$e()-al?Lr(e,0):il|=i),ut(e,t)}function Xd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ws,Ws<<=1,(Ws&130023424)===0&&(Ws=4194304)));var i=st();e=Gt(e,t),e!==null&&(Wn(e,t,i),ut(e,i))}function fg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Xd(e,i)}function mg(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(t),Xd(e,i)}var Zd;Zd=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)lt=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return lt=!1,tg(e,t,i);lt=(e.flags&131072)!==0}else lt=!1,Re&&(t.flags&1048576)!==0&&Ou(t,mi,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Ti(e,t),e=t.pendingProps;var d=an(t,Ye.current);hn(t,i),d=Mo(null,t,l,e,d,i);var f=Do();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(l)?(f=!0,di(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ao(t),d.updater=Ei,t.stateNode=d,d._reactInternals=t,qo(t,l,e,i),t=Go(null,t,l,!0,f,i)):(t.tag=0,Re&&f&&bo(t),nt(null,t,d,i),t=t.child),t;case 16:l=t.elementType;e:{switch(Ti(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=gg(l),e=At(l,e),d){case 0:t=Ko(null,t,l,e,i);break e;case 1:t=kd(null,t,l,e,i);break e;case 11:t=bd(null,t,l,e,i);break e;case 14:t=wd(null,t,l,At(l.type,e),i);break e}throw Error(s(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:At(l,d),Ko(e,t,l,d,i);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:At(l,d),kd(e,t,l,d,i);case 3:e:{if(Sd(t),e===null)throw Error(s(387));l=t.pendingProps,f=t.memoizedState,d=f.element,Fu(e,t),bi(t,l,null,i);var g=t.memoizedState;if(l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=mn(Error(s(423)),t),t=Ed(e,t,l,i,d);break e}else if(l!==d){d=mn(Error(s(424)),t),t=Ed(e,t,l,i,d);break e}else for(yt=lr(t.stateNode.containerInfo.firstChild),gt=t,Re=!0,Tt=null,i=Uu(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(cn(),l===d){t=Jt(e,t,i);break e}nt(e,t,l,i)}t=t.child}return t;case 5:return qu(t),e===null&&_o(t),l=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,g=d.children,mo(l,d)?g=null:f!==null&&mo(l,f)&&(t.flags|=32),Nd(e,t),nt(e,t,g,i),t.child;case 6:return e===null&&_o(t),null;case 13:return Cd(e,t,i);case 4:return Ro(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=un(t,null,l,i):nt(e,t,l,i),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:At(l,d),bd(e,t,l,d,i);case 7:return nt(e,t,t.pendingProps,i),t.child;case 8:return nt(e,t,t.pendingProps.children,i),t.child;case 12:return nt(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,f=t.memoizedProps,g=d.value,Ne(yi,l._currentValue),l._currentValue=g,f!==null)if(Ct(f.value,g)){if(f.children===d.children&&!at.current){t=Jt(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var j=f.dependencies;if(j!==null){g=f.child;for(var S=j.firstContext;S!==null;){if(S.context===l){if(f.tag===1){S=Qt(-1,i&-i),S.tag=2;var L=f.updateQueue;if(L!==null){L=L.shared;var V=L.pending;V===null?S.next=S:(S.next=V.next,V.next=S),L.pending=S}}f.lanes|=i,S=f.alternate,S!==null&&(S.lanes|=i),Co(f.return,i,t),j.lanes|=i;break}S=S.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=i,j=g.alternate,j!==null&&(j.lanes|=i),Co(g,i,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}nt(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,hn(t,i),d=_t(d),l=l(d),t.flags|=1,nt(e,t,l,i),t.child;case 14:return l=t.type,d=At(l,t.pendingProps),d=At(l.type,d),wd(e,t,l,d,i);case 15:return jd(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:At(l,d),Ti(e,t),t.tag=1,ot(l)?(e=!0,di(t)):e=!1,hn(t,i),fd(t,l,d),qo(t,l,d,i),Go(null,t,l,!0,e,i);case 19:return Ad(e,t,i);case 22:return _d(e,t,i)}throw Error(s(156,t.tag))};function eh(e,t){return Pc(e,t)}function pg(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,i,l){return new pg(e,t,i,l)}function ml(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gg(e){if(typeof e=="function")return ml(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I)return 11;if(e===le)return 14}return 2}function xr(e,t){var i=e.alternate;return i===null?(i=St(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function zi(e,t,i,l,d,f){var g=2;if(l=e,typeof e=="function")ml(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case D:return Mr(i.children,d,f,t);case q:g=8,d|=8;break;case oe:return e=St(12,i,t,d|2),e.elementType=oe,e.lanes=f,e;case K:return e=St(13,i,t,d),e.elementType=K,e.lanes=f,e;case G:return e=St(19,i,t,d),e.elementType=G,e.lanes=f,e;case Ee:return Fi(i,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Se:g=10;break e;case he:g=9;break e;case I:g=11;break e;case le:g=14;break e;case be:g=16,l=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=St(g,i,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function Mr(e,t,i,l){return e=St(7,e,l,t),e.lanes=i,e}function Fi(e,t,i,l){return e=St(22,e,l,t),e.elementType=Ee,e.lanes=i,e.stateNode={isHidden:!1},e}function pl(e,t,i){return e=St(6,e,null,t),e.lanes=i,e}function gl(e,t,i){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yg(e,t,i,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ba(0),this.expirationTimes=Ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function yl(e,t,i,l,d,f,g,j,S){return e=new yg(e,t,i,j,S),t===1?(t=1,f===!0&&(t|=8)):t=0,f=St(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(f),e}function vg(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function th(e){if(!e)return ur;e=e._reactInternals;e:{if(kr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(ot(i))return Tu(e,i,t)}return t}function rh(e,t,i,l,d,f,g,j,S){return e=yl(i,l,!0,e,d,f,g,j,S),e.context=th(null),i=e.current,l=st(),d=yr(i),f=Qt(l,d),f.callback=t??null,fr(i,f,d),e.current.lanes=d,Wn(e,d,l),ut(e,l),e}function Bi(e,t,i,l){var d=t.current,f=st(),g=yr(d);return i=th(i),t.context===null?t.context=i:t.pendingContext=i,t=Qt(f,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=fr(d,t,g),e!==null&&(Pt(e,d,g,f),xi(e,d,g)),g}function Vi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function vl(e,t){nh(e,t),(e=e.alternate)&&nh(e,t)}function xg(){return null}var sh=typeof reportError=="function"?reportError:function(e){console.error(e)};function xl(e){this._internalRoot=e}qi.prototype.render=xl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Bi(e,t,null,null)},qi.prototype.unmount=xl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Bi(null,e,null,null)}),t[qt]=null}};function qi(e){this._internalRoot=e}qi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fc();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ir.length&&t!==0&&t<ir[i].priority;i++);ir.splice(i,0,e),i===0&&qc(e)}};function bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ih(){}function bg(e,t,i,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var L=Vi(g);f.call(L)}}var g=rh(t,l,e,0,null,!1,!1,"",ih);return e._reactRootContainer=g,e[qt]=g.current,as(e.nodeType===8?e.parentNode:e),Ir(),g}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var j=l;l=function(){var L=Vi(S);j.call(L)}}var S=yl(e,0,!1,null,null,!1,!1,"",ih);return e._reactRootContainer=S,e[qt]=S.current,as(e.nodeType===8?e.parentNode:e),Ir(function(){Bi(t,S,i,l)}),S}function Wi(e,t,i,l,d){var f=i._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var j=d;d=function(){var S=Vi(g);j.call(S)}}Bi(t,g,e,d)}else g=bg(i,t,e,d,l);return Vi(g)}Uc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Hn(t.pendingLanes);i!==0&&(Va(t,i|1),ut(t,$e()),(ge&6)===0&&(yn=$e()+500,dr()))}break;case 13:Ir(function(){var l=Gt(e,1);if(l!==null){var d=st();Pt(l,e,1,d)}}),vl(e,1)}},qa=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var i=st();Pt(t,e,134217728,i)}vl(e,134217728)}},zc=function(e){if(e.tag===13){var t=yr(e),i=Gt(e,t);if(i!==null){var l=st();Pt(i,e,t,l)}vl(e,t)}},Fc=function(){return je},Bc=function(e,t){var i=je;try{return je=e,t()}finally{je=i}},$a=function(e,t,i){switch(t){case"input":if(Ca(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var d=ci(l);if(!d)throw Error(s(90));hc(l),Ca(l,d)}}}break;case"textarea":yc(e,i);break;case"select":t=i.value,t!=null&&Kr(e,!!i.multiple,t,!1)}},Sc=dl,Ec=Ir;var wg={usingClientEntryPoint:!1,Events:[cs,nn,ci,Nc,kc,dl]},_s={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jg={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rc(e),e===null?null:e.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||xg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{qs=Ki.inject(jg),Mt=Ki}catch{}}return dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wg,dt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bl(t))throw Error(s(200));return vg(e,t,null,i)},dt.createRoot=function(e,t){if(!bl(e))throw Error(s(299));var i=!1,l="",d=sh;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=yl(e,1,!1,null,null,i,!1,l,d),e[qt]=t.current,as(e.nodeType===8?e.parentNode:e),new xl(t)},dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Rc(t),e=e===null?null:e.stateNode,e},dt.flushSync=function(e){return Ir(e)},dt.hydrate=function(e,t,i){if(!Hi(t))throw Error(s(200));return Wi(null,e,t,!0,i)},dt.hydrateRoot=function(e,t,i){if(!bl(e))throw Error(s(405));var l=i!=null&&i.hydratedSources||null,d=!1,f="",g=sh;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=rh(t,null,e,1,i??null,d,!1,f,g),e[qt]=t.current,as(e),l)for(e=0;e<l.length;e++)i=l[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new qi(t)},dt.render=function(e,t,i){if(!Hi(t))throw Error(s(200));return Wi(null,e,t,!1,i)},dt.unmountComponentAtNode=function(e){if(!Hi(e))throw Error(s(40));return e._reactRootContainer?(Ir(function(){Wi(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1},dt.unstable_batchedUpdates=dl,dt.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!Hi(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Wi(e,t,i,!1,l)},dt.version="18.3.1-next-f1338f8080-20240426",dt}var fh;function Og(){if(fh)return _l.exports;fh=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),_l.exports=Rg(),_l.exports}var mh;function Pg(){if(mh)return Gi;mh=1;var a=Og();return Gi.createRoot=a.createRoot,Gi.hydrateRoot=a.hydrateRoot,Gi}var Ig=Pg(),M=ec(),Xt={},Qi={},$l=function(a,r){return $l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])},$l(a,r)};function ef(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");$l(a,r);function s(){this.constructor=a}a.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}var ua=function(){return ua=Object.assign||function(r){for(var s,o=1,c=arguments.length;o<c;o++){s=arguments[o];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u])}return r},ua.apply(this,arguments)};function Ln(a,r){var s={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.indexOf(o)<0&&(s[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(a);c<o.length;c++)r.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(a,o[c])&&(s[o[c]]=a[o[c]]);return s}function tf(a,r,s,o){var c=arguments.length,u=c<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(a,r,s,o);else for(var p=a.length-1;p>=0;p--)(h=a[p])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u}function rf(a,r){return function(s,o){r(s,o,a)}}function nf(a,r,s,o,c,u){function h(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var p=o.kind,m=p==="getter"?"get":p==="setter"?"set":"value",y=!r&&a?o.static?a:a.prototype:null,v=r||(y?Object.getOwnPropertyDescriptor(y,o.name):{}),b,_=!1,w=s.length-1;w>=0;w--){var x={};for(var k in o)x[k]=k==="access"?{}:o[k];for(var k in o.access)x.access[k]=o.access[k];x.addInitializer=function(P){if(_)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(P||null))};var N=(0,s[w])(p==="accessor"?{get:v.get,set:v.set}:v[m],x);if(p==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(b=h(N.get))&&(v.get=b),(b=h(N.set))&&(v.set=b),(b=h(N.init))&&c.unshift(b)}else(b=h(N))&&(p==="field"?c.unshift(b):v[m]=b)}y&&Object.defineProperty(y,o.name,v),_=!0}function sf(a,r,s){for(var o=arguments.length>2,c=0;c<r.length;c++)s=o?r[c].call(a,s):r[c].call(a);return o?s:void 0}function af(a){return typeof a=="symbol"?a:"".concat(a)}function of(a,r,s){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:s?"".concat(s," ",r):r})}function lf(a,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,r)}function Z(a,r,s,o){function c(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(v){try{y(o.next(v))}catch(b){h(b)}}function m(v){try{y(o.throw(v))}catch(b){h(b)}}function y(v){v.done?u(v.value):c(v.value).then(p,m)}y((o=o.apply(a,r||[])).next())})}function cf(a,r){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(y){return function(v){return m([y,v])}}function m(y){if(o)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(s=0)),s;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,c=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){s.label=y[1];break}if(y[0]===6&&s.label<u[1]){s.label=u[1],u=y;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(y);break}u[2]&&s.ops.pop(),s.trys.pop();continue}y=r.call(a,s)}catch(v){y=[6,v],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var ba=Object.create?(function(a,r,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(r,s);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,c)}):(function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]});function uf(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&ba(r,a,s)}function da(a){var r=typeof Symbol=="function"&&Symbol.iterator,s=r&&a[r],o=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function tc(a,r){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var o=s.call(a),c,u=[],h;try{for(;(r===void 0||r-- >0)&&!(c=o.next()).done;)u.push(c.value)}catch(p){h={error:p}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(h)throw h.error}}return u}function df(){for(var a=[],r=0;r<arguments.length;r++)a=a.concat(tc(arguments[r]));return a}function hf(){for(var a=0,r=0,s=arguments.length;r<s;r++)a+=arguments[r].length;for(var o=Array(a),c=0,r=0;r<s;r++)for(var u=arguments[r],h=0,p=u.length;h<p;h++,c++)o[c]=u[h];return o}function ff(a,r,s){if(s||arguments.length===2)for(var o=0,c=r.length,u;o<c;o++)(u||!(o in r))&&(u||(u=Array.prototype.slice.call(r,0,o)),u[o]=r[o]);return a.concat(u||Array.prototype.slice.call(r))}function An(a){return this instanceof An?(this.v=a,this):new An(a)}function mf(a,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(a,r||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),c[Symbol.asyncIterator]=function(){return this},c;function h(w){return function(x){return Promise.resolve(x).then(w,b)}}function p(w,x){o[w]&&(c[w]=function(k){return new Promise(function(N,P){u.push([w,k,N,P])>1||m(w,k)})},x&&(c[w]=x(c[w])))}function m(w,x){try{y(o[w](x))}catch(k){_(u[0][3],k)}}function y(w){w.value instanceof An?Promise.resolve(w.value.v).then(v,b):_(u[0][2],w)}function v(w){m("next",w)}function b(w){m("throw",w)}function _(w,x){w(x),u.shift(),u.length&&m(u[0][0],u[0][1])}}function pf(a){var r,s;return r={},o("next"),o("throw",function(c){throw c}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(c,u){r[c]=a[c]?function(h){return(s=!s)?{value:An(a[c](h)),done:!1}:u?u(h):h}:u}}function gf(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a[Symbol.asyncIterator],s;return r?r.call(a):(a=typeof da=="function"?da(a):a[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(u){s[u]=a[u]&&function(h){return new Promise(function(p,m){h=a[u](h),c(p,m,h.done,h.value)})}}function c(u,h,p,m){Promise.resolve(m).then(function(y){u({value:y,done:p})},h)}}function yf(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a}var Lg=Object.create?(function(a,r){Object.defineProperty(a,"default",{enumerable:!0,value:r})}):function(a,r){a.default=r},Ml=function(a){return Ml=Object.getOwnPropertyNames||function(r){var s=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[s.length]=o);return s},Ml(a)};function vf(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var s=Ml(a),o=0;o<s.length;o++)s[o]!=="default"&&ba(r,a,s[o]);return Lg(r,a),r}function xf(a){return a&&a.__esModule?a:{default:a}}function bf(a,r,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?a!==r||!o:!r.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(a):o?o.value:r.get(a)}function wf(a,r,s,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?a!==r||!c:!r.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(a,s):c?c.value=s:r.set(a,s),s}function jf(a,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof a=="function"?r===a:a.has(r)}function _f(a,r,s){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o,c;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],s&&(c=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");c&&(o=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),a.stack.push({value:r,dispose:o,async:s})}else s&&a.stack.push({async:!0});return r}var $g=typeof SuppressedError=="function"?SuppressedError:function(a,r,s){var o=new Error(s);return o.name="SuppressedError",o.error=a,o.suppressed=r,o};function Nf(a){function r(u){a.error=a.hasError?new $g(u,a.error,"An error was suppressed during disposal."):u,a.hasError=!0}var s,o=0;function c(){for(;s=a.stack.pop();)try{if(!s.async&&o===1)return o=0,a.stack.push(s),Promise.resolve().then(c);if(s.dispose){var u=s.dispose.call(s.value);if(s.async)return o|=2,Promise.resolve(u).then(c,function(h){return r(h),c()})}else o|=1}catch(h){r(h)}if(o===1)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}return c()}function kf(a,r){return typeof a=="string"&&/^\.\.?\//.test(a)?a.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,o,c,u,h){return o?r?".jsx":".js":c&&(!u||!h)?s:c+u+"."+h.toLowerCase()+"js"}):a}const Mg={__extends:ef,__assign:ua,__rest:Ln,__decorate:tf,__param:rf,__esDecorate:nf,__runInitializers:sf,__propKey:af,__setFunctionName:of,__metadata:lf,__awaiter:Z,__generator:cf,__createBinding:ba,__exportStar:uf,__values:da,__read:tc,__spread:df,__spreadArrays:hf,__spreadArray:ff,__await:An,__asyncGenerator:mf,__asyncDelegator:pf,__asyncValues:gf,__makeTemplateObject:yf,__importStar:vf,__importDefault:xf,__classPrivateFieldGet:bf,__classPrivateFieldSet:wf,__classPrivateFieldIn:jf,__addDisposableResource:_f,__disposeResources:Nf,__rewriteRelativeImportExtension:kf},Dg=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:_f,get __assign(){return ua},__asyncDelegator:pf,__asyncGenerator:mf,__asyncValues:gf,__await:An,__awaiter:Z,__classPrivateFieldGet:bf,__classPrivateFieldIn:jf,__classPrivateFieldSet:wf,__createBinding:ba,__decorate:tf,__disposeResources:Nf,__esDecorate:nf,__exportStar:uf,__extends:ef,__generator:cf,__importDefault:xf,__importStar:vf,__makeTemplateObject:yf,__metadata:lf,__param:rf,__propKey:af,__read:tc,__rest:Ln,__rewriteRelativeImportExtension:kf,__runInitializers:sf,__setFunctionName:of,__spread:df,__spreadArray:ff,__spreadArrays:hf,__values:da,default:Mg},Symbol.toStringTag,{value:"Module"})),Ug=a=>a?(...r)=>a(...r):(...r)=>fetch(...r);let wa=class extends Error{constructor(r,s="FunctionsError",o){super(r),this.name=s,this.context=o}},Sf=class extends wa{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}},Dl=class extends wa{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}},Ul=class extends wa{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}};var ha;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(ha||(ha={}));class zg{constructor(r,{headers:s={},customFetch:o,region:c=ha.Any}={}){this.url=r,this.headers=s,this.region=c,this.fetch=Ug(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Z(this,arguments,void 0,function*(s,o={}){var c;let u,h;try{const{headers:p,method:m,body:y,signal:v,timeout:b}=o;let _={},{region:w}=o;w||(w=this.region);const x=new URL(`${this.url}/${s}`);w&&w!=="any"&&(_["x-region"]=w,x.searchParams.set("forceFunctionRegion",w));let k;y&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",k=y):typeof y=="string"?(_["Content-Type"]="text/plain",k=y):typeof FormData<"u"&&y instanceof FormData?k=y:(_["Content-Type"]="application/json",k=JSON.stringify(y)):k=y;let N=v;b&&(h=new AbortController,u=setTimeout(()=>h.abort(),b),v?(N=h.signal,v.addEventListener("abort",()=>h.abort())):N=h.signal);const P=yield this.fetch(x.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),p),body:k,signal:N}).catch(F=>{throw new Sf(F)}),$=P.headers.get("x-relay-error");if($&&$==="true")throw new Dl(P);if(!P.ok)throw new Ul(P);let C=((c=P.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),R;return C==="application/json"?R=yield P.json():C==="application/octet-stream"||C==="application/pdf"?R=yield P.blob():C==="text/event-stream"?R=P:C==="multipart/form-data"?R=yield P.formData():R=yield P.text(),{data:R,error:null,response:P}}catch(p){return{data:null,error:p,response:p instanceof Ul||p instanceof Dl?p.context:void 0}}finally{u&&clearTimeout(u)}})}}const Fg=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return ha},FunctionsClient:zg,FunctionsError:wa,FunctionsFetchError:Sf,FunctionsHttpError:Ul,FunctionsRelayError:Dl},Symbol.toStringTag,{value:"Module"})),Ef=Ls(Fg);var tt={};const $n=Ls(Dg);var Ji={},Yi={},Xi={},Zi={},ea={},ta={},ph;function Cf(){if(ph)return ta;ph=1,Object.defineProperty(ta,"__esModule",{value:!0});class a extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return ta.default=a,ta}var gh;function Tf(){if(gh)return ea;gh=1,Object.defineProperty(ea,"__esModule",{value:!0});const r=$n.__importDefault(Cf());let s=class{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var y,v,b,_;let w=null,x=null,k=null,N=m.status,P=m.statusText;if(m.ok){if(this.method!=="HEAD"){const F=await m.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?x=F:x=JSON.parse(F))}const C=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),R=(b=m.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");C&&R&&R.length>1&&(k=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(w={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,k=null,N=406,P="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const C=await m.text();try{w=JSON.parse(C),Array.isArray(w)&&m.status===404&&(x=[],w=null,N=200,P="OK")}catch{m.status===404&&C===""?(N=204,P="No Content"):w={message:C}}if(w&&this.isMaybeSingle&&(!((_=w?.details)===null||_===void 0)&&_.includes("0 rows"))&&(w=null,N=200,P="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:x,count:k,status:N,statusText:P}});return this.shouldThrowOnError||(p=p.catch(m=>{var y,v,b,_,w,x;let k="";const N=m?.cause;if(N){const P=(y=N?.message)!==null&&y!==void 0?y:"",$=(v=N?.code)!==null&&v!==void 0?v:"";k=`${(b=m?.name)!==null&&b!==void 0?b:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(_=N?.name)!==null&&_!==void 0?_:"Error"}: ${P}`,$&&(k+=` (${$})`),N?.stack&&(k+=`
${N.stack}`)}else k=(w=m?.stack)!==null&&w!==void 0?w:"";return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(c,u)}returns(){return this}overrideTypes(){return this}};return ea.default=s,ea}var yh;function Af(){if(yh)return Zi;yh=1,Object.defineProperty(Zi,"__esModule",{value:!0});const r=$n.__importDefault(Tf());let s=class extends r.default{select(c){let u=!1;const h=(c??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const y=m?`${m}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,y=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(y,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:y="text"}={}){var v;const b=[c?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),_=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${_}"; options=${b};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}};return Zi.default=s,Zi}var vh;function rc(){if(vh)return Xi;vh=1,Object.defineProperty(Xi,"__esModule",{value:!0});const r=$n.__importDefault(Af()),s=new RegExp("[,()]");let o=class extends r.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}regexMatch(u,h){return this.url.searchParams.append(u,`match.${h}`),this}regexIMatch(u,h){return this.url.searchParams.append(u,`imatch.${h}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}isDistinct(u,h){return this.url.searchParams.append(u,`isdistinct.${h}`),this}in(u,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&s.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:p,type:m}={}){let y="";m==="plain"?y="pl":m==="phrase"?y="ph":m==="websearch"&&(y="w");const v=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${y}fts${v}.${h}`),this}match(u){return Object.entries(u).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(u,h,p){return this.url.searchParams.append(u,`not.${h}.${p}`),this}or(u,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,h,p){return this.url.searchParams.append(u,`${h}.${p}`),this}};return Xi.default=o,Xi}var xh;function Rf(){if(xh)return Yi;xh=1,Object.defineProperty(Yi,"__esModule",{value:!0});const r=$n.__importDefault(rc());let s=class{constructor(c,{headers:u={},schema:h,fetch:p}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(c,u){const{head:h=!1,count:p}=u??{},m=h?"HEAD":"GET";let y=!1;const v=(c??"*").split("").map(b=>/\s/.test(b)&&!y?"":(b==='"'&&(y=!y),b)).join("");return this.url.searchParams.set("select",v),p&&this.headers.append("Prefer",`count=${p}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const y=c.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const b=c.reduce((_,w)=>_.concat(Object.keys(w)),[]);if(b.length>0){const _=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",_.join(","))}}return new r.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(c,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new r.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Yi.default=s,Yi}var bh;function Bg(){if(bh)return Ji;bh=1,Object.defineProperty(Ji,"__esModule",{value:!0});const a=$n,r=a.__importDefault(Rf()),s=a.__importDefault(rc());let o=class Of{constructor(u,{headers:h={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${u}`);return new r.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new Of(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:m=!1,count:y}={}){var v;let b;const _=new URL(`${this.url}/rpc/${u}`);let w;p||m?(b=p?"HEAD":"GET",Object.entries(h).filter(([k,N])=>N!==void 0).map(([k,N])=>[k,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([k,N])=>{_.searchParams.append(k,N)})):(b="POST",w=h);const x=new Headers(this.headers);return y&&x.set("Prefer",`count=${y}`),new s.default({method:b,url:_,headers:x,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}};return Ji.default=o,Ji}var wh;function Pf(){if(wh)return tt;wh=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.PostgrestError=tt.PostgrestBuilder=tt.PostgrestTransformBuilder=tt.PostgrestFilterBuilder=tt.PostgrestQueryBuilder=tt.PostgrestClient=void 0;const a=$n,r=a.__importDefault(Bg());tt.PostgrestClient=r.default;const s=a.__importDefault(Rf());tt.PostgrestQueryBuilder=s.default;const o=a.__importDefault(rc());tt.PostgrestFilterBuilder=o.default;const c=a.__importDefault(Af());tt.PostgrestTransformBuilder=c.default;const u=a.__importDefault(Tf());tt.PostgrestBuilder=u.default;const h=a.__importDefault(Cf());return tt.PostgrestError=h.default,tt.default={PostgrestClient:r.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},tt}class If{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const o=this.getWebSocketConstructor();return new o(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Vg="2.86.2",qg=`realtime-js/${Vg}`,Lf="1.0.0",Hg="2.0.0",jh=Lf,zl=1e4,Wg=1e3,Kg=100;var qr;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(qr||(qr={}));var Ue;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(Ue||(Ue={}));var $t;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})($t||($t={}));var Fl;(function(a){a.websocket="websocket"})(Fl||(Fl={}));var Hr;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Hr||(Hr={}));class Gg{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,o;const c=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(r){var s,o;const c=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,s,o){var c,u;const h=r.topic,p=(c=r.ref)!==null&&c!==void 0?c:"",m=(u=r.join_ref)!==null&&u!==void 0?u:"",y=r.payload.event,v=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+y.length+b.length,w=new ArrayBuffer(this.HEADER_LENGTH+_);let x=new DataView(w),k=0;x.setUint8(k++,this.KINDS.userBroadcastPush),x.setUint8(k++,m.length),x.setUint8(k++,p.length),x.setUint8(k++,h.length),x.setUint8(k++,y.length),x.setUint8(k++,b.length),x.setUint8(k++,s),Array.from(m,P=>x.setUint8(k++,P.charCodeAt(0))),Array.from(p,P=>x.setUint8(k++,P.charCodeAt(0))),Array.from(h,P=>x.setUint8(k++,P.charCodeAt(0))),Array.from(y,P=>x.setUint8(k++,P.charCodeAt(0))),Array.from(b,P=>x.setUint8(k++,P.charCodeAt(0)));var N=new Uint8Array(w.byteLength+o.byteLength);return N.set(new Uint8Array(w),0),N.set(new Uint8Array(o),w.byteLength),N.buffer}decode(r,s){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return s(o)}if(typeof r=="string"){const o=JSON.parse(r),[c,u,h,p,m]=o;return s({join_ref:c,ref:u,topic:h,event:p,payload:m})}return s({})}_binaryDecode(r){const s=new DataView(r),o=s.getUint8(0),c=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,c)}}_decodeUserBroadcast(r,s,o){const c=s.getUint8(1),u=s.getUint8(2),h=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const y=o.decode(r.slice(m,m+c));m=m+c;const v=o.decode(r.slice(m,m+u));m=m+u;const b=o.decode(r.slice(m,m+h));m=m+h;const _=r.slice(m,r.byteLength),w=p===this.JSON_ENCODING?JSON.parse(o.decode(_)):_,x={type:this.BROADCAST_EVENT,event:v,payload:w};return h>0&&(x.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>s.includes(o)))}}class $f{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(ke||(ke={}));const _h=(a,r,s={})=>{var o;const c=(o=s.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((u,h)=>(u[h]=Qg(h,a,r,c),u),{}):{}},Qg=(a,r,s,o)=>{const c=r.find(p=>p.name===a),u=c?.type,h=s[a];return u&&!o.includes(u)?Mf(u,h):Bl(h)},Mf=(a,r)=>{if(a.charAt(0)==="_"){const s=a.slice(1,a.length);return Zg(r,s)}switch(a){case ke.bool:return Jg(r);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Yg(r);case ke.json:case ke.jsonb:return Xg(r);case ke.timestamp:return e0(r);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return Bl(r);default:return Bl(r)}},Bl=a=>a,Jg=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Yg=a=>{if(typeof a=="string"){const r=parseFloat(a);if(!Number.isNaN(r))return r}return a},Xg=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(r){return console.log(`JSON parse error: ${r}`),a}return a},Zg=(a,r)=>{if(typeof a!="string")return a;const s=a.length-1,o=a[s];if(a[0]==="{"&&o==="}"){let u;const h=a.slice(1,s);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>Mf(r,p))}return a},e0=a=>typeof a=="string"?a.replace(" ","T"):a,Df=a=>{const r=new URL(a);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Sl{constructor(r,s,o={},c=zl){this.channel=r,this.event=s,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var o;return this._hasReceived(r)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Vl;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Vl||(Vl={}));let Uf=class sa{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sa.syncState(this.state,c,u,h),this.pendingDiffs.forEach(m=>{this.state=sa.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=sa.syncDiff(this.state,c,u,h),p())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,o,c){const u=this.cloneDeep(r),h=this.transformState(s),p={},m={};return this.map(u,(y,v)=>{h[y]||(m[y]=v)}),this.map(h,(y,v)=>{const b=u[y];if(b){const _=v.map(N=>N.presence_ref),w=b.map(N=>N.presence_ref),x=v.filter(N=>w.indexOf(N.presence_ref)<0),k=b.filter(N=>_.indexOf(N.presence_ref)<0);x.length>0&&(p[y]=x),k.length>0&&(m[y]=k)}else p[y]=v}),this.syncDiff(u,{joins:p,leaves:m},o,c)}static syncDiff(r,s,o,c){const{joins:u,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(u,(p,m)=>{var y;const v=(y=r[p])!==null&&y!==void 0?y:[];if(r[p]=this.cloneDeep(m),v.length>0){const b=r[p].map(w=>w.presence_ref),_=v.filter(w=>b.indexOf(w.presence_ref)<0);r[p].unshift(..._)}o(p,v,m)}),this.map(h,(p,m)=>{let y=r[p];if(!y)return;const v=m.map(b=>b.presence_ref);y=y.filter(b=>v.indexOf(b.presence_ref)<0),r[p]=y,c(p,y,m),y.length===0&&delete r[p]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(o=>s(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,o)=>{const c=r[o];return"metas"in c?s[o]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[o]=c,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ql;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(ql||(ql={}));var Cn;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Cn||(Cn={}));var Bt;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(Bt||(Bt={}));const t0=Ue;let zf=class Ff{constructor(r,s={config:{}},o){var c,u;if(this.topic=r,this.params=s,this.socket=o,this.bindings={},this.state=Ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Sl(this,$t.join,this.params,this.timeout),this.rejoinTimer=new $f(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ue.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new Uf(this),this.broadcastEndpointURL=Df(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var o,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ue.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,y=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(w=>w.filter))!==null&&c!==void 0?c:[],v=!!this.bindings[Cn.PRESENCE]&&this.bindings[Cn.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,b={},_={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>r?.(Bt.CHANNEL_ERROR,w)),this._onClose(()=>r?.(Bt.CLOSED)),this.updateJoinPayload(Object.assign({config:_},b)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:w})=>{var x;if(this.socket.setAuth(),w===void 0){r?.(Bt.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,N=(x=k?.length)!==null&&x!==void 0?x:0,P=[];for(let $=0;$<N;$++){const C=k[$],{filter:{event:R,schema:F,table:U,filter:D}}=C,q=w&&w[$];if(q&&q.event===R&&q.schema===F&&q.table===U&&q.filter===D)P.push(Object.assign(Object.assign({},C),{id:q.id}));else{this.unsubscribe(),this.state=Ue.errored,r?.(Bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,r&&r(Bt.SUBSCRIBED);return}}).receive("error",w=>{this.state=Ue.errored,r?.(Bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{r?.(Bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,o){return this.state===Ue.joined&&r===Cn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,s,o)}async httpSend(r,s,o={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const y=await p.json();m=y.error||y.message||m}catch{}return Promise.reject(new Error(m))}async send(r,s={}){var o,c;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=y.body)===null||c===void 0?void 0:c.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,m;const y=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ue.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new Sl(this,$t.leave,{},r),o.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ue.closed,this.bindings={}}async _fetchWithTimeout(r,s,o){const c=new AbortController,u=setTimeout(()=>c.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(u),h}_push(r,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Sl(this,r,s,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Kg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,o){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,o){var c,u;const h=r.toLocaleLowerCase(),{close:p,error:m,leave:y,join:v}=$t;if(o&&[p,m,y,v].indexOf(h)>=0&&o!==this._joinRef())return;let _=this._onMessage(h,s,o);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(w=>{var x,k,N;return((x=w.filter)===null||x===void 0?void 0:x.event)==="*"||((N=(k=w.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===h}).map(w=>w.callback(_,o)):(u=this.bindings[h])===null||u===void 0||u.filter(w=>{var x,k,N,P,$,C;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const R=w.id,F=(x=w.filter)===null||x===void 0?void 0:x.event;return R&&((k=s.ids)===null||k===void 0?void 0:k.includes(R))&&(F==="*"||F?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const R=($=(P=w?.filter)===null||P===void 0?void 0:P.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return R==="*"||R===((C=s?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof _=="object"&&"ids"in _){const x=_.data,{schema:k,table:N,commit_timestamp:P,type:$,errors:C}=x;_=Object.assign(Object.assign({},{schema:k,table:N,commit_timestamp:P,eventType:$,new:{},old:{},errors:C}),this._getPayloadRecords(x))}w.callback(_,o)})}_isClosed(){return this.state===Ue.closed}_isJoined(){return this.state===Ue.joined}_isJoining(){return this.state===Ue.joining}_isLeaving(){return this.state===Ue.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,o){const c=r.toLocaleLowerCase(),u={type:c,filter:s,callback:o};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(r,s){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Ff.isEqual(c.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const o in r)if(r[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on($t.close,{},r)}_onError(r){this._on($t.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ue.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=_h(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=_h(r.columns,r.old_record)),s}};const El=()=>{},ra={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},r0=[1e3,2e3,5e3,1e4],n0=1e4,s0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let i0=class{constructor(r,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zl,this.transport=null,this.heartbeatIntervalMs=ra.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=El,this.ref=0,this.reconnectTimer=null,this.vsn=jh,this.logger=El,this.conn=null,this.sendBuffer=[],this.serializer=new Gg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Fl.websocket}`,this.httpEndpoint=Df(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=If.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,o){this.logger(r,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case qr.connecting:return Hr.Connecting;case qr.open:return Hr.Open;case qr.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const o=`realtime:${r}`,c=this.getChannels().find(u=>u.topic===o);if(c)return c;{const u=new zf(`realtime:${r}`,s,this);return this.channels.push(u),u}}push(r){const{topic:s,event:o,payload:c,ref:u}=r,h=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${o} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Wg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},ra.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:u,ref:h}=s,p=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${c} ${p}`.trim(),u),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(c,u,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===qr.open||this.conn.readyState===qr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger($t.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const o=r.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${r}${o}${c}`}_workerObjectUrl(r){let s;if(r)s=r;else{const o=new Blob([s0],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s;r?s=r:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const c={access_token:s,version:qg};s&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push($t.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(s)}catch(c){this.log("error",`error in ${r} callback`,c)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new $f(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ra.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,o,c,u,h,p,m,y,v,b,_,w;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:zl,this.heartbeatIntervalMs=(c=r?.heartbeatIntervalMs)!==null&&c!==void 0?c:ra.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:El,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:jh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=r?.reconnectAfterMs)!==null&&y!==void 0?y:(x=>r0[x-1]||n0),this.vsn){case Lf:this.encode=(v=r?.encode)!==null&&v!==void 0?v:((x,k)=>k(JSON.stringify(x))),this.decode=(b=r?.decode)!==null&&b!==void 0?b:((x,k)=>k(JSON.parse(x)));break;case Hg:this.encode=(_=r?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(w=r?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}};const a0=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:t0,get REALTIME_LISTEN_TYPES(){return Cn},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return ql},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Vl},get REALTIME_SUBSCRIBE_STATES(){return Bt},RealtimeChannel:zf,RealtimeClient:i0,RealtimePresence:Uf,WebSocketFactory:If},Symbol.toStringTag,{value:"Module"})),Bf=Ls(a0);class $s extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function Oe(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class Vf extends $s{constructor(r,s,o){super(r),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fa extends $s{constructor(r,s){super(r),this.name="StorageUnknownError",this.originalError=s}}const nc=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),o0=()=>Response,Hl=a=>{if(Array.isArray(a))return a.map(s=>Hl(s));if(typeof a=="function"||a!==Object(a))return a;const r={};return Object.entries(a).forEach(([s,o])=>{const c=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[c]=Hl(o)}),r},l0=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},c0=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a),Cl=a=>{var r;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(r=a.error)===null||r===void 0?void 0:r.message)||JSON.stringify(a)},u0=(a,r,s)=>Z(void 0,void 0,void 0,function*(){const o=yield o0();a instanceof o&&!s?.noResolveJson?a.json().then(c=>{const u=a.status||500,h=c?.statusCode||u+"";r(new Vf(Cl(c),u,h))}).catch(c=>{r(new fa(Cl(c),c))}):r(new fa(Cl(a),a))}),d0=(a,r,s,o)=>{const c={method:a,headers:r?.headers||{}};return a==="GET"||!o?c:(l0(o)?(c.headers=Object.assign({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(o)):c.body=o,r?.duplex&&(c.duplex=r.duplex),Object.assign(Object.assign({},c),s))};function Ms(a,r,s,o,c,u){return Z(this,void 0,void 0,function*(){return new Promise((h,p)=>{a(s,d0(r,o,c,u)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>u0(m,p,o))})})}function As(a,r,s,o){return Z(this,void 0,void 0,function*(){return Ms(a,"GET",r,s,o)})}function Lt(a,r,s,o,c){return Z(this,void 0,void 0,function*(){return Ms(a,"POST",r,o,c,s)})}function Wl(a,r,s,o,c){return Z(this,void 0,void 0,function*(){return Ms(a,"PUT",r,o,c,s)})}function h0(a,r,s,o){return Z(this,void 0,void 0,function*(){return Ms(a,"HEAD",r,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function sc(a,r,s,o,c){return Z(this,void 0,void 0,function*(){return Ms(a,"DELETE",r,o,c,s)})}class f0{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s}then(r,s){return this.execute().then(r,s)}execute(){return Z(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}}var qf;class m0{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s,this[qf]="BlobDownloadBuilder",this.promise=null}asStream(){return new f0(this.downloadFn,this.shouldThrowOnError)}then(r,s){return this.getPromise().then(r,s)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Z(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}}qf=Symbol.toStringTag;const p0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g0{constructor(r,s={},o,c){this.shouldThrowOnError=!1,this.url=r,this.headers=s,this.bucketId=o,this.fetch=nc(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,s,o,c){return Z(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Nh),c);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=o,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),c?.headers&&(p=Object.assign(Object.assign({},p),c.headers));const y=this._removeEmptyFolders(s),v=this._getFinalPath(y),b=yield(r=="PUT"?Wl:Lt)(this.fetch,`${this.url}/object/${v}`,u,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:y,id:b.Id,fullPath:b.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Oe(u))return{data:null,error:u};throw u}})}upload(r,s,o){return Z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,s,o)})}uploadToSignedUrl(r,s,o,c){return Z(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",s);try{let m;const y=Object.assign({upsert:Nh.upsert},c),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",y.cacheControl)):(m=o,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const b=yield Wl(this.fetch,p.toString(),m,{headers:v});return{data:{path:u,fullPath:b.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Oe(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,s){return Z(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const c=Object.assign({},this.headers);s?.upsert&&(c["x-upsert"]="true");const u=yield Lt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:c}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new $s("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Oe(o))return{data:null,error:o};throw o}})}update(r,s,o){return Z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,s,o)})}move(r,s,o){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Oe(c))return{data:null,error:c};throw c}})}copy(r,s,o){return Z(this,void 0,void 0,function*(){try{return{data:{path:(yield Lt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Oe(c))return{data:null,error:c};throw c}})}createSignedUrl(r,s,o){return Z(this,void 0,void 0,function*(){try{let c=this._getFinalPath(r),u=yield Lt(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Oe(c))return{data:null,error:c};throw c}})}createSignedUrls(r,s,o){return Z(this,void 0,void 0,function*(){try{const c=yield Lt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:r},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Oe(c))return{data:null,error:c};throw c}})}download(r,s){const c=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),h=u?`?${u}`:"",p=this._getFinalPath(r),m=()=>As(this.fetch,`${this.url}/${c}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new m0(m,this.shouldThrowOnError)}info(r){return Z(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{const o=yield As(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Hl(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Oe(o))return{data:null,error:o};throw o}})}exists(r){return Z(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{return yield h0(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Oe(o)&&o instanceof fa){const c=o.originalError;if([400,404].includes(c?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,s){const o=this._getFinalPath(r),c=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&c.push(u);const p=typeof s?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(s?.transform||{});m!==""&&c.push(m);let y=c.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${y}`)}}}remove(r){return Z(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}list(r,s,o){return Z(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},p0),s),{prefix:r||""});return{data:yield Lt(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Oe(c))return{data:null,error:c};throw c}})}listV2(r,s){return Z(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield Lt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Oe(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const s=[];return r.width&&s.push(`width=${r.width}`),r.height&&s.push(`height=${r.height}`),r.resize&&s.push(`resize=${r.resize}`),r.format&&s.push(`format=${r.format}`),r.quality&&s.push(`quality=${r.quality}`),s.join("&")}}const Hf="2.86.2",Wf={"X-Client-Info":`storage-js/${Hf}`};class y0{constructor(r,s={},o,c){this.shouldThrowOnError=!1;const u=new URL(r);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wf),s),this.fetch=nc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return Z(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(r);return{data:yield As(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}getBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}createBucket(r){return Z(this,arguments,void 0,function*(s,o={public:!1}){try{return{data:yield Lt(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Oe(c))return{data:null,error:c};throw c}})}updateBucket(r,s){return Z(this,void 0,void 0,function*(){try{return{data:yield Wl(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Oe(o))return{data:null,error:o};throw o}})}emptyBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}deleteBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(r){const s={};return r&&("limit"in r&&(s.limit=String(r.limit)),"offset"in r&&(s.offset=String(r.offset)),r.search&&(s.search=r.search),r.sortColumn&&(s.sortColumn=r.sortColumn),r.sortOrder&&(s.sortOrder=r.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}var Rs=class extends Error{constructor(a,r){super(a),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function v0(a,r,s){const o=new URL(r,a);if(s)for(const[c,u]of Object.entries(s))u!==void 0&&o.searchParams.set(c,u);return o.toString()}async function x0(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function b0(a){const r=a.fetchImpl??globalThis.fetch;return{async request({method:s,path:o,query:c,body:u,headers:h}){const p=v0(a.baseUrl,o,c),m=await x0(a.auth),y=await r(p,{method:s,headers:{...u?{"Content-Type":"application/json"}:{},...m,...h},body:u?JSON.stringify(u):void 0}),v=await y.text(),b=(y.headers.get("content-type")||"").includes("application/json"),_=b&&v?JSON.parse(v):v;if(!y.ok){const w=b?_:void 0,x=w?.error;throw new Rs(x?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:x?.type,icebergCode:x?.code,details:w})}return{status:y.status,headers:y.headers,data:_}}}}function na(a){return a.join("")}var w0=class{constructor(a,r=""){this.client=a,this.prefix=r}async listNamespaces(a){const r=a?{parent:na(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(a,r){const s={namespace:a.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${na(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${na(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${na(a.namespace)}`}),!0}catch(r){if(r instanceof Rs&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(a,r){try{return await this.createNamespace(a,r)}catch(s){if(s instanceof Rs&&s.status===409)return;throw s}}};function xn(a){return a.join("")}var j0=class{constructor(a,r="",s){this.client=a,this.prefix=r,this.accessDelegation=s}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xn(a.namespace)}/tables`})).data.identifiers}async createTable(a,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xn(a.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(a,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xn(a.namespace)}/tables/${a.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(a,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xn(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xn(a.namespace)}/tables/${a.name}`,headers:r})).data.metadata}async tableExists(a){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xn(a.namespace)}/tables/${a.name}`,headers:r}),!0}catch(s){if(s instanceof Rs&&s.status===404)return!1;throw s}}async createTableIfNotExists(a,r){try{return await this.createTable(a,r)}catch(s){if(s instanceof Rs&&s.status===409)return await this.loadTable({namespace:a.namespace,name:r.name});throw s}}},_0=class{constructor(a){let r="v1";a.catalogName&&(r+=`/${a.catalogName}`);const s=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=b0({baseUrl:s,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new w0(this.client,r),this.tableOps=new j0(this.client,r,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,r){return this.namespaceOps.createNamespace(a,r)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,r){return this.tableOps.createTable(a,r)}async updateTable(a,r){return this.tableOps.updateTable(a,r)}async dropTable(a,r){await this.tableOps.dropTable(a,r)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,r){return this.namespaceOps.createNamespaceIfNotExists(a,r)}async createTableIfNotExists(a,r){return this.tableOps.createTableIfNotExists(a,r)}};class Kf{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wf),s),this.fetch=nc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}listBuckets(r){return Z(this,void 0,void 0,function*(){try{const s=new URLSearchParams;r?.limit!==void 0&&s.set("limit",r.limit.toString()),r?.offset!==void 0&&s.set("offset",r.offset.toString()),r?.sortColumn&&s.set("sortColumn",r.sortColumn),r?.sortOrder&&s.set("sortOrder",r.sortOrder),r?.search&&s.set("search",r.search);const o=s.toString(),c=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield As(this.fetch,c,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}deleteBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}from(r){if(!c0(r))throw new $s("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new _0({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>Z(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const ic={"X-Client-Info":`storage-js/${Hf}`,"Content-Type":"application/json"};class ac extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ft(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}class ia extends ac{constructor(r,s,o){super(r),this.name="StorageVectorsApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gf extends ac{constructor(r,s){super(r),this.name="StorageVectorsUnknownError",this.originalError=s}}var Kl;(function(a){a.InternalError="InternalError",a.S3VectorConflictException="S3VectorConflictException",a.S3VectorNotFoundException="S3VectorNotFoundException",a.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",a.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",a.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Kl||(Kl={}));const ja=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),N0=()=>Response,Qf=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},k0=a=>Array.from(new Float32Array(a)),S0=(a,r)=>{if(r!==void 0&&a.float32.length!==r)throw new Error(`Vector dimension mismatch: expected ${r}, got ${a.float32.length}`)},kh=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),E0=(a,r,s)=>Z(void 0,void 0,void 0,function*(){if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!s?.noResolveJson){const c=a.status||500,u=a;if(typeof u.json=="function")u.json().then(h=>{const p=h?.statusCode||h?.code||c+"";r(new ia(kh(h),c,p))}).catch(()=>{const h=c+"",p=u.statusText||`HTTP ${c} error`;r(new ia(p,c,h))});else{const h=c+"",p=u.statusText||`HTTP ${c} error`;r(new ia(p,c,h))}}else r(new Gf(kh(a),a))}),C0=(a,r,s,o)=>{const c={method:a,headers:r?.headers||{}};return o?(Qf(o)?(c.headers=Object.assign({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(o)):c.body=o,Object.assign(Object.assign({},c),s)):c};function T0(a,r,s,o,c,u){return Z(this,void 0,void 0,function*(){return new Promise((h,p)=>{a(s,C0(r,o,c,u)).then(m=>{if(!m.ok)throw m;if(o?.noResolveJson)return m;const y=m.headers.get("content-type");return!y||!y.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>E0(m,p,o))})})}function bt(a,r,s,o,c){return Z(this,void 0,void 0,function*(){return T0(a,"POST",r,o,c,s)})}class Jf{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ic),s),this.fetch=ja(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return Z(this,void 0,void 0,function*(){try{return{data:(yield bt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}getIndex(r,s){return Z(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}})}listIndexes(r){return Z(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}deleteIndex(r,s){return Z(this,void 0,void 0,function*(){try{return{data:(yield bt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}})}}class Yf{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ic),s),this.fetch=ja(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return Z(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield bt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}getVectors(r){return Z(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}listVectors(r){return Z(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield bt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}queryVectors(r){return Z(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}deleteVectors(r){return Z(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield bt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}}class Xf{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ic),s),this.fetch=ja(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:(yield bt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}getBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}listBuckets(){return Z(this,arguments,void 0,function*(r={}){try{return{data:yield bt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}deleteBucket(r){return Z(this,void 0,void 0,function*(){try{return{data:(yield bt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}}class Zf extends Xf{constructor(r,s={}){super(r,s.headers||{},s.fetch)}from(r){return new em(this.url,this.headers,r,this.fetch)}createBucket(r){const s=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Z(this,void 0,void 0,function*(){return s.createBucket.call(this,r)})}getBucket(r){const s=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Z(this,void 0,void 0,function*(){return s.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Z(this,arguments,void 0,function*(s={}){return r.listBuckets.call(this,s)})}deleteBucket(r){const s=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Z(this,void 0,void 0,function*(){return s.deleteBucket.call(this,r)})}}class em extends Jf{constructor(r,s,o,c){super(r,s,c),this.vectorBucketName=o}createIndex(r){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Z(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Z(this,arguments,void 0,function*(s={}){return r.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Z(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Z(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new tm(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class tm extends Yf{constructor(r,s,o,c,u){super(r,s,u),this.vectorBucketName=o,this.indexName=c}putVectors(r){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Z(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Z(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Z(this,arguments,void 0,function*(s={}){return r.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Z(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Z(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class A0 extends y0{constructor(r,s={},o,c){super(r,s,o,c)}from(r){return new g0(this.url,this.headers,r,this.fetch)}get vectors(){return new Zf(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Kf(this.url+"/iceberg",this.headers,this.fetch)}}const R0=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Kf,StorageApiError:Vf,StorageClient:A0,StorageError:$s,StorageUnknownError:fa,StorageVectorsApiError:ia,StorageVectorsClient:Zf,StorageVectorsError:ac,get StorageVectorsErrorCode(){return Kl},StorageVectorsUnknownError:Gf,VectorBucketApi:Xf,VectorBucketScope:em,VectorDataApi:Yf,VectorIndexApi:Jf,VectorIndexScope:tm,isPlainObject:Qf,isStorageError:Oe,isStorageVectorsError:ft,normalizeToFloat32:k0,resolveFetch:ja,resolveResponse:N0,validateVectorDimension:S0},Symbol.toStringTag,{value:"Module"})),O0=Ls(R0);var Tl={},ks={},Sh;function P0(){return Sh||(Sh=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.version=void 0,ks.version="2.86.2"),ks}var Eh;function I0(){return Eh||(Eh=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_REALTIME_OPTIONS=a.DEFAULT_AUTH_OPTIONS=a.DEFAULT_DB_OPTIONS=a.DEFAULT_GLOBAL_OPTIONS=a.DEFAULT_HEADERS=void 0;const r=P0();let s="";typeof Deno<"u"?s="deno":typeof document<"u"?s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?s="react-native":s="node",a.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${s}/${r.version}`},a.DEFAULT_GLOBAL_OPTIONS={headers:a.DEFAULT_HEADERS},a.DEFAULT_DB_OPTIONS={schema:"public"},a.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a.DEFAULT_REALTIME_OPTIONS={}})(Tl)),Tl}var Al={},Ch;function L0(){return Ch||(Ch=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.fetchWithAuth=a.resolveHeadersConstructor=a.resolveFetch=void 0;const r=c=>c?(...u)=>c(...u):(...u)=>fetch(...u);a.resolveFetch=r;const s=()=>Headers;a.resolveHeadersConstructor=s;const o=(c,u,h)=>{const p=(0,a.resolveFetch)(h),m=(0,a.resolveHeadersConstructor)();return async(y,v)=>{var b;const _=(b=await u())!==null&&b!==void 0?b:c;let w=new m(v?.headers);return w.has("apikey")||w.set("apikey",c),w.has("Authorization")||w.set("Authorization",`Bearer ${_}`),p(y,Object.assign(Object.assign({},v),{headers:w}))}};a.fetchWithAuth=o})(Al)),Al}var Zt={},Th;function $0(){if(Th)return Zt;Th=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.isBrowser=void 0,Zt.uuid=a,Zt.ensureTrailingSlash=r,Zt.applySettingDefaults=o,Zt.validateSupabaseUrl=c;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var h=Math.random()*16|0,p=u=="x"?h:h&3|8;return p.toString(16)})}function r(u){return u.endsWith("/")?u:u+"/"}const s=()=>typeof window<"u";Zt.isBrowser=s;function o(u,h){var p,m;const{db:y,auth:v,realtime:b,global:_}=u,{db:w,auth:x,realtime:k,global:N}=h,P={db:Object.assign(Object.assign({},w),y),auth:Object.assign(Object.assign({},x),v),realtime:Object.assign(Object.assign({},k),b),storage:{},global:Object.assign(Object.assign(Object.assign({},N),_),{headers:Object.assign(Object.assign({},(p=N?.headers)!==null&&p!==void 0?p:{}),(m=_?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return u.accessToken?P.accessToken=u.accessToken:delete P.accessToken,P}function c(u){const h=u?.trim();if(!h)throw new Error("supabaseUrl is required.");if(!h.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(r(h))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Zt}var Ss={};const rm="2.86.2",Sn=30*1e3,Gl=3,Rl=Gl*Sn,M0="http://localhost:9999",D0="supabase.auth.token",U0={"X-Client-Info":`gotrue-js/${rm}`},Ql="X-Supabase-Api-Version",nm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},z0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F0=600*1e3;let Rn=class extends Error{constructor(r,s,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}};function se(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}let sm=class extends Rn{constructor(r,s,o){super(r,s,o),this.name="AuthApiError",this.status=s,this.code=o}};function im(a){return se(a)&&a.name==="AuthApiError"}let jr=class extends Rn{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}},tr=class extends Rn{constructor(r,s,o,c){super(r,o,c),this.name=s,this.status=o}},ht=class extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function am(a){return se(a)&&a.name==="AuthSessionMissingError"}let Fr=class extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Cs=class extends tr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}},Ts=class extends tr{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function om(a){return se(a)&&a.name==="AuthImplicitGrantRedirectError"}let Jl=class extends tr{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ma=class extends tr{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}};function aa(a){return se(a)&&a.name==="AuthRetryableFetchError"}let Yl=class extends tr{constructor(r,s,o){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}};function B0(a){return se(a)&&a.name==="AuthWeakPasswordError"}let pa=class extends tr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}};const ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ah=` 	
\r=`.split(""),V0=(()=>{const a=new Array(128);for(let r=0;r<a.length;r+=1)a[r]=-1;for(let r=0;r<Ah.length;r+=1)a[Ah[r].charCodeAt(0)]=-2;for(let r=0;r<ga.length;r+=1)a[ga[r].charCodeAt(0)]=r;return a})();function Rh(a,r,s){if(a!==null)for(r.queue=r.queue<<8|a,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(ga[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(ga[o]),r.queuedBits-=6}}function lm(a,r,s){const o=V0[a];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Oh(a){const r=[],s=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{W0(h,o,s)};for(let h=0;h<a.length;h+=1)lm(a.charCodeAt(h),c,u);return r.join("")}function q0(a,r){if(a<=127){r(a);return}else if(a<=2047){r(192|a>>6),r(128|a&63);return}else if(a<=65535){r(224|a>>12),r(128|a>>6&63),r(128|a&63);return}else if(a<=1114111){r(240|a>>18),r(128|a>>12&63),r(128|a>>6&63),r(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function H0(a,r){for(let s=0;s<a.length;s+=1){let o=a.charCodeAt(s);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(a.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}q0(o,r)}}function W0(a,r,s){if(r.utf8seq===0){if(a<=127){s(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=a&31;else if(r.utf8seq===3)r.codepoint=a&15;else if(r.utf8seq===4)r.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|a&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function Tn(a){const r=[],s={queue:0,queuedBits:0},o=c=>{r.push(c)};for(let c=0;c<a.length;c+=1)lm(a.charCodeAt(c),s,o);return new Uint8Array(r)}function K0(a){const r=[];return H0(a,s=>r.push(s)),new Uint8Array(r)}function Wr(a){const r=[],s={queue:0,queuedBits:0},o=c=>{r.push(c)};return a.forEach(c=>Rh(c,s,o)),Rh(null,s,o),r.join("")}function G0(a){return Math.round(Date.now()/1e3)+a}function Q0(){return Symbol("auth-callback")}const Je=()=>typeof window<"u"&&typeof document<"u",Dr={tested:!1,writable:!1},cm=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dr.tested)return Dr.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Dr.tested=!0,Dr.writable=!0}catch{Dr.tested=!0,Dr.writable=!1}return Dr.writable};function J0(a){const r={},s=new URL(a);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,u)=>{r[u]=c})}catch{}return s.searchParams.forEach((o,c)=>{r[c]=o}),r}const um=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),Y0=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",En=async(a,r,s)=>{await a.setItem(r,JSON.stringify(s))},Ur=async(a,r)=>{const s=await a.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Qe=async(a,r)=>{await a.removeItem(r)};class _a{constructor(){this.promise=new _a.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}_a.promiseConstructor=Promise;function Ol(a){const r=a.split(".");if(r.length!==3)throw new pa("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!z0.test(r[o]))throw new pa("JWT not in base64url format");return{header:JSON.parse(Oh(r[0])),payload:JSON.parse(Oh(r[1])),signature:Tn(r[2]),raw:{header:r[0],payload:r[1]}}}async function X0(a){return await new Promise(r=>{setTimeout(()=>r(null),a)})}function Z0(a,r){return new Promise((o,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await a(u);if(!r(u,null,h)){o(h);return}}catch(h){if(!r(u,h)){c(h);return}}})()})}function ey(a){return("0"+a.toString(16)).substr(-2)}function ty(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let c="";for(let u=0;u<56;u++)c+=s.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(r),Array.from(r,ey).join("")}async function ry(a){const s=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(o);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function ny(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const s=await ry(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bn(a,r,s=!1){const o=ty();let c=o;s&&(c+="/PASSWORD_RECOVERY"),await En(a,`${r}-code-verifier`,c);const u=await ny(o);return[u,o===u?"plain":"s256"]}const sy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iy(a){const r=a.headers.get(Ql);if(!r||!r.match(sy))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function ay(a){if(!a)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(a<=r)throw new Error("JWT has expired")}function oy(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ly=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(a){if(!ly.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pl(){const a={};return new Proxy(a,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cy(a,r){return new Proxy(a,{get:(s,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,o,c)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,o,c)}})}function Ph(a){return JSON.parse(JSON.stringify(a))}const Br=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),uy=[502,503,504];async function Ih(a){var r;if(!Y0(a))throw new ma(Br(a),0);if(uy.includes(a.status))throw new ma(Br(a),a.status);let s;try{s=await a.json()}catch(u){throw new jr(Br(u),u)}let o;const c=iy(a);if(c&&c.getTime()>=nm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new Yl(Br(s),a.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new ht}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Yl(Br(s),a.status,s.weak_password.reasons);throw new sm(Br(s),a.status||500,o)}const dy=(a,r,s,o)=>{const c={method:a,headers:r?.headers||{}};return a==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),s))};async function ce(a,r,s,o){var c;const u=Object.assign({},o?.headers);u[Ql]||(u[Ql]=nm["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(c=o?.query)!==null&&c!==void 0?c:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await hy(a,r,s+p,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function hy(a,r,s,o,c,u){const h=dy(r,o,c,u);let p;try{p=await a(s,Object.assign({},h))}catch(m){throw console.error(m),new ma(Br(m),0)}if(p.ok||await Ih(p),o?.noResolveJson)return p;try{return await p.json()}catch(m){await Ih(m)}}function It(a){var r;let s=null;py(a)&&(s=Object.assign({},a),a.expires_at||(s.expires_at=G0(a.expires_in)));const o=(r=a.user)!==null&&r!==void 0?r:a;return{data:{session:s,user:o},error:null}}function Lh(a){const r=It(a);return!r.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(r.data.weak_password=a.weak_password),r}function _r(a){var r;return{data:{user:(r=a.user)!==null&&r!==void 0?r:a},error:null}}function fy(a){return{data:a,error:null}}function my(a){const{action_link:r,email_otp:s,hashed_token:o,redirect_to:c,verification_type:u}=a,h=Ln(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:s,hashed_token:o,redirect_to:c,verification_type:u},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function $h(a){return a}function py(a){return a.access_token&&a.refresh_token&&a.expires_in}const oa=["global","local","others"];let oc=class{constructor({url:r="",headers:s={},fetch:o}){this.url=r,this.headers=s,this.fetch=um(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=oa[0]){if(oa.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oa.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(se(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,s={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:_r})}catch(o){if(se(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:s}=r,o=Ln(r,["options"]),c=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(c.new_email=o?.newEmail,delete c.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:my,redirectTo:s?.redirectTo})}catch(s){if(se(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:_r})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,o,c,u,h,p,m;try{const y={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:$h});if(v.error)throw v.error;const b=await v.json(),_=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(x=>{const k=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);y[`${N}Page`]=k}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if(se(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){wn(r);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:_r})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){wn(r);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:_r})}catch(o){if(se(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,s=!1){wn(r);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:_r})}catch(o){if(se(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){wn(r.userId);try{const{data:s,error:o}=await ce(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:o}}catch(s){if(se(s))return{data:null,error:s};throw s}}async _deleteFactor(r){wn(r.userId),wn(r.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,o,c,u,h,p,m;try{const y={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:$h});if(v.error)throw v.error;const b=await v.json(),_=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(x=>{const k=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);y[`${N}Page`]=k}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if(se(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(se(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}};function Mh(a={}){return{getItem:r=>a[r]||null,setItem:(r,s)=>{a[r]=s},removeItem:r=>{delete a[r]}}}const Vr={debug:!!(globalThis&&cm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lc extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}let dm=class extends lc{};class gy extends lc{}async function hm(a,r,s){Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,c.name);try{return await s()}finally{Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,c.name)}}else{if(r===0)throw Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new dm(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Vr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}const Dh={};async function yy(a,r,s){var o;const c=(o=Dh[a])!==null&&o!==void 0?o:Promise.resolve(),u=Promise.race([c.catch(()=>null),r>=0?new Promise((h,p)=>{setTimeout(()=>{p(new gy(`Acquring process lock with name "${a}" timed out`))},r)}):null].filter(h=>h)).catch(h=>{if(h&&h.isAcquireTimeout)throw h;return null}).then(async()=>await s());return Dh[a]=u.catch(async h=>{if(h&&h.isAcquireTimeout)return await c,null;throw h}),await u}function vy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fm(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function xy(a){return parseInt(a,16)}function by(a){const r=new TextEncoder().encode(a);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function wy(a){var r;const{chainId:s,domain:o,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:m,resources:y,scheme:v,uri:b,version:_}=a;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((r=a.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const w=fm(a.address),x=v?`${v}://${o}`:o,k=a.statement?`${a.statement}
`:"",N=`${x} wants you to sign in with your Ethereum account:
${w}

${k}`;let P=`URI: ${b}
Version: ${_}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(P+=`
Expiration Time: ${c.toISOString()}`),p&&(P+=`
Not Before: ${p.toISOString()}`),m&&(P+=`
Request ID: ${m}`),y){let $=`
Resources:`;for(const C of y){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);$+=`
- ${C}`}P+=$}return`${N}
${P}`}class ze extends Error{constructor({message:r,code:s,cause:o,name:c}){var u;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=c??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class ya extends ze{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function jy({error:a,options:r}){var s,o,c;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(r.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new ze({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const h=window.location.hostname;if(mm(h)){if(u.rp.id!==h)return new ze({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function _y({error:a,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new ze({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(mm(o)){if(s.rpId!==o)return new ze({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class Ny{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const ky=new Ny;function Sy(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:r,user:s,excludeCredentials:o}=a,c=Ln(a,["challenge","user","excludeCredentials"]),u=Tn(r).buffer,h=Object.assign(Object.assign({},s),{id:Tn(s.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:u,user:h});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const y=o[m];p.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:Tn(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return p}function Ey(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:r,allowCredentials:s}=a,o=Ln(a,["challenge","allowCredentials"]),c=Tn(r).buffer,u=Object.assign(Object.assign({},o),{challenge:c});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];u.allowCredentials[h]=Object.assign(Object.assign({},p),{id:Tn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function Cy(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const s=a;return{id:a.id,rawId:a.id,response:{attestationObject:Wr(new Uint8Array(a.response.attestationObject)),clientDataJSON:Wr(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Ty(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const s=a,o=a.getClientExtensionResults(),c=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Wr(new Uint8Array(c.authenticatorData)),clientDataJSON:Wr(new Uint8Array(c.clientDataJSON)),signature:Wr(new Uint8Array(c.signature)),userHandle:c.userHandle?Wr(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function mm(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function Uh(){var a,r;return!!(Je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function Ay(a){try{const r=await navigator.credentials.create(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ya("Browser returned unexpected credential type",r)}:{data:null,error:new ya("Empty credential response",r)}}catch(r){return{data:null,error:jy({error:r,options:a})}}}async function Ry(a){try{const r=await navigator.credentials.get(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ya("Browser returned unexpected credential type",r)}:{data:null,error:new ya("Empty credential response",r)}}catch(r){return{data:null,error:_y({error:r,options:a})}}}const Oy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Py={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function va(...a){const r=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),s=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of a)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))o[u]=h;else if(s(h))o[u]=h;else if(r(h)){const p=o[u];r(p)?o[u]=va(p,h):o[u]=va(h)}else o[u]=h}return o}function Iy(a,r){return va(Oy,a,r||{})}function Ly(a,r){return va(Py,a,r||{})}class $y{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:o,signal:c},u){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!h)return{data:null,error:p};const m=c??ky.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:y}=h.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(h.webauthn.type){case"create":{const y=Iy(h.webauthn.credential_options.publicKey,u?.create),{data:v,error:b}=await Ay({publicKey:y,signal:m});return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const y=Ly(h.webauthn.credential_options.publicKey,u?.request),{data:v,error:b}=await Ry(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:y,signal:m}));return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(h){return se(h)?{data:null,error:h}:{data:null,error:new jr("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new Rn("rpId is required for WebAuthn authentication")};try{if(!Uh())return{data:null,error:new jr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:o},signal:c},{request:u});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:o,credential_response:m.credential_response}})}catch(h){return se(h)?{data:null,error:h}:{data:null,error:new jr("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new Rn("rpId is required for WebAuthn registration")};try{if(!Uh())return{data:null,error:new jr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===r&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:p};const{data:m,error:y}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:c},{create:u});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:y}}catch(h){return se(h)?{data:null,error:h}:{data:null,error:new jr("Unexpected error in register",h)}}}}vy();const My={url:M0,storageKey:D0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function zh(a,r,s){return await s()}const jn={};let cc=class Xl{get jwks(){var r,s;return(s=(r=jn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){jn[this.storageKey]=Object.assign(Object.assign({},jn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=jn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){jn[this.storageKey]=Object.assign(Object.assign({},jn[this.storageKey]),{cachedAt:r})}constructor(r){var s,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},My),r);if(this.storageKey=u.storageKey,this.instanceID=(s=Xl.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Xl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Je()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new oc({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=um(u.fetch),this.lock=u.lock||zh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:Je()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=hm:this.lock=zh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $y(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:cm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Mh(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${rm}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},o="none";if(Je()&&(s=J0(window.location.href),this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce")),Je()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:u}=await this._getSessionFromURL(s,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),om(u)){const m=(r=u.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return se(s)?this._returnResult({error:s}):this._returnResult({error:new jr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,o,c;try{const u=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=r?.options)===null||c===void 0?void 0:c.captchaToken}},xform:It}),{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(se(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var s,o,c;try{let u;if("email"in r){const{email:v,password:b,options:_}=r;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await bn(this.storage,this.storageKey)),u=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:b,data:(s=_?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:w,code_challenge_method:x},xform:It})}else if("phone"in r){const{phone:v,password:b,options:_}=r;u=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(o=_?.data)!==null&&o!==void 0?o:{},channel:(c=_?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:It})}else throw new Cs("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return await Qe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let s;if("email"in r){const{email:u,password:h,options:p}=r;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Lh})}else if("phone"in r){const{phone:u,password:h,options:p}=r;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Lh})}else throw new Cs("You must provide either an email or phone number and a password");const{data:o,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const u=new Fr;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,o,c,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,o,c,u,h,p,m,y,v,b,_;let w,x;if("message"in r)w=r.message,x=r.signature;else{const{chain:k,wallet:N,statement:P,options:$}=r;let C;if(Je())if(typeof N=="object")C=N;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")C=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=N}const R=new URL((s=$?.url)!==null&&s!==void 0?s:window.location.href),F=await C.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=fm(F[0]);let D=(o=$?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!D){const oe=await C.request({method:"eth_chainId"});D=xy(oe)}const q={domain:R.host,address:U,statement:P,uri:R.href,version:"1",chainId:D,nonce:(c=$?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=$?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=$?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=$?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=$?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=$?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=wy(q),x=await C.request({method:"personal_sign",params:[by(w),U]})}try{const{data:k,error:N}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:x},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=r.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:It});if(N)throw N;if(!k||!k.session||!k.user){const P=new Fr;return this._returnResult({data:{user:null,session:null},error:P})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:N})}catch(k){if(se(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(r){var s,o,c,u,h,p,m,y,v,b,_,w;let x,k;if("message"in r)x=r.message,k=r.signature;else{const{chain:N,wallet:P,statement:$,options:C}=r;let R;if(Je())if(typeof P=="object")R=P;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))R=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=P}const F=new URL((s=C?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in R&&R.signIn){const U=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),$?{statement:$}:null));let D;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")D=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)D=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),k=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${F.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(c=(o=C?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=C?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((h=C?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((p=C?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((m=C?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((y=C?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((b=(v=C?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...C.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const U=await R.signMessage(new TextEncoder().encode(x),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=U}}try{const{data:N,error:P}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Wr(k)},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=r.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:It});if(P)throw P;if(!N||!N.session||!N.user){const $=new Fr;return this._returnResult({data:{user:null,session:null},error:$})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:P})}catch(N){if(se(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(r){const s=await Ur(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(s??"").split("/");try{const{data:u,error:h}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:It});if(await Qe(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const p=new Fr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:s,provider:o,token:c,access_token:u,nonce:h}=r,p=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:It}),{data:m,error:y}=p;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const v=new Fr;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,o,c,u,h;try{if("email"in r){const{email:p,options:m}=r;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await bn(this.storage,this.storageKey));const{error:b}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in r){const{phone:p,options:m}=r,{data:y,error:v}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=m?.data)!==null&&c!==void 0?c:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:v})}throw new Cs("You must provide either an email or phone number.")}catch(p){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var s,o;try{let c,u;"options"in r&&(c=(s=r.options)===null||s===void 0?void 0:s.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:p}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:It});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,y=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(c){if(se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(r){var s,o,c,u,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await bn(this.storage,this.storageKey));const y=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=r?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:fy});return!((u=y.data)===null||u===void 0)&&u.url&&Je()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(p){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)throw o;if(!s)throw new ht;const{error:c}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:o,type:c,options:u}=r,{error:h}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:o,type:c,options:u}=r,{data:h,error:p}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new Cs("You must provide either an email or phone number and a type")}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await Ur(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<Rl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await Ur(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=Pl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=cy(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:_r}):await this._useSession(async s=>{var o,c,u;const{data:h,error:p}=s;if(p)throw p;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:_r})})}catch(s){if(se(s))return am(s)&&(await this._removeSession(),await Qe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async o=>{const{data:c,error:u}=o;if(u)throw u;if(!c.session)throw new ht;const h=c.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await bn(this.storage,this.storageKey));const{data:y,error:v}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:_r});if(v)throw v;return h.user=y.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new ht;const s=Date.now()/1e3;let o=s,c=!0,u=null;const{payload:h}=Ol(r.access_token);if(h.exp&&(o=h.exp,c=o<=s),c){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)throw m;u={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(se(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var o;if(!r){const{data:h,error:p}=s;if(p)throw p;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new ht;const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!Je())throw new Ts("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ts(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Jl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ts("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Jl("No code detected.");const{data:$,error:C}=await this._exchangeCodeForSession(r.code);if(C)throw C;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:p,expires_at:m,token_type:y}=r;if(!u||!p||!h||!y)throw new Ts("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(p);let _=v+b;m&&(_=parseInt(m));const w=_-v;w*1e3<=Sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const x=_-b;v-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,_,v):v-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,_,v);const{data:k,error:N}=await this._getUser(u);if(N)throw N;const P={provider_token:o,provider_refresh_token:c,access_token:u,expires_in:b,expires_at:_,refresh_token:h,token_type:y,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:r.type},error:null})}catch(o){if(se(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await Ur(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:c,error:u}=s;if(u)return this._returnResult({error:u});const h=(o=c.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:p}=await this.admin.signOut(h,r);if(p&&!(im(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await Qe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=Q0(),o={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async s=>{var o,c;try{const{data:{session:u},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,s={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await bn(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:o,error:c}=await this._useSession(async u=>{var h,p,m,y,v;const{data:b,error:_}=u;if(_)throw _;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(c)throw c;return Je()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(se(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var o;try{const{error:c,data:{session:u}}=s;if(c)throw c;const{options:h,provider:p,token:m,access_token:y,nonce:v}=r,b=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:m,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:It}),{data:_,error:w}=b;return w?this._returnResult({data:{user:null,session:null},error:w}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Fr}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:w}))}catch(c){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var o,c;const{data:u,error:h}=s;if(h)throw h;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await Z0(async c=>(c>0&&await X0(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:It})),(c,u)=>{const h=200*Math.pow(2,c);return u&&aa(u)&&Date.now()+h-o<Sn})}catch(o){if(this._debug(s,"error",o),se(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",o),Je()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Ur(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Ur(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await En(this.userStorage,this.storageKey+"-user",h)),c.user=(r=h?.user)!==null&&r!==void 0?r:Pl()}else if(c&&!c.user&&!c.user){const h=await Ur(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await Qe(this.storage,this.storageKey+"-user"),await En(this.storage,this.storageKey,c)):c.user=Pl()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const u=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Rl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${Rl}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),aa(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(c.access_token);!p&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var s,o;if(!r)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new _a;const{data:u,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!u.session)throw new ht;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),se(u)){const h={data:null,error:u};return aa(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(r,s,o=!0){const c=`#_notifyAllSubscribers(${r})`;this._debug(c,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:s});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,s)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Qe(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await En(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const u=Ph(c);await En(this.storage,this.storageKey,u)}else{const c=Ph(s);await En(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Qe(this.storage,this.storageKey),await Qe(this.storage,this.storageKey+"-code-verifier"),await Qe(this.storage,this.storageKey+"-user"),this.userStorage&&await Qe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Je()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Sn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-r)/Sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Sn}ms, refresh threshold is ${Gl} ticks`),c<=Gl&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof lc)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,o){const c=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await bn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(p.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);c.push(u.toString())}return o?.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${c.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var o;const{data:c,error:u}=s;return u?this._returnResult({data:null,error:u}):await ce(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var o,c;const{data:u,error:h}=s;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:y}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(r.factorType==="totp"&&m.type==="totp"&&(!((c=m?.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Cy(r.webauthn.credential_response):Ty(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const h=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Sy(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Ey(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=s?.factors)!==null&&r!==void 0?r:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Ol(o.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const y=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;return c?this._returnResult({data:null,error:c}):o?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ht})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ht});const h=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Je()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ht});const h=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Je()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new ht})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;return c?this._returnResult({data:null,error:c}):o?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ht})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let o=s.keys.find(p=>p.kid===r);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+F0>c)return o;const{data:u,error:h}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,o=u.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,s={}){try{let o=r;if(!o){const{data:w,error:x}=await this.getSession();if(x||!w.session)return this._returnResult({data:null,error:x});o=w.session.access_token}const{header:c,payload:u,signature:h,raw:{header:p,payload:m}}=Ol(o);s?.allowExpired||ay(u.exp);const y=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:w}=await this.getUser(o);if(w)throw w;return{data:{claims:u,header:c,signature:h},error:null}}const v=oy(c.alg),b=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,h,K0(`${p}.${m}`)))throw new pa("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}};cc.nextInstanceID={};const Dy=oc,Uy=cc,zy=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Dy,AuthApiError:sm,AuthClient:Uy,AuthError:Rn,AuthImplicitGrantRedirectError:Ts,AuthInvalidCredentialsError:Cs,AuthInvalidJwtError:pa,AuthInvalidTokenResponseError:Fr,AuthPKCEGrantCodeExchangeError:Jl,AuthRetryableFetchError:ma,AuthSessionMissingError:ht,AuthUnknownError:jr,AuthWeakPasswordError:Yl,CustomAuthError:tr,GoTrueAdminApi:oc,GoTrueClient:cc,NavigatorLockAcquireTimeoutError:dm,SIGN_OUT_SCOPES:oa,isAuthApiError:im,isAuthError:se,isAuthImplicitGrantRedirectError:om,isAuthRetryableFetchError:aa,isAuthSessionMissingError:am,isAuthWeakPasswordError:B0,lockInternals:Vr,navigatorLock:hm,processLock:yy},Symbol.toStringTag,{value:"Module"})),pm=Ls(zy);var Fh;function Fy(){if(Fh)return Ss;Fh=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.SupabaseAuthClient=void 0;const a=pm;let r=class extends a.AuthClient{constructor(o){super(o)}};return Ss.SupabaseAuthClient=r,Ss}var Bh;function Vh(){if(Bh)return Qi;Bh=1,Object.defineProperty(Qi,"__esModule",{value:!0});const a=Ef,r=Pf(),s=Bf,o=O0,c=I0(),u=L0(),h=$0(),p=Fy();class m{constructor(v,b,_){var w,x,k;this.supabaseUrl=v,this.supabaseKey=b;const N=(0,h.validateSupabaseUrl)(v);if(!b)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",N),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",N),this.storageUrl=new URL("storage/v1",N),this.functionsUrl=new URL("functions/v1",N);const P=`sb-${N.hostname.split(".")[0]}-auth-token`,$={db:c.DEFAULT_DB_OPTIONS,realtime:c.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},c.DEFAULT_AUTH_OPTIONS),{storageKey:P}),global:c.DEFAULT_GLOBAL_OPTIONS},C=(0,h.applySettingDefaults)(_??{},$);this.storageKey=(w=C.auth.storageKey)!==null&&w!==void 0?w:"",this.headers=(x=C.global.headers)!==null&&x!==void 0?x:{},C.accessToken?(this.accessToken=C.accessToken,this.auth=new Proxy({},{get:(R,F)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(F)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=C.auth)!==null&&k!==void 0?k:{},this.headers,C.global.fetch),this.fetch=(0,u.fetchWithAuth)(b,this._getAccessToken.bind(this),C.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},C.realtime)),this.accessToken&&this.accessToken().then(R=>this.realtime.setAuth(R)).catch(R=>console.warn("Failed to set initial Realtime auth token:",R)),this.rest=new r.PostgrestClient(new URL("rest/v1",N).href,{headers:this.headers,schema:C.db.schema,fetch:this.fetch}),this.storage=new o.StorageClient(this.storageUrl.href,this.headers,this.fetch,_?.storage),C.accessToken||this._listenForAuthEvents()}get functions(){return new a.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(v){return this.rest.from(v)}schema(v){return this.rest.schema(v)}rpc(v,b={},_={head:!1,get:!1,count:void 0}){return this.rest.rpc(v,b,_)}channel(v,b={config:{}}){return this.realtime.channel(v,b)}getChannels(){return this.realtime.getChannels()}removeChannel(v){return this.realtime.removeChannel(v)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var v,b;if(this.accessToken)return await this.accessToken();const{data:_}=await this.auth.getSession();return(b=(v=_.session)===null||v===void 0?void 0:v.access_token)!==null&&b!==void 0?b:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:v,persistSession:b,detectSessionInUrl:_,storage:w,userStorage:x,storageKey:k,flowType:N,lock:P,debug:$,throwOnError:C},R,F){const U={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new p.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},U),R),storageKey:k,autoRefreshToken:v,persistSession:b,detectSessionInUrl:_,storage:w,userStorage:x,flowType:N,lock:P,debug:$,throwOnError:C,fetch:F,hasCustomAuthorizationHeader:Object.keys(this.headers).some(D=>D.toLowerCase()==="authorization")})}_initRealtimeClient(v){return new s.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},v),{params:Object.assign({apikey:this.supabaseKey},v?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((b,_)=>{this._handleTokenChanged(b,"CLIENT",_?.access_token)})}_handleTokenChanged(v,b,_){(v==="TOKEN_REFRESHED"||v==="SIGNED_IN")&&this.changedAccessToken!==_?(this.changedAccessToken=_,this.realtime.setAuth(_)):v==="SIGNED_OUT"&&(this.realtime.setAuth(),b=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Qi.default=m,Qi}var qh;function By(){return qh||(qh=1,(function(a){var r=Xt&&Xt.__createBinding||(Object.create?(function(v,b,_,w){w===void 0&&(w=_);var x=Object.getOwnPropertyDescriptor(b,_);(!x||("get"in x?!b.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(v,w,x)}):(function(v,b,_,w){w===void 0&&(w=_),v[w]=b[_]})),s=Xt&&Xt.__exportStar||function(v,b){for(var _ in v)_!=="default"&&!Object.prototype.hasOwnProperty.call(b,_)&&r(b,v,_)},o=Xt&&Xt.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0}),a.createClient=a.SupabaseClient=a.FunctionRegion=a.FunctionsError=a.FunctionsRelayError=a.FunctionsFetchError=a.FunctionsHttpError=a.PostgrestError=void 0;const c=o(Vh());s(pm,a);var u=Pf();Object.defineProperty(a,"PostgrestError",{enumerable:!0,get:function(){return u.PostgrestError}});var h=Ef;Object.defineProperty(a,"FunctionsHttpError",{enumerable:!0,get:function(){return h.FunctionsHttpError}}),Object.defineProperty(a,"FunctionsFetchError",{enumerable:!0,get:function(){return h.FunctionsFetchError}}),Object.defineProperty(a,"FunctionsRelayError",{enumerable:!0,get:function(){return h.FunctionsRelayError}}),Object.defineProperty(a,"FunctionsError",{enumerable:!0,get:function(){return h.FunctionsError}}),Object.defineProperty(a,"FunctionRegion",{enumerable:!0,get:function(){return h.FunctionRegion}}),s(Bf,a);var p=Vh();Object.defineProperty(a,"SupabaseClient",{enumerable:!0,get:function(){return o(p).default}});const m=(v,b,_)=>new c.default(v,b,_);a.createClient=m;function y(){if(typeof window<"u"||typeof process>"u")return!1;const v=process.version;if(v==null)return!1;const b=v.match(/^v(\d+)\./);return b?parseInt(b[1],10)<=18:!1}y()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Xt)),Xt}var gm=By();const ym=kg(gm),Vy=Ng({__proto__:null,default:ym},[gm]),{PostgrestError:Nb,FunctionsHttpError:kb,FunctionsFetchError:Sb,FunctionsRelayError:Eb,FunctionsError:Cb,FunctionRegion:Tb,SupabaseClient:Ab,createClient:qy,GoTrueAdminApi:Rb,GoTrueClient:Ob,AuthAdminApi:Pb,AuthClient:Ib,navigatorLock:Lb,NavigatorLockAcquireTimeoutError:$b,lockInternals:Mb,processLock:Db,SIGN_OUT_SCOPES:Ub,AuthError:zb,AuthApiError:Fb,AuthUnknownError:Bb,CustomAuthError:Vb,AuthSessionMissingError:qb,AuthInvalidTokenResponseError:Hb,AuthInvalidCredentialsError:Wb,AuthImplicitGrantRedirectError:Kb,AuthPKCEGrantCodeExchangeError:Gb,AuthRetryableFetchError:Qb,AuthWeakPasswordError:Jb,AuthInvalidJwtError:Yb,isAuthError:Xb,isAuthApiError:Zb,isAuthSessionMissingError:ew,isAuthImplicitGrantRedirectError:tw,isAuthRetryableFetchError:rw,isAuthWeakPasswordError:nw,RealtimePresence:sw,RealtimeChannel:iw,RealtimeClient:aw,REALTIME_LISTEN_TYPES:ow,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:lw,REALTIME_PRESENCE_LISTEN_EVENTS:cw,REALTIME_SUBSCRIBE_STATES:uw,REALTIME_CHANNEL_STATES:dw}=ym||Vy,Ve="fplllwtoltjhtkvtstzj",vm="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZwbGxsd3RvbHRqaHRrdnRzdHpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxMTk0MDcsImV4cCI6MjA3OTY5NTQwN30.D2IGL1JRgOT87WClE5Y3M4ITkWJ9HSTCU5ZBU0VeL1U",Nr=qy(`https://${Ve}.supabase.co`,vm,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0}});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wy=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,s,o)=>o?o.toUpperCase():s.toLowerCase()),Hh=a=>{const r=Wy(a);return r.charAt(0).toUpperCase()+r.slice(1)},xm=(...a)=>a.filter((r,s,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ky={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=M.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:h,...p},m)=>M.createElement("svg",{ref:m,...Ky,width:r,height:r,stroke:a,strokeWidth:o?Number(s)*24/Number(r):s,className:xm("lucide",c),...p},[...h.map(([y,v])=>M.createElement(y,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(a,r)=>{const s=M.forwardRef(({className:o,...c},u)=>M.createElement(Gy,{ref:u,iconNode:r,className:xm(`lucide-${Hy(Hh(a))}`,`lucide-${a}`,o),...c}));return s.displayName=Hh(a),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],bm=te("activity",Qy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Yy=te("align-center",Jy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Zy=te("align-left",Xy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],tv=te("align-right",ev);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mn=te("arrow-left",rv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],la=te("arrow-right",nv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],iv=te("award",sv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ov=te("bold",av);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],On=te("book-open",lv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],uv=te("boxes",cv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],wm=te("brain",dv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],jm=te("building-2",hv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mv=te("calendar",fv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],uc=te("chart-column",pv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ca=te("check",gv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dc=te("chevron-right",yv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xv=te("circle-alert",vv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rt=te("circle-check",bv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Os=te("circle-x",wv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],_v=te("clock",jv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kv=te("compass",Nv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ev=te("database",Sv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tv=te("eye",Cv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],Il=te("factory",Av);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],Ov=te("file-search",Rv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vt=te("file-text",Pv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Lv=te("funnel",Iv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Wh=te("globe",$v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Dn=te("graduation-cap",Mv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Uv=te("heading-2",Dv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Fv=te("image",zv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Vv=te("italic",Bv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_m=te("layers",qv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Wv=te("leaf",Hv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Gv=te("lightbulb",Kv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Nm=te("link",Qv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],Yv=te("list-ordered",Jv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Zv=te("list",Xv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],tx=te("log-out",ex);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zl=te("map-pin",rx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],km=te("map",nx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Es=te("package",sx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M14.531 12.469 6.619 20.38a1 1 0 1 1-3-3l7.912-7.912",key:"we99rg"}],["path",{d:"M15.686 4.314A12.5 12.5 0 0 0 5.461 2.958 1 1 0 0 0 5.58 4.71a22 22 0 0 1 6.318 3.393",key:"1w6hck"}],["path",{d:"M17.7 3.7a1 1 0 0 0-1.4 0l-4.6 4.6a1 1 0 0 0 0 1.4l2.6 2.6a1 1 0 0 0 1.4 0l4.6-4.6a1 1 0 0 0 0-1.4z",key:"15hgfx"}],["path",{d:"M19.686 8.314a12.501 12.501 0 0 1 1.356 10.225 1 1 0 0 1-1.751-.119 22 22 0 0 0-3.393-6.319",key:"452b4h"}]],ax=te("pickaxe",ix);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],lx=te("play",ox);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ps=te("plus",cx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Is=te("refresh-cw",ux);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hx=te("save",dx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Na=te("search",fx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],px=te("settings",mx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sm=te("shield",gx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vx=te("sparkles",yx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bx=te("square-pen",xx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Kh=te("star",wx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Pn=te("target",jx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xa=te("trash-2",_x);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ka=te("trending-up",Nx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],In=te("triangle-alert",kx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Ex=te("underline",Sx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Gh=te("upload",Cx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Em=te("user",Tx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Rx=te("users",Ax);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qh=te("x",Ox);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Sa=te("zap",Px);function Ll({onAuthSuccess:a}){const[r,s]=M.useState(!0),[o,c]=M.useState(""),[u,h]=M.useState(""),[p,m]=M.useState(""),[y,v]=M.useState("student"),[b,_]=M.useState(""),[w,x]=M.useState(!1),k=async P=>{P.preventDefault(),_(""),x(!0);try{const $=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${vm}`},body:JSON.stringify({email:o,password:u,name:p,role:y})}),C=await $.json();if(!$.ok){_(C.error||"Failed to create account"),x(!1);return}const{data:R,error:F}=await Nr.auth.signInWithPassword({email:o,password:u});if(F){_(F.message),x(!1);return}R.session&&a(R.session.access_token,p)}catch($){console.error("Signup error:",$),_("An unexpected error occurred"),x(!1)}},N=async P=>{P.preventDefault(),_(""),x(!0);try{console.log("Attempting login...");const{data:$,error:C}=await Nr.auth.signInWithPassword({email:o,password:u});if(C){console.error("Login error:",C),_(C.message),x(!1);return}if($.session){console.log("Login successful, session created:",{userId:$.user.id,hasAccessToken:!!$.session.access_token});const R=$.user.user_metadata?.name||"User";a($.session.access_token,R)}else console.error("Login succeeded but no session was created"),_("Failed to create session"),x(!1)}catch($){console.error("Login exception:",$),_("An unexpected error occurred"),x(!1)}};return n.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center p-6",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[n.jsx(Dn,{className:"w-12 h-12 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-3xl text-[var(--color-primary-dark)]",children:"EduLearn"})]}),n.jsx("p",{className:"text-[var(--color-text-secondary)]",children:"Create and share interactive lessons"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-[var(--color-border)]",children:[n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsx("button",{onClick:()=>s(!0),className:`flex-1 py-2 px-4 rounded-lg transition-colors ${r?"bg-[var(--color-primary)] text-white":"bg-gray-100 text-[var(--color-text-secondary)] hover:bg-gray-200"}`,children:"Log In"}),n.jsx("button",{onClick:()=>s(!1),className:`flex-1 py-2 px-4 rounded-lg transition-colors ${r?"bg-gray-100 text-[var(--color-text-secondary)] hover:bg-gray-200":"bg-[var(--color-primary)] text-white"}`,children:"Sign Up"})]}),n.jsxs("form",{onSubmit:r?N:k,children:[!r&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Name"}),n.jsx("input",{type:"text",value:p,onChange:P=>m(P.target.value),className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Account Type"}),n.jsxs("select",{value:y,onChange:P=>v(P.target.value),className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] bg-white",children:[n.jsx("option",{value:"student",children:"Student - Browse and learn from lessons"}),n.jsx("option",{value:"creator",children:"Creator - Create, edit, and manage lessons"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Email"}),n.jsx("input",{type:"email",value:o,onChange:P=>c(P.target.value),className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Password"}),n.jsx("input",{type:"password",value:u,onChange:P=>h(P.target.value),className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0,minLength:6})]}),b&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:b}),n.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Loading...":r?"Log In":"Sign Up"})]})]})]})})}function Ix({accessToken:a,userName:r,userRole:s,onLogout:o,onCreateLesson:c,onEditLesson:u,onViewLesson:h,onBrowseLessons:p,onViewResponses:m,onViewModule:y}){const[v,b]=M.useState([]),[_,w]=M.useState(!0),[x,k]=M.useState(null),[N,P]=M.useState(!1),[$,C]=M.useState(null),F=[{name:"Responsible Sourcing",description:"Ethical labor, transparency, environmental management, and business rationale",color:"from-blue-600 to-blue-700",icon:"",lessonCount:0},{name:"General Solutions",description:"OECD guidance, Comply Chain, auditing, codes of conduct, training, and ESG reporting",color:"from-purple-600 to-purple-700",icon:"",lessonCount:0},{name:"Emerging Technology & AI Integration",description:"Data analytics, optimization, predictive monitoring, and AI tools for supply chain management",color:"from-emerald-600 to-emerald-700",icon:"",lessonCount:0},{name:"Personalized Modules & Report Updates",description:"Custom modules and reporting updates tailored to your organization",color:"from-amber-600 to-amber-700",icon:"",lessonCount:0}].map(I=>({...I,lessonCount:v.filter(K=>K.category===I.name).length}));M.useEffect(()=>{(async()=>{console.log("[Dashboard] Starting initialization for role:",s),await U(),console.log("[Dashboard] Curriculum init complete, now fetching lessons..."),await q(),console.log("[Dashboard] Initialization complete")})()},[]);const U=async()=>{try{const I=await D();if(!I){console.error("[Dashboard] No token available for curriculum init");return}console.log("[Dashboard] Initializing curriculum for role:",s);const K=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/init-curriculum`,{method:"POST",headers:{Authorization:`Bearer ${I}`}});if(K.ok){const G=await K.json();console.log("[Dashboard] Curriculum init response:",G),G.expectedLessonCount&&C(G.expectedLessonCount),G.skipped?console.log("[Dashboard]  Curriculum already initialized"):console.log(`[Dashboard]  Initialized ${G.lessonCount} curriculum lessons`)}else{const G=await K.text();console.error("[Dashboard] Failed to initialize curriculum:",K.status,G)}}catch(I){console.error("[Dashboard] Error initializing curriculum:",I)}},D=async()=>{try{const{data:{session:I}}=await Nr.auth.getSession();return I?(console.log("Got fresh token from session"),I.access_token):a?(console.log("Using accessToken from props as fallback"),a):(console.error("No session found and no accessToken prop available"),null)}catch(I){return console.error("Error getting fresh token:",I),a?(console.log("Exception occurred, using accessToken from props"),a):null}},q=async()=>{try{const I=await D();if(!I){console.error("Failed to get fresh token"),w(!1);return}console.log("Fetching lessons with token...");const K=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons`,{headers:{Authorization:`Bearer ${I}`}});console.log("Response status:",K.status),console.log("Response headers:",K.headers.get("content-type"));const G=K.headers.get("content-type");if(!G||!G.includes("application/json")){const be=await K.text();console.error("Server returned non-JSON response (first 500 chars):",be.substring(0,500)),console.log("Checking server health...");try{const Q=await(await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/health`)).json();console.log("Health check response:",Q),console.error("Server is running but /lessons endpoint returned HTML. This may be a Supabase Edge Function deployment issue.")}catch(Ee){console.error("Health check failed. Server may not be deployed or running:",Ee),console.error("SOLUTION: The Edge Function server needs to be deployed. This is handled automatically by Figma Make.")}b([]),w(!1);return}const le=await K.json();K.ok?(console.log("Successfully loaded lessons:",le.lessons?.length||0),b(le.lessons||[])):(console.error("Failed to fetch lessons:",le.error),K.status===401&&console.error("Authorization error - token may be expired. Please log out and log back in."))}catch(I){console.error("Error fetching lessons:",I),b([])}finally{w(!1)}},oe=async I=>{try{(await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok?(b(v.filter(G=>G.id!==I)),k(null)):console.error("Failed to delete lesson")}catch(K){console.error("Error deleting lesson:",K)}},Se=I=>new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),he=async()=>{P(!0);try{const I=await D();if(!I){console.error("[LoadCurriculum] No token available"),P(!1);return}console.log("[LoadCurriculum] Loading curriculum with force flag...");const K=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/init-curriculum?force=true`,{method:"POST",headers:{Authorization:`Bearer ${I}`}});if(K.ok){const G=await K.json();console.log("[LoadCurriculum] Success:",G),G.expectedLessonCount&&C(G.expectedLessonCount),alert(`Successfully loaded ${G.lessonCount} curriculum lessons!`),await q()}else{const G=await K.text();console.error("[LoadCurriculum] Failed:",K.status,G),alert("Failed to load curriculum. Please check console for details.")}}catch(I){console.error("[LoadCurriculum] Error:",I),alert("Error loading curriculum. Please check console for details.")}finally{P(!1)}};return n.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[n.jsx("header",{className:"bg-[var(--color-surface)] border-b border-[var(--color-border)] sticky top-0 z-10 shadow-sm",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dn,{className:"w-8 h-8 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-xl text-[var(--color-primary-dark)]",children:"EduLearn"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-[var(--color-text-secondary)]",children:["Welcome, ",r]}),n.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 text-[var(--color-text-secondary)] hover:text-[var(--color-primary)] transition-colors",children:[n.jsx(tx,{className:"w-4 h-4"}),"Log Out"]})]})]})}),n.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-12",children:[v.length>0&&$!==null&&v.length<$&&n.jsx("div",{className:"mb-8 bg-gradient-to-r from-emerald-600 to-green-600 rounded-2xl p-6 text-white shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white mb-2",children:" New Content Available!"}),n.jsxs("p",{className:"text-green-100 m-0",children:["We've added new interactive activities to the curriculum. Reload to get ",$-v.length," new lesson",$-v.length!==1?"s":"","!"]})]}),n.jsxs("button",{onClick:he,disabled:N,className:"flex items-center gap-2 px-6 py-3 bg-white text-emerald-700 hover:bg-green-50 rounded-lg transition-colors font-['Outfit'] disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:[n.jsx(Gh,{className:"w-5 h-5"}),N?"Loading...":"Reload Curriculum"]})]})}),n.jsx("div",{className:"mb-8 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-white mb-2",children:"Explore the Library"}),n.jsx("p",{className:"text-purple-100 m-0",children:"Browse lessons created by educators from around the world"})]}),n.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-6 py-3 bg-white text-purple-700 hover:bg-purple-50 rounded-lg transition-colors font-['Outfit']",children:[n.jsx(Na,{className:"w-5 h-5"}),"Browse All Lessons"]})]})}),s==="creator"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{children:"My Lessons"}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-lg",children:"Create, edit, and manage your interactive lessons"})]}),n.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors",children:[n.jsx(Ps,{className:"w-5 h-5"}),"Create New Lesson"]})]}),_?n.jsx("div",{className:"text-center py-12 text-[var(--color-text-secondary)]",children:"Loading lessons..."}):v.length===0?n.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-[var(--color-border)] mb-16",children:[n.jsx(On,{className:"w-16 h-16 text-[var(--color-text-secondary)] mx-auto mb-4"}),n.jsx("h3",{className:"mb-2",children:"No lessons found"}),n.jsxs("p",{className:"text-[var(--color-text-secondary)] mb-6",children:["Load the built-in curriculum",$?` (${$} lessons)`:""," or create your own"]}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsxs("button",{onClick:he,disabled:N,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Gh,{className:"w-5 h-5"}),N?"Loading...":"Load Curriculum (15 Lessons)"]}),n.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors",children:[n.jsx(Ps,{className:"w-5 h-5"}),"Create Custom Lesson"]})]})]}):n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:v.map(I=>n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-[var(--color-border)] overflow-hidden hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"inline-block px-3 py-1 bg-blue-100 text-[var(--color-primary)] rounded-full text-sm mb-3",children:I.category}),n.jsx("h3",{className:"mb-2 line-clamp-2",children:I.title}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-sm mb-4 line-clamp-2",children:I.subtitle}),n.jsxs("div",{className:"text-xs text-[var(--color-text-secondary)] mb-4",children:["Updated ",Se(I.updatedAt)]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>h(I.id),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm",children:"View"}),n.jsx("button",{onClick:()=>m(I.id),className:"px-4 py-2 bg-green-600 text-white hover:bg-green-700 rounded-lg transition-colors",title:"View Student Responses",children:n.jsx(Vt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>u(I.id),className:"px-4 py-2 bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] rounded-lg transition-colors",children:n.jsx(bx,{className:"w-4 h-4"})}),x===I.id?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>oe(I.id),className:"px-3 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors text-sm",children:"Confirm"}),n.jsx("button",{onClick:()=>k(null),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors text-sm",children:"Cancel"})]}):n.jsx("button",{onClick:()=>k(I.id),className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(xa,{className:"w-4 h-4"})})]})]})},I.id))})]}),s==="student"&&v.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{children:"My Saved Lessons"}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-lg",children:"Lessons you've added from the library"})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:v.map(I=>n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-[var(--color-border)] overflow-hidden hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"inline-block px-3 py-1 bg-blue-100 text-[var(--color-primary)] rounded-full text-sm mb-3",children:I.category}),n.jsx("h3",{className:"mb-2 line-clamp-2",children:I.title}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-sm mb-4 line-clamp-2",children:I.subtitle}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>h(I.id),className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] rounded-lg transition-colors",children:"Start Learning"}),x===I.id?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>oe(I.id),className:"px-3 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors text-sm",title:"Confirm Delete",children:"Confirm"}),n.jsx("button",{onClick:()=>k(null),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors text-sm",children:"Cancel"})]}):n.jsx("button",{onClick:()=>k(I.id),className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove from My Lessons",children:n.jsx(xa,{className:"w-4 h-4"})})]})]})},I.id))})]}),n.jsxs("div",{className:"mt-16",children:[n.jsx("h2",{className:"mb-6",children:"Curriculum Modules"}),n.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:F.map(I=>n.jsxs("button",{onClick:()=>y(I.name),className:`bg-gradient-to-br ${I.color} rounded-2xl p-8 text-white text-left hover:shadow-xl transition-all transform hover:scale-105`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"text-5xl",children:I.icon}),n.jsxs("div",{className:"bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-sm",children:[I.lessonCount," ",I.lessonCount===1?"lesson":"lessons"]})]}),n.jsx("h3",{className:"text-white mb-3",children:I.name}),n.jsx("p",{className:"text-white/90 text-sm mb-6",children:I.description}),n.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[n.jsx("span",{children:"Explore Module"}),n.jsx(dc,{className:"w-5 h-5"})]})]},I.name))})]})]})]})}function _n({value:a,onChange:r,placeholder:s="Enter content...",minHeight:o="200px"}){const c=M.useRef(null),[u,h]=M.useState(!1),[p,m]=M.useState(!1),[y,v]=M.useState(""),[b,_]=M.useState(""),[w,x]=M.useState("");M.useEffect(()=>{c.current&&c.current.innerHTML!==a&&(c.current.innerHTML=a)},[]);const k=()=>{c.current&&r(c.current.innerHTML)},N=(R,F)=>{document.execCommand(R,!1,F),c.current?.focus(),k()},P=()=>{if(y.trim()){const R=`<img src="${y}" alt="Content image" style="max-width: 100%; height: auto; border-radius: 8px; margin: 16px 0;" />`;document.execCommand("insertHTML",!1,R),v(""),h(!1),k()}},$=()=>{if(b.trim()){const R=w.trim()?`<a href="${b}" target="_blank" rel="noopener noreferrer" style="color: var(--color-primary); text-decoration: underline;">${w}</a>`:`<a href="${b}" target="_blank" rel="noopener noreferrer" style="color: var(--color-primary); text-decoration: underline;">${b}</a>`;document.execCommand("insertHTML",!1,R),_(""),x(""),m(!1),k()}},C=[{icon:ov,command:"bold",title:"Bold"},{icon:Vv,command:"italic",title:"Italic"},{icon:Ex,command:"underline",title:"Underline"},{icon:Uv,command:"formatBlock",value:"h3",title:"Heading"},{icon:Zv,command:"insertUnorderedList",title:"Bullet List"},{icon:Yv,command:"insertOrderedList",title:"Numbered List"},{icon:Zy,command:"justifyLeft",title:"Align Left"},{icon:Yy,command:"justifyCenter",title:"Align Center"},{icon:tv,command:"justifyRight",title:"Align Right"}];return n.jsxs("div",{className:"border border-[var(--color-border)] rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-gray-50 border-b border-[var(--color-border)] p-2 flex flex-wrap gap-1",children:[C.map((R,F)=>n.jsx("button",{type:"button",onClick:()=>N(R.command,R.value),className:"p-2 hover:bg-gray-200 rounded transition-colors",title:R.title,children:n.jsx(R.icon,{className:"w-4 h-4"})},F)),n.jsx("div",{className:"w-px bg-[var(--color-border)] mx-1"}),n.jsx("button",{type:"button",onClick:()=>m(!0),className:"p-2 hover:bg-gray-200 rounded transition-colors",title:"Insert Link",children:n.jsx(Nm,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:()=>h(!0),className:"p-2 hover:bg-gray-200 rounded transition-colors",title:"Insert Image",children:n.jsx(Fv,{className:"w-4 h-4"})})]}),n.jsx("div",{ref:c,contentEditable:!0,onInput:k,className:"p-4 focus:outline-none",style:{minHeight:o},"data-placeholder":s}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[n.jsx("h3",{className:"mb-4",children:"Insert Image"}),n.jsx("input",{type:"url",value:y,onChange:R=>v(R.target.value),placeholder:"Enter image URL",className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] mb-4",autoFocus:!0,onKeyDown:R=>R.key==="Enter"&&P()}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{h(!1),v("")},className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] rounded-lg transition-colors",children:"Insert"})]})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[n.jsx("h3",{className:"mb-4",children:"Insert Link"}),n.jsx("input",{type:"text",value:w,onChange:R=>x(R.target.value),placeholder:"Link text (optional)",className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] mb-3"}),n.jsx("input",{type:"url",value:b,onChange:R=>_(R.target.value),placeholder:"Enter URL",className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] mb-4",autoFocus:!0,onKeyDown:R=>R.key==="Enter"&&$()}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{m(!1),_(""),x("")},className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] rounded-lg transition-colors",children:"Insert"})]})]})}),n.jsx("style",{children:`
        [contenteditable][data-placeholder]:empty:before {
          content: attr(data-placeholder);
          color: #9ca3af;
          pointer-events: none;
        }
        [contenteditable] {
          outline: none;
        }
        [contenteditable] h3 {
          font-size: 1.25rem;
          font-weight: 600;
          margin-top: 1rem;
          margin-bottom: 0.5rem;
        }
        [contenteditable] ul, [contenteditable] ol {
          margin-left: 1.5rem;
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
        }
        [contenteditable] li {
          margin-bottom: 0.25rem;
        }
        [contenteditable] p {
          margin-bottom: 0.5rem;
        }
        [contenteditable] strong {
          font-weight: 600;
        }
        [contenteditable] em {
          font-style: italic;
        }
        [contenteditable] u {
          text-decoration: underline;
        }
      `})]})}function Jh({accessToken:a,lessonId:r,onSave:s,onCancel:o}){const[c,u]=M.useState(!1),[h,p]=M.useState(!1),[m,y]=M.useState(""),[v,b]=M.useState(""),[_,w]=M.useState(""),[x,k]=M.useState([{heading:"",content:""}]),[N,P]=M.useState([{question:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,explanation:""}]);M.useEffect(()=>{r&&$()},[r]);const $=async()=>{if(r){u(!0);try{const I=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons/${r}`,{headers:{Authorization:`Bearer ${a}`}}),K=await I.json();if(I.ok&&K.lesson){const G=K.lesson;y(G.title||""),b(G.subtitle||""),w(G.category||""),k(G.sections||[{heading:"",content:""}]),P(G.questions||[{question:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,explanation:""}])}}catch(I){console.error("Error fetching lesson:",I)}finally{u(!1)}}},C=async()=>{p(!0);try{const I={title:m,subtitle:v,category:_,sections:x,questions:N},K=r?`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons/${r}`:`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons`,G=await fetch(K,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(I)});if(G.ok)s();else{const le=await G.json();console.error("Failed to save lesson:",le.error),alert("Failed to save lesson. Please try again.")}}catch(I){console.error("Error saving lesson:",I),alert("An error occurred while saving. Please try again.")}finally{p(!1)}},R=()=>{k([...x,{heading:"",content:""}])},F=I=>{k(x.filter((K,G)=>G!==I))},U=(I,K,G)=>{const le=[...x];le[I][K]=G,k(le)},D=()=>{P([...N,{question:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,explanation:""}])},q=I=>{P(N.filter((K,G)=>G!==I))},oe=(I,K,G)=>{const le=[...N];le[I]={...le[I],[K]:G},P(le)},Se=(I,K,G)=>{const le=[...N];le[I].options[K]=G,P(le)},he=(I,K,G)=>{const le=[...N];le[I].optionExplanations||(le[I].optionExplanations=["","","",""]),le[I].optionExplanations[K]=G,P(le)};return c?n.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center",children:n.jsx("div",{className:"text-[var(--color-text-secondary)]",children:"Loading lesson..."})}):n.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[n.jsx("header",{className:"bg-[var(--color-surface)] border-b border-[var(--color-border)] sticky top-0 z-10 shadow-sm",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Mn,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dn,{className:"w-8 h-8 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-xl text-[var(--color-primary-dark)]",children:r?"Edit Lesson":"Create Lesson"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:o,className:"px-4 py-2 text-[var(--color-text-secondary)] hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:C,disabled:h||!m.trim(),className:"flex items-center gap-2 px-6 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(hx,{className:"w-4 h-4"}),h?"Saving...":"Save Lesson"]})]})]})}),n.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("section",{className:"bg-white rounded-xl p-6 shadow-sm border border-[var(--color-border)] mb-6",children:[n.jsx("h2",{className:"mb-4",children:"Lesson Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Category"}),n.jsx("input",{type:"text",value:_,onChange:I=>w(I.target.value),placeholder:"e.g., Business Ethics, Science, History",className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Title *"}),n.jsx("input",{type:"text",value:m,onChange:I=>y(I.target.value),placeholder:"Enter lesson title",className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2",children:"Subtitle"}),n.jsx("input",{type:"text",value:v,onChange:I=>b(I.target.value),placeholder:"Brief description of the lesson",className:"w-full px-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]})]}),n.jsxs("section",{className:"bg-white rounded-xl p-6 shadow-sm border border-[var(--color-border)] mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"m-0",children:"Content Sections"}),n.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-[var(--color-primary)] rounded-lg hover:bg-blue-200 transition-colors",children:[n.jsx(Ps,{className:"w-4 h-4"}),"Add Section"]})]}),x.map((I,K)=>n.jsxs("div",{className:"mb-6 p-4 border border-[var(--color-border)] rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"text-sm text-[var(--color-text-secondary)]",children:["Section ",K+1]}),x.length>1&&n.jsx("button",{onClick:()=>F(K),className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",children:n.jsx(xa,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Section Heading"}),n.jsx(_n,{value:I.heading,onChange:G=>U(K,"heading",G),placeholder:"Section heading",minHeight:"60px"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2",children:"Section Content"}),n.jsx(_n,{value:I.content,onChange:G=>U(K,"content",G),placeholder:"Section content",minHeight:"200px"})]})]},K))]}),n.jsxs("section",{className:"bg-white rounded-xl p-6 shadow-sm border border-[var(--color-border)] mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"m-0",children:"Quiz Questions"}),n.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-[var(--color-primary)] rounded-lg hover:bg-blue-200 transition-colors",children:[n.jsx(Ps,{className:"w-4 h-4"}),"Add Question"]})]}),N.map((I,K)=>n.jsxs("div",{className:"mb-6 p-4 border border-[var(--color-border)] rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"text-sm text-[var(--color-text-secondary)]",children:["Question ",K+1]}),N.length>1&&n.jsx("button",{onClick:()=>q(K),className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",children:n.jsx(xa,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Question"}),n.jsx(_n,{value:I.question,onChange:G=>oe(K,"question",G),placeholder:"Enter your question",minHeight:"80px"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Question Type"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:I.type==="multiple-choice",onChange:()=>oe(K,"type","multiple-choice"),className:"cursor-pointer"}),n.jsx("span",{children:"Multiple Choice"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:I.type==="essay",onChange:()=>oe(K,"type","essay"),className:"cursor-pointer"}),n.jsx("span",{children:"Essay / Open-Ended"})]})]})]}),I.type==="multiple-choice"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-2",children:"Answer Options"}),I.options.map((G,le)=>n.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[n.jsx("input",{type:"radio",name:`correct-${K}`,checked:I.correctAnswer===le,onChange:()=>oe(K,"correctAnswer",le),className:"flex-shrink-0 mt-3"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-xs text-[var(--color-text-secondary)] mb-1",children:["Option ",String.fromCharCode(65+le)]}),n.jsx(_n,{value:G,onChange:be=>Se(K,le,be),placeholder:`Option ${String.fromCharCode(65+le)}`,minHeight:"60px"})]})]}),n.jsxs("div",{className:"ml-7",children:[n.jsxs("label",{className:"block text-xs text-[var(--color-text-secondary)] mb-1",children:["Option ",String.fromCharCode(65+le)," Explanation (optional)"]}),n.jsx(_n,{value:I.optionExplanations?.[le]||"",onChange:be=>he(K,le,be),placeholder:`Explanation for option ${String.fromCharCode(65+le)} (leave blank to use general explanation)`,minHeight:"60px"})]})]},le)),n.jsx("p",{className:"text-xs text-[var(--color-text-secondary)] mt-2",children:"Select the correct answer using the radio button"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm mb-2",children:"General Explanation"}),n.jsx("p",{className:"text-xs text-[var(--color-text-secondary)] mb-2",children:"This explanation will be used for any option that doesn't have its own specific explanation"}),n.jsx(_n,{value:I.explanation,onChange:G=>oe(K,"explanation",G),placeholder:"General explanation (used as fallback if option explanations are not provided)",minHeight:"80px"})]})]}):n.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsx("p",{className:"text-sm text-[var(--color-text-secondary)]",children:"Students will provide a written response to this question. You'll be able to view all responses in the lesson viewer."})})]},K))]})]})]})}function Lx({question:a,type:r,options:s,correctAnswer:o,explanation:c,optionExplanations:u,questionNumber:h,lessonId:p,accessToken:m}){const[y,v]=M.useState(null),[b,_]=M.useState(new Set),[w,x]=M.useState(!1),[k,N]=M.useState(""),[P,$]=M.useState(!1),[C,R]=M.useState(!1),F=he=>{v(he),he===o?x(!0):_(I=>new Set(I).add(he))},U=async()=>{if(k.trim()){R(!0);try{(await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/essay-responses`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({lessonId:p,questionNumber:h,response:k})})).ok?$(!0):console.error("Failed to submit essay response")}catch(he){console.error("Error submitting essay:",he)}finally{R(!1)}}},D=y!==null,q=y===o,Se=(()=>{if(y===null)return"";const he=u?.[y];return he&&he.trim()!==""?he:c})();return n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-[var(--color-border)] mb-6",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--color-primary)] text-white flex items-center justify-center",children:h}),n.jsx("div",{className:"flex-1 prose prose-blue max-w-none m-0",dangerouslySetInnerHTML:{__html:a}})]}),r==="multiple-choice"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-3 ml-11",children:s.map((he,I)=>{const K=y===I,G=I===o,le=b.has(I);let be="w-full text-left p-4 rounded-lg border-2 transition-all duration-200 ";return w?G?be+="border-[var(--color-success)] bg-green-50":be+="border-[var(--color-border)] opacity-50":le&&K?be+="border-[var(--color-error)] bg-red-50":le?be+="border-[var(--color-error)] bg-red-50 opacity-70":be+="border-[var(--color-border)] hover:border-[var(--color-primary)] hover:bg-blue-50",n.jsx("button",{onClick:()=>F(I),disabled:w,className:be,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full border-2 border-current flex items-center justify-center",children:String.fromCharCode(65+I)}),n.jsx("div",{className:"prose prose-blue max-w-none",dangerouslySetInnerHTML:{__html:he}})]}),w&&G&&n.jsx(ca,{className:"w-5 h-5 text-[var(--color-success)]"}),le&&n.jsx(Qh,{className:"w-5 h-5 text-[var(--color-error)]"})]})},I)})}),D&&n.jsx("div",{className:`ml-11 mt-4 p-4 rounded-lg ${q?"bg-green-50 border border-[var(--color-success)]":"bg-orange-50 border border-[var(--color-accent)]"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[q?n.jsx(ca,{className:"w-5 h-5 text-[var(--color-success)] flex-shrink-0 mt-1"}):n.jsx(Qh,{className:"w-5 h-5 text-[var(--color-error)] flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:`m-0 mb-2 ${q?"text-[var(--color-success)]":"text-[var(--color-error)]"}`,children:q?"Correct!":"Not quite right. Try again!"}),n.jsx("div",{className:"prose prose-blue max-w-none m-0 text-[var(--color-text-secondary)]",dangerouslySetInnerHTML:{__html:Se}})]})]})})]}):n.jsx("div",{className:"ml-11",children:P?n.jsx("div",{className:"p-4 bg-green-50 border border-[var(--color-success)] rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ca,{className:"w-5 h-5 text-[var(--color-success)] flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[var(--color-success)] m-0 mb-2",children:"Response submitted!"}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-sm m-0 mb-3",children:"Your response has been saved and will be reviewed by the lesson creator."}),n.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-secondary)] m-0 mb-1",children:"Your response:"}),n.jsx("p",{className:"m-0 whitespace-pre-wrap",children:k})]})]})]})}):n.jsxs(n.Fragment,{children:[n.jsx("textarea",{value:k,onChange:he=>N(he.target.value),placeholder:"Type your response here...",className:"w-full min-h-[200px] p-4 border-2 border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent resize-y"}),n.jsx("button",{onClick:U,disabled:!k.trim()||C,className:"mt-3 px-6 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Submitting...":"Submit Response"})]})})]})}const xt=[{id:1,name:"Congo Mineral Resources Ltd",location:"Kolwezi, Democratic Republic of Congo",commodity:"Cobalt",industry:"Mining",verificationStatus:"No independent third-party audit in past 2 years",adverseMedia:["2023: Local NGO report documents child labor in artisanal mining sites near company operations","2024: Reuters investigation links supply chain to armed groups controlling mining areas","2023: Workers report unsafe tunnel conditions and lack of protective equipment"],positiveIndicators:["Low prices compared to certified suppliers","Quick delivery times"],riskFactors:["High-risk region for conflict minerals","No RMI (Responsible Minerals Initiative) certification","Lack of transparent supply chain documentation"],correctAnswer:"no",explanation:"This supplier presents severe ethical risks. The adverse media reports of child labor and links to armed groups, combined with lack of independent verification and location in a conflict-affected region, make this an unacceptable partner. The Dodd-Frank Act and OECD Due Diligence Guidance require companies to avoid sourcing from suppliers that contribute to conflict or human rights abuses."},{id:2,name:"Xinjiang Cotton Cooperative",location:"Xinjiang Uyghur Autonomous Region, China",commodity:"Cotton",industry:"Agriculture",verificationStatus:"Government-approved facility, no independent audit access granted",adverseMedia:["2023: U.S. State Department report cites evidence of forced labor in Xinjiang cotton sector","2024: Multiple major brands have severed ties with suppliers in this region","2023: UN report documents systematic human rights concerns in the region"],positiveIndicators:["High production capacity","Competitive pricing","Modern processing facilities"],riskFactors:["Restricted access for independent auditors","Region subject to U.S. import bans under UFLPA (Uyghur Forced Labor Prevention Act)","Inability to verify voluntary labor participation"],correctAnswer:"no",explanation:"Sourcing from this region carries extreme legal and ethical risks. The U.S. UFLPA creates a rebuttable presumption that goods from Xinjiang are made with forced labor. Major brands have faced significant reputational damage and legal consequences for sourcing from this region. The inability to conduct independent audits and widespread documented concerns make this an unacceptable risk."},{id:3,name:"ElectroTech Manufacturing Sdn Bhd",location:"Penang, Malaysia",commodity:"Semiconductors & Electronics Components",industry:"Electronics Manufacturing",verificationStatus:"RBA (Responsible Business Alliance) certified, annual third-party audits",adverseMedia:["2024: Minor non-compliance found in recent audit (overtime hours slightly exceeded limits during peak season)","Corrective action plan submitted and verified as complete"],positiveIndicators:["ISO 14001 environmental certification","Workers have access to grievance mechanism","Transparent supply chain documentation","Living wages verified by Fair Labor Association","Active worker training programs on rights and safety","No passport retention policy, workers free to leave employment"],riskFactors:["Minor audit findings (corrected)","Electronics sector historically associated with labor issues in Southeast Asia"],correctAnswer:"yes",explanation:"This supplier demonstrates strong ethical practices. Despite one minor audit finding (which was corrected), they have multiple certifications, transparent operations, and positive labor practices including living wages, worker rights, and no document retention. The RBA certification and regular third-party audits provide credible verification. Minor non-conformances with corrective action are normal and acceptable when properly addressed."},{id:4,name:"Premier Garments Bangladesh",location:"Dhaka, Bangladesh",commodity:"Ready-made Garments",industry:"Textile & Apparel",verificationStatus:"Accord on Fire and Building Safety certified, WRAP (Worldwide Responsible Accredited Production) certified",adverseMedia:["No adverse media reports in past 3 years"],positiveIndicators:["Completed all structural safety upgrades after Rana Plaza reforms","SEDEX member with 'good' rating on recent SMETA audit","Fair Wage Network certified - pays 15% above minimum wage","On-site childcare facility for workers","Transparent subcontracting policy with approved facilities only","Worker committees participate in safety decisions","Emergency evacuation drills conducted quarterly"],riskFactors:["Operating in country with historical safety concerns","Moderate pricing (not the cheapest option)"],correctAnswer:"yes",explanation:"This supplier is an excellent partner. They have proactively addressed the systemic safety issues that plagued Bangladesh's garment sector, demonstrated by Accord certification and structural upgrades. Multiple certifications, above-minimum wages, worker participation mechanisms, and transparent operations indicate strong ethical commitment. Operating in a historically high-risk country doesn't disqualify a supplier when they demonstrate robust systems and verification."},{id:5,name:"West African Cocoa Trading Company",location:"Abidjan, Cte d'Ivoire",commodity:"Cocoa beans",industry:"Agriculture",verificationStatus:"Claims Fair Trade certification, certificate not verifiable through Fair Trade registry",adverseMedia:["2024: Investigation by local journalists finds children working on farms in supply network","2023: Company spokesperson denies child labor allegations, refuses facility access to NGO investigators","2024: GPS data shows sourcing from farms in deforestation zones"],positiveIndicators:["30% lower cost than certified suppliers","Large production volumes","Company website claims commitment to sustainability"],riskFactors:["Cannot verify Fair Trade certification claims","Refusal to allow independent verification","Credible child labor allegations","Sourcing from deforestation zones","West Africa cocoa sector has well-documented child labor issues","No third-party audit trail"],correctAnswer:"no",explanation:"This supplier presents multiple red flags. The inability to verify certification claims, refusal of independent access, credible child labor allegations, and sourcing from deforestation zones create unacceptable risks. Cocoa from West Africa is a high-risk commodity, and legitimate suppliers must demonstrate robust monitoring systems. The significantly lower price likely reflects avoided costs of ethical practices. Major chocolate companies have faced lawsuits and reputation damage from similar suppliers."}];function $x(){const[a,r]=M.useState(0),[s,o]=M.useState(null),[c,u]=M.useState(!1),[h,p]=M.useState(0),[m,y]=M.useState([]),[v,b]=M.useState([]),[_,w]=M.useState(!1),x=()=>{v.length===xt.length&&b([]);let R=xt.map((U,D)=>D).filter(U=>!v.includes(U));R.length===0&&(R=xt.map((U,D)=>D),b([]));const F=R[Math.floor(Math.random()*R.length)];b([...v,F]),r(F),o(null),u(!1),w(!1)};M.useEffect(()=>{const R=xt.map((U,D)=>D),F=R[Math.floor(Math.random()*R.length)];r(F),b([F])},[]);const k=xt[a],N=m.length===xt.length,P=R=>{o(R),u(!0),R===k.correctAnswer&&p(h+1),m.includes(k.id)||y([...m,k.id])},$=()=>{m.length<xt.length&&x()},C=()=>{r(0),o(null),u(!1),p(0),y([]),b([]),w(!1),x()};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Quiz on Choosing the Right Supplier"}),n.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[n.jsx(Sm,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-['Outfit']",children:["Score: ",h,"/",xt.length]})]})]}),n.jsx("p",{className:"m-0 text-green-100",children:"Use Adverse Media & Supplier Selecting software (like Scoutbee) to determine if suppliers are ethically safe to invest in"})]}),n.jsxs("div",{className:"bg-gray-100 px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Supplier ",a+1," of ",xt.length]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[m.length," completed"]})]}),n.jsx("div",{className:"w-full bg-gray-300 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${(a+1)/xt.length*100}%`}})})]}),n.jsx("div",{className:"bg-white border-2 border-dashed border-green-500 p-6 mx-8 mt-6 rounded-lg",children:n.jsxs("p",{className:"text-gray-800 mb-0",children:["Participants will be given a random profile where they will have to use both ",n.jsx("strong",{className:"underline",children:"Adverse media"})," & ",n.jsx("strong",{className:"underline",children:"Supplier Selecting softwares like Scoutbee"})," to determine if it is ethically safe to invest in."]})}),n.jsx("div",{className:"p-8",children:N?n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full ${h>=4?"bg-green-100":h>=3?"bg-yellow-100":"bg-red-100"} mb-4`,children:n.jsx("span",{className:`text-4xl ${h>=4?"text-green-700":h>=3?"text-yellow-700":"text-red-700"}`,children:h>=4?"":h>=3?"":""})}),n.jsx("h2",{className:"mt-0 mb-2",children:"Assessment Complete!"}),n.jsxs("p",{className:"text-xl text-gray-600 mb-6",children:["You scored ",n.jsxs("strong",{className:"text-indigo-600",children:[h," out of ",xt.length]})]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-8 text-left max-w-2xl mx-auto",children:[n.jsx("h3",{className:"mt-0 mb-4",children:"Key Takeaways from Using Adverse Media & Supplier Selection Tools:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-0 text-sm",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Adverse Media Monitoring:"})," Always search news articles, NGO reports, and regulatory findings to identify hidden risks"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Supplier Verification Tools (Scoutbee):"})," Verify certifications through independent registries and check audit history"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Red Flags:"})," Low prices may indicate cutting corners on ethical practices; refusal to allow independent verification is a major concern"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Positive Signals:"})," Third-party audits and transparent operations are strong indicators of ethical practices"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Context Matters:"})," Operating in high-risk regions requires extra verification, not automatic rejection"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Due Diligence:"})," Use both tools together to make informed decisions about supplier partnerships"]})]})]}),n.jsxs("div",{className:"flex gap-4 justify-center",children:[n.jsx("button",{onClick:C,className:"px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-['Outfit']",children:"Try Again"}),n.jsx("button",{onClick:()=>{r(0),o(null),u(!1),y([])},className:"px-8 py-3 border-2 border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-colors font-['Outfit']",children:"Review Suppliers"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 flex gap-4",children:[n.jsxs("button",{onClick:()=>w(!_),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[n.jsx(Na,{className:"w-4 h-4"}),_?"Hide":"Show"," Research Tools"]}),n.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(Is,{className:"w-4 h-4"}),"Get Random Profile"]})]}),_&&n.jsxs("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:[n.jsxs("h4",{className:"mt-0 mb-2 text-blue-900 flex items-center gap-2",children:[n.jsx(Ev,{className:"w-5 h-5"}),"Research Tools Available"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{className:"text-blue-800",children:"Adverse Media Monitoring:"}),n.jsx("p",{className:"text-blue-700 m-0 mt-1",children:"Search news articles, NGO reports, and regulatory findings"})]}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-blue-800",children:"Scoutbee Supplier Intelligence:"}),n.jsx("p",{className:"text-blue-700 m-0 mt-1",children:"Verify certifications, audit history, and compliance records"})]})]})]}),n.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"md:col-span-1 flex items-center justify-center",children:n.jsx("div",{className:"relative",children:n.jsx("div",{className:"bg-amber-100 border-2 border-amber-300 rounded-lg p-6 shadow-lg transform rotate-[-2deg]",children:n.jsxs("div",{className:"bg-white rounded p-4 border border-gray-300",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vt,{className:"w-6 h-6 text-amber-700"}),n.jsx("span",{className:"text-sm font-semibold text-amber-900",children:"Supplier Profile"})]}),n.jsx("div",{className:"h-32 bg-gray-100 rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-gray-500",children:"Case File"})})]})})})}),n.jsxs("div",{className:"md:col-span-2 space-y-4",children:[n.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg",children:[n.jsx("h3",{className:"mt-0 mb-2 text-lg",children:k.name}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("p",{className:"m-0",children:[n.jsx("strong",{children:"Supplier:"})," ",k.commodity," supplier in ",k.location.split(",")[k.location.split(",").length-1]]}),n.jsxs("p",{className:"m-0",children:[n.jsx("strong",{children:"Supplier Verification:"})," ",k.verificationStatus]}),n.jsxs("p",{className:"m-0",children:[n.jsx("strong",{children:"Adverse media surrounding that factory:"})," ",k.adverseMedia.length," report",k.adverseMedia.length!==1?"s":""," found"]})]})]}),n.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg",children:[n.jsx("h4",{className:"mt-0 mb-3 text-lg",children:"Do we push forward with this supplier?"}),c?n.jsxs("div",{className:`p-4 rounded-lg ${s===k.correctAnswer?"bg-green-100 text-green-900":"bg-red-100 text-red-900"}`,children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:s===k.correctAnswer?n.jsxs(n.Fragment,{children:[n.jsx(rt,{className:"w-6 h-6"}),n.jsx("strong",{children:"Correct!"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-6 h-6"}),n.jsx("strong",{children:"Incorrect"})]})}),n.jsx("p",{className:"m-0 text-sm",children:n.jsxs("strong",{children:["The correct answer is: ",k.correctAnswer==="yes"?"Yes":"No"]})})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>P("yes"),className:"flex-1 py-3 px-4 bg-white text-green-700 rounded-lg hover:bg-green-50 transition-colors font-semibold",children:"Yes"}),n.jsx("button",{onClick:()=>P("no"),className:"flex-1 py-3 px-4 bg-white text-green-700 rounded-lg hover:bg-green-50 transition-colors font-semibold",children:"No"})]})]})]})]}),c&&n.jsxs("div",{className:"mt-6 space-y-4",children:[n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-gray-400",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Vt,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-1 text-sm text-gray-700 font-semibold",children:"Supplier Verification (Scoutbee)"}),n.jsx("p",{className:"m-0 text-sm text-gray-600",children:k.verificationStatus})]})]})}),n.jsx("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:n.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[n.jsx(In,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-red-900 font-semibold",children:"Adverse Media Findings"}),n.jsx("ul",{className:"list-disc pl-6 space-y-2 mb-0",children:k.adverseMedia.map((R,F)=>n.jsx("li",{className:"text-sm text-red-800",children:R},F))})]})]})}),n.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:n.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[n.jsx(rt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-green-900 font-semibold",children:"Positive Indicators"}),n.jsx("ul",{className:"list-disc pl-6 space-y-2 mb-0",children:k.positiveIndicators.map((R,F)=>n.jsx("li",{className:"text-sm text-green-800",children:R},F))})]})]})}),n.jsx("div",{className:"bg-amber-50 rounded-lg p-4 border-l-4 border-amber-500",children:n.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[n.jsx(Os,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-amber-900 font-semibold",children:"Risk Factors"}),n.jsx("ul",{className:"list-disc pl-6 space-y-2 mb-0",children:k.riskFactors.map((R,F)=>n.jsx("li",{className:"text-sm text-amber-800",children:R},F))})]})]})}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-blue-900 font-semibold",children:"Detailed Explanation"}),n.jsx("p",{className:"m-0 text-sm text-blue-800",children:k.explanation})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 mt-6",children:[n.jsxs("button",{onClick:x,className:"px-6 py-3 rounded-lg border-2 border-gray-300 hover:border-green-500 transition-colors font-['Outfit'] flex items-center gap-2",children:[n.jsx(Is,{className:"w-4 h-4"}),"New Random Profile"]}),c&&n.jsx("button",{onClick:$,disabled:m.length===xt.length,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:m.length===xt.length?"View Results ":"Next Supplier "})]})]})})]})}function Mx(){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(bm,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Interactive Supply Chain Mapping"})]}),n.jsx("p",{className:"m-0 text-emerald-100",children:"Explore real-time supply chain visualization and optimization"})]}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b border-blue-200",children:[n.jsx("h3",{className:"mt-0 mb-3 text-blue-900",children:"About This Interactive Tool"}),n.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["This external application demonstrates the key concepts you've learned about ",n.jsx("strong",{children:"optimization, predictive analytics, and live monitoring"}),". It provides a visual representation of how modern supply chain systems track shipments, predict delays, and optimize routes in real-time."]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-emerald-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Zl,{className:"w-5 h-5 text-emerald-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Live Tracking"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Observe real-time location data and shipment status updates across the supply chain network"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-teal-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ka,{className:"w-5 h-5 text-teal-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Predictive Analytics"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"See how algorithms predict potential disruptions and suggest proactive interventions"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Sa,{className:"w-5 h-5 text-blue-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Route Optimization"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Explore how AI optimizes delivery routes based on traffic, weather, and sustainability goals"})]})]}),n.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-amber-900",children:"How to Use This Tool:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-sm text-amber-800 space-y-1",children:[n.jsx("li",{children:"Interact with the map to explore different supply chain nodes and routes"}),n.jsx("li",{children:"Click on shipments to view real-time tracking data and predictive insights"}),n.jsx("li",{children:"Observe how the system responds to simulated disruptions (weather, delays, etc.)"}),n.jsx("li",{children:"Notice how optimization algorithms reroute shipments to minimize impact"}),n.jsx("li",{children:"Pay attention to how IoT sensors provide live monitoring data from various points"})]})]})]}),n.jsxs("div",{className:"bg-gray-100 p-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-inner overflow-hidden",style:{height:"700px"},children:n.jsx("iframe",{src:"https://quest-map-99f5f228.base44.app/",title:"Supply Chain Interactive Map",className:"w-full h-full border-0",allow:"geolocation",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-3 mb-0 text-center",children:"External tool provided for educational demonstration purposes"})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-50 to-blue-50 border-t border-gray-200",children:[n.jsx("h3",{className:"mt-0 mb-3",children:"Connect to Lesson Concepts"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-emerald-700",children:"Optimization Techniques:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Dynamic route planning based on real-time conditions"}),n.jsx("li",{children:"Multi-objective optimization (cost, speed, sustainability)"}),n.jsx("li",{children:"Resource allocation across distribution networks"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-teal-700",children:"Predictive & Live Monitoring:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"IoT sensors providing continuous data streams"}),n.jsx("li",{children:"Machine learning models forecasting delays"}),n.jsx("li",{children:"Real-time dashboards for decision support"})]})]})]})]})]})}function Dx(){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(wm,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"AI-Powered Supply Chain Investigation"})]}),n.jsx("p",{className:"m-0 text-purple-100",children:"Experience hands-on how AI tools analyze and detect supply chain risks"})]}),n.jsxs("div",{className:"p-6 bg-indigo-50 border-b border-indigo-200",children:[n.jsx("h3",{className:"mt-0 mb-3 text-indigo-900",children:"About This Interactive Experience"}),n.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["This detective-style AI tool demonstrates the ",n.jsx("strong",{children:"key AI capabilities"})," you've learned about for supply chain sustainability. It simulates how artificial intelligence processes vast amounts of data to identify risks, anomalies, and opportunities for improvement in supplier networks. Use this tool to see firsthand how AI transforms raw data into actionable intelligence."]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-purple-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Na,{className:"w-5 h-5 text-purple-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Pattern Recognition"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Watch how AI identifies patterns and correlations across multiple data sources that humans might miss"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-pink-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ov,{className:"w-5 h-5 text-pink-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Automated Investigation"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"See AI conduct comprehensive due diligence checks that would take analysts days or weeks"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-indigo-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(xv,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Risk Scoring"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Observe how machine learning models calculate risk scores based on multiple weighted factors"})]})]}),n.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-purple-900",children:"How to Use This Tool:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-sm text-purple-800 space-y-1",children:[n.jsx("li",{children:"Enter supplier information or company names to initiate an AI-powered investigation"}),n.jsx("li",{children:"Watch as the AI tool gathers and analyzes data from multiple sources in real-time"}),n.jsx("li",{children:"Review the AI-generated risk assessment, compliance checks, and sustainability scores"}),n.jsx("li",{children:"Notice how the tool connects disparate data points to form comprehensive insights"}),n.jsx("li",{children:"Pay attention to the confidence levels and explainability features that make AI trustworthy"}),n.jsx("li",{children:"Experiment with different queries to understand the breadth of AI capabilities"})]})]})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(vx,{className:"w-6 h-6 text-purple-600"}),n.jsx("h3",{className:"mt-0 mb-0",children:"AI Technologies Demonstrated"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-purple-700",children:" Natural Language Processing (NLP)"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Extracts meaning from unstructured text like news articles, social media, and regulatory filings to identify reputational risks"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-pink-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-pink-700",children:" Machine Learning Models"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Predicts supplier risk based on historical patterns, industry benchmarks, and real-time signals"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700",children:" Knowledge Graphs"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Maps complex relationships between suppliers, subsidiaries, ownership structures, and geographic locations"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-purple-700",children:" Anomaly Detection"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Flags unusual patterns in financial data, shipping routes, or compliance records that may indicate problems"})]})]})]}),n.jsxs("div",{className:"bg-gray-100 p-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-inner overflow-hidden",style:{height:"700px"},children:n.jsx("iframe",{src:"https://the-detectives-desk-8a0b9660.base44.app/",title:"AI Detective Desk - Supply Chain Investigation Tool",className:"w-full h-full border-0",allow:"clipboard-read; clipboard-write",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-3 mb-0 text-center",children:"External AI investigation tool provided for educational demonstration purposes"})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-50 to-purple-50 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Pn,{className:"w-6 h-6 text-purple-600"}),n.jsx("h3",{className:"mt-0 mb-0",children:"Connecting AI Tools to Supply Chain Sustainability"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-purple-700",children:"Practical Applications:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Pre-screening new suppliers before onboarding"}),n.jsx("li",{children:"Continuous monitoring of existing supplier base"}),n.jsx("li",{children:"Identifying hidden relationships and ownership structures"}),n.jsx("li",{children:"Detecting early warning signs of financial distress"}),n.jsx("li",{children:"Aggregating ESG scores from multiple rating agencies"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-pink-700",children:"Business Benefits:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Reduces due diligence time from weeks to minutes"}),n.jsx("li",{children:"Scales to analyze thousands of suppliers simultaneously"}),n.jsx("li",{children:"Provides consistent, objective risk assessments"}),n.jsx("li",{children:"Identifies risks that manual processes often miss"}),n.jsx("li",{children:"Enables proactive rather than reactive risk management"})]})]})]}),n.jsx("div",{className:"mt-4 bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded",children:n.jsxs("p",{className:"text-sm text-indigo-900 mb-2",children:[n.jsx("strong",{children:" Key Insight:"})," AI doesn't replace human judgmentit augments it. The tool provides data-driven insights, but sustainability professionals must interpret the results within broader business context, ethical frameworks, and stakeholder expectations."]})})]})]})}function Ux(){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(uv,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Interactive Digital Twin Simulation"})]}),n.jsx("p",{className:"m-0 text-cyan-100",children:"Experience a virtual factory replica that responds to your decisions in real-time"})]}),n.jsxs("div",{className:"p-6 bg-cyan-50 border-b border-cyan-200",children:[n.jsx("h3",{className:"mt-0 mb-3 text-cyan-900",children:"About This Digital Twin Demonstration"}),n.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["This interactive tool demonstrates the core concepts of ",n.jsx("strong",{children:"digital twin technology"})," that you've just learned about. You'll manage a virtual factory where you can make operational decisions, simulate different scenarios, and observe the impact on sustainability metricsall without disrupting real-world operations. This is the power of digital twins: testing before implementing."]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-cyan-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(lx,{className:"w-5 h-5 text-cyan-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Real-Time Simulation"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Watch how the digital twin mirrors physical operations with live data feeds and dynamic updates"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(uc,{className:"w-5 h-5 text-blue-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Scenario Testing"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Experiment with different production strategies and see predicted outcomes before committing resources"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-teal-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ka,{className:"w-5 h-5 text-teal-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Performance Optimization"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Identify bottlenecks and optimization opportunities through data-driven insights from the twin"})]})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-blue-900",children:"How to Use This Tool:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"Adjust production settings and operational parameters in the virtual factory"}),n.jsx("li",{children:"Monitor sustainability metrics like energy consumption, waste generation, and emissions"}),n.jsx("li",{children:'Run "what-if" scenarios to compare different operational strategies'}),n.jsx("li",{children:"Observe how changes propagate through the system in real-time"}),n.jsx("li",{children:"Pay attention to trade-offs between efficiency, cost, and sustainability"}),n.jsx("li",{children:"Notice how the twin provides predictive insights about future performance"})]})]})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-br from-cyan-50 to-blue-50 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(px,{className:"w-6 h-6 text-cyan-600"}),n.jsx("h3",{className:"mt-0 mb-0",children:"Digital Twin Core Capabilities"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-cyan-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-cyan-700",children:" Bi-Directional Data Flow"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"The digital twin receives real-time data from physical sensors and can send optimized instructions back to control systems"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:" Predictive Modeling"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Uses historical data and machine learning to forecast future states, potential failures, and maintenance needs"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-teal-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-teal-700",children:" Scenario Simulation"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Test multiple operational scenarios virtually to identify optimal strategies without real-world risk or cost"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-cyan-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-cyan-700",children:" Continuous Optimization"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Constantly analyzes performance data to recommend improvements and automatically adjust operations"})]})]})]}),n.jsxs("div",{className:"bg-gray-100 p-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-inner overflow-hidden",style:{height:"700px"},children:n.jsx("iframe",{src:"https://ethical-factory-manager-7f31ed86.base44.app/",title:"Digital Twin Factory Manager - Ethical Supply Chain Simulation",className:"w-full h-full border-0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-3 mb-0 text-center",children:"External digital twin simulation provided for educational demonstration purposes"})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-50 to-cyan-50 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Sa,{className:"w-6 h-6 text-cyan-600"}),n.jsx("h3",{className:"mt-0 mb-0",children:"Connecting Digital Twins to Supply Chain Sustainability"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-cyan-700",children:"Sustainability Applications:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Simulate carbon impact before changing sourcing strategies"}),n.jsx("li",{children:"Model circular economy material flows to minimize waste"}),n.jsx("li",{children:"Test resilience of supply networks to climate disruptions"}),n.jsx("li",{children:"Optimize transportation routes for emissions reduction"}),n.jsx("li",{children:"Predict environmental impact of production changes"}),n.jsx("li",{children:"Identify opportunities for energy efficiency improvements"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:"Business Value:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Reduce risk by testing decisions in virtual environment first"}),n.jsx("li",{children:"Accelerate innovation without disrupting operations"}),n.jsx("li",{children:"Improve decision-making with data-driven insights"}),n.jsx("li",{children:"Reduce costs by identifying inefficiencies early"}),n.jsx("li",{children:"Enable proactive maintenance and issue prevention"}),n.jsx("li",{children:"Support compliance by modeling regulatory scenarios"})]})]})]}),n.jsx("div",{className:"mt-4 bg-gradient-to-r from-cyan-50 to-blue-50 border-l-4 border-cyan-500 p-4 rounded",children:n.jsxs("p",{className:"text-sm text-cyan-900 mb-2",children:[n.jsx("strong",{children:" Key Insight:"}),' Digital twins represent a paradigm shift from reactive to proactive supply chain management. By creating virtual replicas that continuously learn and adapt, organizations can optimize for sustainability alongside traditional business objectives like cost, speed, and quality. The virtual environment becomes a "safe sandbox" for testing bold sustainability initiatives before investing resources in physical implementation.']})})]})]})}function zx(){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(kv,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Supply Chain Control Tower Dashboard"})]}),n.jsx("p",{className:"m-0 text-blue-100",children:"Experience centralized visibility and real-time decision-making across your supply chain"})]}),n.jsxs("div",{className:"p-6 bg-indigo-50 border-b border-indigo-200",children:[n.jsx("h3",{className:"mt-0 mb-3 text-indigo-900",children:"About This Control Tower Demonstration"}),n.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["This interactive control tower demonstrates the ",n.jsx("strong",{children:"centralized visibility and decision-making capabilities"})," you've learned about. It provides a real-time view of supply chain operations, integrating data from multiple sources to enable proactive management, rapid issue identification, and coordinated response across the entire network."]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Tv,{className:"w-5 h-5 text-blue-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"End-to-End Visibility"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Observe how a control tower aggregates data from multiple systems to create a single source of truth across all supply chain tiers"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-indigo-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ka,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Real-Time Monitoring"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"See how live data streams enable continuous monitoring of shipments, inventory, and performance metrics across the network"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-l-4 border-purple-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Sa,{className:"w-5 h-5 text-purple-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm",children:"Proactive Decision-Making"})]}),n.jsx("p",{className:"m-0 text-xs text-gray-600",children:"Experience how control towers enable rapid response to disruptions and optimization opportunities before they impact operations"})]})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-sm text-blue-900",children:"How to Use This Tool:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"Explore the dashboard to see integrated data from multiple supply chain systems"}),n.jsx("li",{children:"Monitor real-time metrics including shipments, inventory levels, and performance indicators"}),n.jsx("li",{children:"Identify potential disruptions or bottlenecks through visual alerts and trend analysis"}),n.jsx("li",{children:"Observe how data from different sources (ERP, TMS, WMS, supplier portals) is unified"}),n.jsx("li",{children:"Notice how the control tower enables quick decision-making with comprehensive context"}),n.jsx("li",{children:"Explore how sustainability metrics are tracked alongside operational performance"})]})]})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(uc,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"mt-0 mb-0",children:"Control Tower Core Capabilities"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:" Data Integration"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Connects disparate systems (ERP, TMS, WMS, supplier portals) to create a unified view of supply chain operations"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700",children:" Analytics Engine"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Processes and analyzes integrated data to identify patterns, predict issues, and recommend optimal actions"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-purple-700",children:" Real-Time Alerts"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Automatically notifies stakeholders when thresholds are exceeded or anomalies are detected, enabling rapid response"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:" Collaboration Platform"}),n.jsx("p",{className:"m-0 text-gray-700 text-xs",children:"Enables communication and coordination across teams, suppliers, and partners to resolve issues efficiently"})]})]})]}),n.jsxs("div",{className:"bg-gray-100 p-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-inner overflow-hidden",style:{height:"700px"},children:n.jsx("iframe",{src:"https://supply-chain-compass-6645d821.base44.app/",title:"Supply Chain Control Tower Dashboard - Real-Time Visibility Platform",className:"w-full h-full border-0",allow:"clipboard-read; clipboard-write",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-3 mb-0 text-center",children:"External control tower dashboard provided for educational demonstration purposes"})]}),n.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-50 to-blue-50 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Pn,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"mt-0 mb-0",children:"Connecting Control Towers to Supply Chain Management"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:"Key Benefits:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Single source of truth eliminates data silos and conflicting information"}),n.jsx("li",{children:"End-to-end visibility from raw materials to final delivery"}),n.jsx("li",{children:"Rapid issue identification enables proactive rather than reactive management"}),n.jsx("li",{children:"Coordinated response across multiple stakeholders and geographies"}),n.jsx("li",{children:"Data-driven decision-making with comprehensive context"}),n.jsx("li",{children:"Integration with digital twins for scenario planning and simulation"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700",children:"Sustainability Applications:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Track carbon emissions across all supply chain tiers in real-time"}),n.jsx("li",{children:"Monitor social compliance metrics and labor standards"}),n.jsx("li",{children:"Measure circular economy indicators and waste reduction"}),n.jsx("li",{children:"Identify sustainability risks before they become compliance issues"}),n.jsx("li",{children:"Optimize transportation routes for emissions reduction"}),n.jsx("li",{children:"Enable transparent reporting to stakeholders and regulators"})]})]})]}),n.jsx("div",{className:"mt-4 bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded",children:n.jsxs("p",{className:"text-sm text-indigo-900 mb-2",children:[n.jsx("strong",{children:" Key Insight:"})," Control towers transform supply chain management from reactive firefighting to proactive orchestration. By providing centralized visibility and real-time insights, they enable organizations to anticipate disruptions, optimize performance, and coordinate responses across complex, multi-tier supply networks. When integrated with digital twins, control towers become even more powerfulproviding both real-time monitoring and the ability to simulate response options before taking action in the physical world."]})})]})]})}const it=[{id:1,product:"Cotton T-Shirt",industry:"Textile & Apparel",tiers:[{id:0,name:"Tier 0: Final Assembly",description:"Garment manufacturing and finishing",example:"Garment factory in Bangladesh"},{id:1,name:"Tier 1: Direct Supplier",description:"Fabric supplier",example:"Textile mill in India"},{id:2,name:"Tier 2: Fabric Mill / Component Vendor",description:"Yarn spinning and dyeing",example:"Yarn spinning facility"},{id:3,name:"Tier 3: Raw-Material Processor",description:"Cotton ginning and processing",example:"Cotton gin in Uzbekistan"},{id:4,name:"Tier 4: Farm/Mine",description:"Cotton farming",example:"Cotton farms in Xinjiang, China"}],hardestTier:4,verificationDocuments:["Farm-level purchase receipts with GPS coordinates","Third-party certification (Better Cotton Initiative, Organic)","Transportation records linking farms to gins","Ginning facility audit reports","Batch tracking from farm to finished product"],redFlags:["Duplicate farm addresses across multiple suppliers","Missing batch IDs on cotton bales","Inconsistent harvest dates (e.g., cotton harvested in winter)","Farm locations in regions with known forced labor","No third-party verification of farm ownership","Gaps in transportation records between tiers"],explanation:"Tier 4 (farm level) is typically the hardest to trace because cotton comes from thousands of smallholder farms, often in remote areas with limited documentation. Verification requires farm-level receipts, GPS coordinates, and third-party certifications. Red flags include duplicate addresses, missing batch IDs, and inconsistent dates that suggest documentation fraud."},{id:2,product:"Smartphone",industry:"Electronics",tiers:[{id:0,name:"Tier 0: Final Assembly",description:"Device assembly and testing",example:"Assembly facility in China"},{id:1,name:"Tier 1: Direct Supplier",description:"Component manufacturers",example:"Battery, screen, processor suppliers"},{id:2,name:"Tier 2: Fabric Mill / Component Vendor",description:"Sub-component suppliers",example:"Semiconductor foundries, display panel makers"},{id:3,name:"Tier 3: Raw-Material Processor",description:"Mineral processing and refining",example:"Cobalt refineries, rare earth processors"},{id:4,name:"Tier 4: Farm/Mine",description:"Mining operations",example:"Cobalt mines in DRC, rare earth mines"}],hardestTier:4,verificationDocuments:["Mine site audit reports (RMI, CFSI)","Chain of custody documentation","Mineral origin certificates","Refinery processing records","Component-level batch tracking"],redFlags:["Mines located in conflict-affected regions without certification","Missing chain of custody between mine and refinery","Inconsistent mineral origin claims","No Responsible Minerals Initiative (RMI) certification","Refinery unable to trace mineral sources","Duplicate mine site addresses"],explanation:"Tier 4 (mine level) is hardest to trace due to artisanal and small-scale mining operations, complex supply chains, and conflict-affected regions. Verification requires mine site audits, chain of custody documentation, and certifications like RMI. Red flags include missing certifications, inconsistent origin claims, and inability to trace minerals through the supply chain."},{id:3,product:"Chocolate Bar",industry:"Food & Beverage",tiers:[{id:0,name:"Tier 0: Final Assembly",description:"Chocolate manufacturing and packaging",example:"Chocolate factory in Switzerland"},{id:1,name:"Tier 1: Direct Supplier",description:"Cocoa bean processors",example:"Cocoa processing facility"},{id:2,name:"Tier 2: Fabric Mill / Component Vendor",description:"Cocoa traders and aggregators",example:"Trading companies in West Africa"},{id:3,name:"Tier 3: Raw-Material Processor",description:"Cocoa fermentation and drying",example:"Fermentation facilities"},{id:4,name:"Tier 4: Farm/Mine",description:"Cocoa farming",example:"Smallholder cocoa farms in Cte d'Ivoire"}],hardestTier:4,verificationDocuments:["Farm-level GPS coordinates and farmer registration","Fair Trade or Rainforest Alliance certification","Cooperative membership records","Bean lot tracking from farm to processor","Third-party audit reports of farming practices"],redFlags:["Farms in regions with documented child labor","Missing farmer registration or GPS coordinates","Inconsistent harvest dates or volumes","No certification or unable to verify certification claims","Gaps in bean lot tracking","Cooperative unable to identify individual farms"],explanation:"Tier 4 (farm level) is hardest to trace because cocoa comes from thousands of smallholder farms (often less than 2 hectares), with limited documentation and infrastructure. Verification requires farmer registration, GPS coordinates, certifications, and lot tracking. Red flags include farms in high-risk regions, missing documentation, and inability to verify certifications."}];function Fx(){const[a,r]=M.useState(0),[s,o]=M.useState(null),[c,u]=M.useState([]),[h,p]=M.useState([]),[m,y]=M.useState(!1),[v,b]=M.useState(0),[_,w]=M.useState([]),x=it[a],k=_.length===it.length,N=U=>{c.includes(U)?u(c.filter(D=>D!==U)):u([...c,U])},P=U=>{h.includes(U)?p(h.filter(D=>D!==U)):p([...h,U])},$=()=>{y(!0);let U=0;s===x.hardestTier&&(U+=1),c.length===x.verificationDocuments.length&&(U+=1),h.length===x.redFlags.length&&(U+=1),b(v+U),_.includes(x.id)||w([..._,x.id])},C=()=>{a<it.length-1&&(r(a+1),o(null),u([]),p([]),y(!1))},R=()=>{a>0&&(r(a-1),o(null),u([]),p([]),y(!1))},F=()=>{r(0),o(null),u([]),p([]),y(!1),b(0),w([])};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(km,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Supply Chain Mapping Exercise"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[n.jsx(rt,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-['Outfit']",children:["Score: ",v,"/",it.length*3]})]})]}),n.jsx("p",{className:"m-0 text-green-100",children:"Practice mapping multi-tier supply chains and identifying traceability challenges"})]}),n.jsxs("div",{className:"bg-gray-100 px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Scenario ",a+1," of ",it.length]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[_.length," completed"]})]}),n.jsx("div",{className:"w-full bg-gray-300 rounded-full h-2",children:n.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${(a+1)/it.length*100}%`}})})]}),n.jsx("div",{className:"p-8",children:k?n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full ${v>=it.length*2?"bg-green-100":v>=it.length?"bg-yellow-100":"bg-red-100"} mb-4`,children:n.jsx("span",{className:`text-4xl ${v>=it.length*2?"text-green-700":v>=it.length?"text-yellow-700":"text-red-700"}`,children:v>=it.length*2?"":v>=it.length?"":""})}),n.jsx("h2",{className:"mt-0 mb-2",children:"Mapping Exercise Complete!"}),n.jsxs("p",{className:"text-xl text-gray-600 mb-6",children:["You scored ",n.jsxs("strong",{className:"text-green-600",children:[v," out of ",it.length*3]})]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-8 text-left max-w-2xl mx-auto",children:[n.jsx("h3",{className:"mt-0 mb-4",children:"Key Takeaways:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-0 text-sm",children:[n.jsx("li",{children:"Tier 4 (farm/mine level) is typically the hardest to trace due to scale and documentation challenges"}),n.jsx("li",{children:"Verification requires multiple documents: certifications, GPS coordinates, batch tracking, and audit reports"}),n.jsx("li",{children:"Red flags include duplicate addresses, missing batch IDs, inconsistent dates, and gaps in documentation"}),n.jsx("li",{children:"Building supplier capability in mapping helps identify and mitigate multi-tier risks"}),n.jsx("li",{children:"Technology solutions (blockchain, IoT, RFID) can help but require proper implementation"}),n.jsx("li",{children:"Transparency builds trust and enables proactive risk management"})]})]}),n.jsx("div",{className:"flex gap-4 justify-center",children:n.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-['Outfit']",children:[n.jsx(Is,{className:"w-4 h-4"}),"Try Again"]})})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-6 pb-6 border-b-2 border-gray-200",children:n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"mt-0 mb-2",children:x.product}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(_m,{className:"w-4 h-4"}),n.jsx("span",{children:x.industry})]})]}),n.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-lg text-sm font-['Outfit']",children:"Mapping Exercise"})]})}),n.jsxs("div",{className:"mb-6 bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[n.jsx("h4",{className:"mt-0 mb-3 text-blue-900",children:"Supply Chain Tiers"}),n.jsx("div",{className:"space-y-2",children:x.tiers.map(U=>n.jsxs("div",{className:"bg-white rounded p-3 border border-blue-200",children:[n.jsx("div",{className:"font-semibold text-sm text-blue-900 mb-1",children:U.name}),n.jsx("div",{className:"text-xs text-gray-700 mb-1",children:U.description}),n.jsxs("div",{className:"text-xs text-gray-600 italic",children:["Example: ",U.example]})]},U.id))})]}),n.jsxs("div",{className:"mb-6 bg-indigo-50 rounded-xl p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-indigo-900",children:"Which tier is hardest to trace? Why?"}),n.jsx("div",{className:"space-y-2",children:x.tiers.map(U=>n.jsx("button",{onClick:()=>o(U.id),disabled:m,className:`w-full text-left p-4 rounded-lg border-2 transition-colors font-['Outfit'] ${s===U.id?"border-indigo-600 bg-indigo-100":"border-gray-300 bg-white hover:border-indigo-400"} ${m?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:U.name},U.id))}),m&&n.jsxs("div",{className:`mt-4 p-4 rounded-lg ${s===x.hardestTier?"bg-green-100 border-2 border-green-500":"bg-red-100 border-2 border-red-500"}`,children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:s===x.hardestTier?n.jsxs(n.Fragment,{children:[n.jsx(rt,{className:"w-5 h-5 text-green-700"}),n.jsx("span",{className:"font-semibold text-green-900",children:"Correct!"})]}):n.jsxs(n.Fragment,{children:[n.jsx(In,{className:"w-5 h-5 text-red-700"}),n.jsx("span",{className:"font-semibold text-red-900",children:"Incorrect"})]})}),n.jsxs("p",{className:"text-sm text-gray-800 m-0",children:[n.jsx("strong",{children:"Correct answer:"})," ",x.tiers.find(U=>U.id===x.hardestTier)?.name]})]})]}),n.jsxs("div",{className:"mb-6 bg-purple-50 rounded-xl p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-purple-900",children:"Which documents verify Tier-2 authenticity? (Select all that apply)"}),n.jsx("div",{className:"space-y-2",children:x.verificationDocuments.map((U,D)=>n.jsx("button",{onClick:()=>N(D),disabled:m,className:`w-full text-left p-3 rounded-lg border-2 transition-colors text-sm ${c.includes(D)?"border-purple-600 bg-purple-100":"border-gray-300 bg-white hover:border-purple-400"} ${m?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[c.includes(D)&&n.jsx(rt,{className:"w-4 h-4 text-purple-600 flex-shrink-0"}),n.jsx("span",{children:U})]})},D))}),m&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("p",{className:"text-sm text-gray-800 m-0",children:[n.jsx("strong",{children:"All documents listed are important for verification."})," These documents help establish chain of custody and verify the authenticity of materials moving through Tier 2."]})})]}),n.jsxs("div",{className:"mb-6 bg-amber-50 rounded-xl p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-amber-900",children:"What red flags might appear? (Select all that apply)"}),n.jsx("div",{className:"space-y-2",children:x.redFlags.map((U,D)=>n.jsx("button",{onClick:()=>P(D),disabled:m,className:`w-full text-left p-3 rounded-lg border-2 transition-colors text-sm ${h.includes(D)?"border-amber-600 bg-amber-100":"border-gray-300 bg-white hover:border-amber-400"} ${m?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[h.includes(D)&&n.jsx(In,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),n.jsx("span",{children:U})]})},D))}),m&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("p",{className:"text-sm text-gray-800 m-0",children:[n.jsx("strong",{children:"All items listed are potential red flags."})," These indicate documentation fraud, traceability gaps, or compliance issues that require investigation."]})})]}),m&&n.jsxs("div",{className:"mb-6 bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-900",children:"Explanation"}),n.jsx("p",{className:"text-sm text-indigo-800 m-0",children:x.explanation})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[n.jsxs("button",{onClick:R,disabled:a===0,className:"flex items-center gap-2 px-6 py-3 rounded-lg border-2 border-gray-300 hover:border-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:[n.jsx(Mn,{className:"w-4 h-4"}),"Previous"]}),m?n.jsxs("button",{onClick:C,disabled:a===it.length-1,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:[a===it.length-1?"View Results ":"Next Scenario ",n.jsx(la,{className:"w-4 h-4"})]}):n.jsx("button",{onClick:$,disabled:s===null||c.length===0||h.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:"Submit Answers"})]})]})})]})}const er=[{id:1,title:"High Water Usage Alert at Textile Facility",description:"Your IoT environmental sensors detect unusually high water consumption at a Tier 2 textile mill in India. Simultaneously, Ulula worker feedback indicates concerns about water quality and availability affecting local communities.",ululaData:{workerConcerns:["Workers report water quality issues affecting local community","Concerns about water scarcity during dry season","Requests for water conservation measures"],complianceScore:65,riskLevel:"high"},iotData:{emissions:120,waterUsage:850,energyConsumption:320,alerts:["Water usage 40% above baseline","Water quality sensors showing elevated contaminants","Community water source levels declining"]},options:[{id:1,text:"Immediately halt production until water usage returns to normal",description:"Stop all operations to address the issue immediately",impact:{workerSatisfaction:3,environmentalScore:4,cost:2,ecoVadisRating:"good"},correct:!1},{id:2,text:"Engage with facility management and local community to implement water recycling system",description:"Work with stakeholders to install water treatment and recycling infrastructure",impact:{workerSatisfaction:5,environmentalScore:5,cost:3,ecoVadisRating:"excellent"},correct:!0},{id:3,text:"Ignore the alerts as they may be sensor malfunctions",description:"Assume the IoT sensors are providing false readings",impact:{workerSatisfaction:1,environmentalScore:1,cost:5,ecoVadisRating:"poor"},correct:!1},{id:4,text:"Request a report from the facility but take no immediate action",description:"Ask for documentation but delay response",impact:{workerSatisfaction:2,environmentalScore:2,cost:4,ecoVadisRating:"fair"},correct:!1}],explanation:"The correct approach combines IoT data with worker voice data from Ulula. Engaging with facility management and the local community to implement water recycling addresses both environmental concerns (IoT alerts) and social concerns (worker feedback). This proactive, collaborative approach demonstrates strong sustainability management and would result in an excellent EcoVadis rating. Ignoring alerts or delaying action would harm both environmental performance and worker relations."},{id:2,title:"Worker Safety Concerns with Normal Environmental Metrics",description:"Ulula reports indicate worker safety concerns at a manufacturing facility, but IoT environmental sensors show normal emissions, energy, and water usage. The facility appears environmentally compliant but has social compliance issues.",ululaData:{workerConcerns:["Workers report inadequate safety equipment","Concerns about emergency evacuation procedures","Requests for safety training programs"],complianceScore:55,riskLevel:"high"},iotData:{emissions:95,waterUsage:100,energyConsumption:98,alerts:["All environmental metrics within normal range","No environmental alerts detected"]},options:[{id:1,text:"Focus only on environmental metrics since they're normal",description:"Prioritize environmental performance over worker concerns",impact:{workerSatisfaction:1,environmentalScore:4,cost:4,ecoVadisRating:"poor"},correct:!1},{id:2,text:"Conduct immediate safety audit and implement corrective actions based on worker feedback",description:"Address worker safety concerns proactively using Ulula data",impact:{workerSatisfaction:5,environmentalScore:4,cost:3,ecoVadisRating:"excellent"},correct:!0},{id:3,text:"Wait for annual audit to address safety issues",description:"Defer action until scheduled compliance audit",impact:{workerSatisfaction:2,environmentalScore:4,cost:4,ecoVadisRating:"fair"},correct:!1},{id:4,text:"Request facility to investigate but take no further action",description:"Ask facility to look into concerns without follow-up",impact:{workerSatisfaction:2,environmentalScore:4,cost:4,ecoVadisRating:"fair"},correct:!1}],explanation:"EcoVadis evaluates both environmental AND social performance. Even when environmental metrics are normal, worker safety concerns from Ulula require immediate attention. Conducting a safety audit and implementing corrective actions demonstrates strong social responsibility and would result in an excellent EcoVadis rating. Ignoring worker concerns because environmental metrics are good would result in poor social performance ratings."},{id:3,title:"Spike in Emissions with Worker Productivity Concerns",description:"IoT sensors detect a sudden spike in emissions at a production facility. Ulula data shows workers reporting increased production pressure and concerns about work-life balance. The facility is trying to meet a tight deadline.",ululaData:{workerConcerns:["Workers report excessive overtime requirements","Concerns about work-life balance","Requests for better production planning"],complianceScore:60,riskLevel:"medium"},iotData:{emissions:180,waterUsage:110,energyConsumption:150,alerts:["Emissions 80% above baseline","Energy consumption significantly elevated","Pattern suggests extended operating hours"]},options:[{id:1,text:"Demand immediate production reduction to lower emissions",description:"Force facility to cut production to meet environmental targets",impact:{workerSatisfaction:2,environmentalScore:4,cost:2,ecoVadisRating:"fair"},correct:!1},{id:2,text:"Work with facility to optimize production schedule and improve efficiency to address both emissions and worker concerns",description:"Collaborate on better planning and efficiency improvements",impact:{workerSatisfaction:4,environmentalScore:5,cost:3,ecoVadisRating:"excellent"},correct:!0},{id:3,text:"Accept the temporary spike as necessary to meet deadlines",description:"Allow elevated emissions and worker stress for business needs",impact:{workerSatisfaction:2,environmentalScore:2,cost:4,ecoVadisRating:"poor"},correct:!1},{id:4,text:"Focus only on emissions reduction, ignore worker concerns",description:"Address environmental issues without considering social impact",impact:{workerSatisfaction:2,environmentalScore:4,cost:3,ecoVadisRating:"fair"},correct:!1}],explanation:"The best approach integrates both IoT environmental data and Ulula worker feedback. Working collaboratively with the facility to optimize production schedules and improve efficiency addresses emissions (IoT data) while also reducing worker stress (Ulula data). This holistic approach balances environmental and social performance, resulting in an excellent EcoVadis rating. Focusing on only one dimension or accepting poor performance would result in lower ratings."}];function Bx(){const[a,r]=M.useState(0),[s,o]=M.useState(null),[c,u]=M.useState(!1),[h,p]=M.useState(0),[m,y]=M.useState([]),v=er[a],b=m.length===er.length,_=$=>{o($)},w=()=>{u(!0),s&&v.options.find($=>$.id===s)?.correct&&p(h+1),m.includes(v.id)||y([...m,v.id])},x=()=>{a<er.length-1&&(r(a+1),o(null),u(!1))},k=()=>{a>0&&(r(a-1),o(null),u(!1))},N=()=>{r(0),o(null),u(!1),p(0),y([])},P=s?v.options.find($=>$.id===s):null;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(bm,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Monitoring Simulation Game"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[n.jsx(Sm,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-['Outfit']",children:["Score: ",h,"/",er.length]})]})]}),n.jsx("p",{className:"m-0 text-orange-100",children:"Make decisions based on Ulula worker data and Environmental IoT device alerts"})]}),n.jsxs("div",{className:"bg-gray-100 px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Scenario ",a+1," of ",er.length]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[m.length," completed"]})]}),n.jsx("div",{className:"w-full bg-gray-300 rounded-full h-2",children:n.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${(a+1)/er.length*100}%`}})})]}),n.jsx("div",{className:"p-8",children:b?n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full ${h>=2?"bg-green-100":h>=1?"bg-yellow-100":"bg-red-100"} mb-4`,children:n.jsx("span",{className:`text-4xl ${h>=2?"text-green-700":h>=1?"text-yellow-700":"text-red-700"}`,children:h>=2?"":h>=1?"":""})}),n.jsx("h2",{className:"mt-0 mb-2",children:"Simulation Complete!"}),n.jsxs("p",{className:"text-xl text-gray-600 mb-6",children:["You scored ",n.jsxs("strong",{className:"text-orange-600",children:[h," out of ",er.length]})]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-8 text-left max-w-2xl mx-auto",children:[n.jsx("h3",{className:"mt-0 mb-4",children:"Key Takeaways:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-0 text-sm",children:[n.jsx("li",{children:"Effective supply chain management requires integrating both environmental (IoT) and social (Ulula) data"}),n.jsx("li",{children:"EcoVadis evaluates both environmental AND social performance - both matter equally"}),n.jsx("li",{children:"Proactive, collaborative approaches with facilities yield better results than reactive or punitive measures"}),n.jsx("li",{children:"Worker voice data from Ulula provides critical insights that IoT sensors cannot detect"}),n.jsx("li",{children:"Environmental IoT devices and worker feedback systems complement each other for comprehensive monitoring"}),n.jsx("li",{children:"Best decisions balance environmental, social, and business objectives"})]})]}),n.jsx("div",{className:"flex gap-4 justify-center",children:n.jsx("button",{onClick:N,className:"px-8 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-['Outfit']",children:"Try Again"})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 pb-6 border-b-2 border-gray-200",children:[n.jsx("h3",{className:"mt-0 mb-3",children:v.title}),n.jsx("p",{className:"text-gray-700 mb-0",children:v.description})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(uc,{className:"w-5 h-5 text-blue-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-blue-900",children:"Ulula Worker Data"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Compliance Score:"}),n.jsxs("span",{className:`font-semibold ${v.ululaData.complianceScore>=80?"text-green-600":v.ululaData.complianceScore>=60?"text-yellow-600":"text-red-600"}`,children:[v.ululaData.complianceScore,"/100"]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Risk Level:"}),n.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${v.ululaData.riskLevel==="high"?"bg-red-100 text-red-800":v.ululaData.riskLevel==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:v.ululaData.riskLevel.toUpperCase()})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Worker Concerns:"}),n.jsx("ul",{className:"list-disc pl-5 space-y-1 mb-0",children:v.ululaData.workerConcerns.map(($,C)=>n.jsx("li",{className:"text-xs text-blue-800",children:$},C))})]})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Sa,{className:"w-5 h-5 text-green-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-green-900",children:"Environmental IoT Data"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Emissions"}),n.jsxs("div",{className:"text-lg font-semibold text-green-700",children:[v.iotData.emissions,"%"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Water"}),n.jsxs("div",{className:"text-lg font-semibold text-green-700",children:[v.iotData.waterUsage,"%"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Energy"}),n.jsxs("div",{className:"text-lg font-semibold text-green-700",children:[v.iotData.energyConsumption,"%"]})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-sm font-semibold text-green-900 mb-2",children:"Alerts:"}),n.jsx("ul",{className:"list-disc pl-5 space-y-1 mb-0",children:v.iotData.alerts.map(($,C)=>n.jsx("li",{className:"text-xs text-green-800",children:$},C))})]})]})]}),n.jsxs("div",{className:"mb-6 bg-indigo-50 rounded-xl p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-indigo-900",children:"How will you address this issue? (Your decision will be evaluated on EcoVadis)"}),n.jsx("div",{className:"space-y-3",children:v.options.map($=>n.jsx("button",{onClick:()=>_($.id),disabled:c,className:`w-full text-left p-4 rounded-lg border-2 transition-colors ${s===$.id?"border-indigo-600 bg-indigo-100":"border-gray-300 bg-white hover:border-indigo-400"} ${c?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 mt-0.5 ${s===$.id?"border-indigo-600 bg-indigo-600":"border-gray-400"}`,children:s===$.id&&n.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-sm mb-1",children:$.text}),n.jsx("div",{className:"text-xs text-gray-600",children:$.description})]})]})},$.id))})]}),c&&P&&n.jsxs("div",{className:`mb-6 p-6 rounded-lg border-2 ${P.correct?"bg-green-100 border-green-500":"bg-red-100 border-red-500"}`,children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:P.correct?n.jsxs(n.Fragment,{children:[n.jsx(rt,{className:"w-6 h-6 text-green-700"}),n.jsx("h4",{className:"mt-0 mb-0 text-green-900",children:"Correct Decision!"})]}):n.jsxs(n.Fragment,{children:[n.jsx(In,{className:"w-6 h-6 text-red-700"}),n.jsx("h4",{className:"mt-0 mb-0 text-red-900",children:"Incorrect Decision"})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Expected Impact:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{children:["Worker Satisfaction: ",P.impact.workerSatisfaction,"/5"]}),n.jsxs("div",{children:["Environmental Score: ",P.impact.environmentalScore,"/5"]}),n.jsxs("div",{children:["Cost Impact: ",P.impact.cost,"/5"]}),n.jsxs("div",{children:["EcoVadis Rating: ",n.jsx("span",{className:"font-semibold capitalize",children:P.impact.ecoVadisRating})]})]})]}),n.jsxs("div",{className:"bg-white/50 rounded p-4",children:[n.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Explanation:"}),n.jsx("p",{className:"text-sm text-gray-800 m-0",children:v.explanation})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[n.jsx("button",{onClick:k,disabled:a===0,className:"flex items-center gap-2 px-6 py-3 rounded-lg border-2 border-gray-300 hover:border-orange-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:" Previous"}),c?n.jsx("button",{onClick:x,disabled:a===er.length-1,className:"flex items-center gap-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:a===er.length-1?"View Results ":"Next Scenario "}):n.jsx("button",{onClick:w,disabled:s===null,className:"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit']",children:"Submit Decision"})]})]})})]})}function Vx(){const[a,r]=M.useState([]),[s,o]=M.useState("map"),c=[{id:1,name:"Textile Manufacturing Facility",location:"Dhaka, Bangladesh",coordinates:{lat:23.8103,lng:90.4125},riskLevel:"high",riskFactors:["Located in high-risk region for labor violations","Recent adverse media reports","No recent third-party audit"],inspectionPriority:"high",notes:"Requires immediate on-site inspection based on geospatial risk analysis"},{id:2,name:"Electronics Assembly Plant",location:"Penang, Malaysia",coordinates:{lat:5.4164,lng:100.3327},riskLevel:"medium",riskFactors:["Moderate risk region","Has RBA certification","Some worker concerns reported"],inspectionPriority:"medium",notes:"Schedule audit within next quarter"},{id:3,name:"Agricultural Processing Facility",location:"Abidjan, Cte d'Ivoire",coordinates:{lat:5.36,lng:-4.0083},riskLevel:"high",riskFactors:["High-risk commodity (cocoa)","Region with documented child labor issues","Limited traceability documentation"],inspectionPriority:"high",notes:"Critical: Verify farm-level traceability and labor practices"},{id:4,name:"Mining Operation",location:"Kolwezi, DRC",coordinates:{lat:-10.7167,lng:25.4667},riskLevel:"high",riskFactors:["Conflict-affected region","High-risk commodity (cobalt)","No RMI certification"],inspectionPriority:"high",notes:"Requires conflict minerals due diligence and certification"},{id:5,name:"Garment Factory",location:"Phnom Penh, Cambodia",coordinates:{lat:11.5564,lng:104.9282},riskLevel:"medium",riskFactors:["Moderate risk region","Accord certified","Minor compliance issues reported"],inspectionPriority:"medium",notes:"Monitor for improvement, schedule follow-up audit"}],u=m=>{a.find(y=>y.id===m.id)?r(a.filter(y=>y.id!==m.id)):r([...a,m])},h=m=>{switch(m){case"high":return"bg-red-100 text-red-800 border-red-500";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-500";case"low":return"bg-green-100 text-green-800 border-green-500";default:return"bg-gray-100 text-gray-800 border-gray-500"}},p=m=>{switch(m){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Wh,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Interactive Geospatial Mapping Activity"})]}),n.jsx("p",{className:"m-0 text-emerald-100",children:"Explore a 3D globe to visualize geospatial mapping functions and create a scorecard of sites needing inspection"})]}),n.jsx("div",{className:"bg-gray-100 px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>o("map"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors font-['Outfit'] ${s==="map"?"bg-emerald-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[n.jsx(Wh,{className:"w-4 h-4"}),"Map View"]}),n.jsxs("button",{onClick:()=>o("scorecard"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors font-['Outfit'] ${s==="scorecard"?"bg-emerald-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[n.jsx(_m,{className:"w-4 h-4"}),"Scorecard (",a.length,")"]})]})}),n.jsxs("div",{className:"p-8",children:[s==="map"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-900",children:"How to Use This Activity:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1 mb-0 text-sm text-blue-800",children:[n.jsx("li",{children:"Scroll through the 3D globe below to visualize geospatial mapping functions"}),n.jsx("li",{children:"Select areas, regions, or sites you want to simulate"}),n.jsx("li",{children:"Click on sites to add them to your inspection scorecard"}),n.jsx("li",{children:"Switch to Scorecard view to review selected sites and prioritize inspections"}),n.jsx("li",{children:"Use geospatial data to identify high-risk regions and facilities"})]})]}),n.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg mb-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-inner overflow-hidden",style:{height:"600px"},children:n.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.184132038576!2d-73.98811768459398!3d40.75889597932681!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c25855c6480299%3A0x55194ec5a1ae072e!2sTimes%20Square!5e0!3m2!1sen!2sus!4v1234567890123!5m2!1sen!2sus",title:"Interactive Geospatial Mapping - 3D Globe",className:"w-full h-full border-0",allow:"geolocation",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-3 mb-0 text-center",children:"Interactive Google Maps/Google Earth interface for geospatial exploration"})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-indigo-900",children:"Select Sites for Inspection Scorecard"}),n.jsx("div",{className:"space-y-3",children:c.map(m=>{const y=a.find(v=>v.id===m.id);return n.jsx("button",{onClick:()=>u(m),className:`w-full text-left p-4 rounded-lg border-2 transition-colors ${y?"border-emerald-600 bg-emerald-50":"border-gray-300 bg-white hover:border-emerald-400"}`,children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Zl,{className:"w-4 h-4 text-emerald-600"}),n.jsx("h4",{className:"mt-0 mb-0 text-sm font-semibold",children:m.name}),y&&n.jsx(rt,{className:"w-5 h-5 text-emerald-600 flex-shrink-0"})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:m.location}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold border ${h(m.riskLevel)}`,children:[m.riskLevel.toUpperCase()," RISK"]}),n.jsxs("span",{className:`text-xs font-semibold ${p(m.inspectionPriority)}`,children:["Priority: ",m.inspectionPriority.toUpperCase()]})]}),n.jsx("ul",{className:"list-disc pl-5 space-y-1 mb-0",children:m.riskFactors.map((v,b)=>n.jsx("li",{className:"text-xs text-gray-700",children:v},b))})]})})},m.id)})})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 bg-emerald-50 border-l-4 border-emerald-500 p-4 rounded",children:[n.jsx("h3",{className:"mt-0 mb-2 text-emerald-900",children:"Inspection Scorecard"}),n.jsx("p",{className:"text-sm text-emerald-800 m-0",children:"Review selected sites and prioritize inspections based on geospatial risk analysis. High-priority sites require immediate attention."})]}),a.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[n.jsx(Pn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-0",children:"No sites selected yet. Go to Map View to select sites for inspection."})]}):n.jsxs("div",{className:"space-y-4",children:[[...a].sort((m,y)=>{const v={high:3,medium:2,low:1};return v[y.inspectionPriority]-v[m.inspectionPriority]}).map(m=>n.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Zl,{className:"w-5 h-5 text-emerald-600"}),n.jsx("h4",{className:"mt-0 mb-0",children:m.name})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.location}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsxs("span",{className:`px-3 py-1 rounded text-sm font-semibold border ${h(m.riskLevel)}`,children:[m.riskLevel.toUpperCase()," RISK"]}),n.jsxs("span",{className:`text-sm font-semibold ${p(m.inspectionPriority)}`,children:["Inspection Priority: ",m.inspectionPriority.toUpperCase()]})]})]}),n.jsx("button",{onClick:()=>u(m),className:"text-red-600 hover:text-red-700 p-2",title:"Remove from scorecard",children:n.jsx(In,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Risk Factors:"}),n.jsx("ul",{className:"list-disc pl-5 space-y-1 mb-0",children:m.riskFactors.map((y,v)=>n.jsx("li",{className:"text-sm text-gray-700",children:y},v))})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-3 border-l-4 border-blue-500",children:[n.jsx("h5",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Inspection Notes:"}),n.jsx("p",{className:"text-sm text-blue-800 m-0",children:m.notes})]})]},m.id)),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-6 border border-emerald-200",children:[n.jsx("h4",{className:"mt-0 mb-4 text-emerald-900",children:"Scorecard Summary"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:a.length}),n.jsx("div",{className:"text-xs text-gray-600",children:"Total Sites"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-700",children:a.filter(m=>m.inspectionPriority==="high").length}),n.jsx("div",{className:"text-xs text-gray-600",children:"High Priority"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:a.filter(m=>m.riskLevel==="high").length}),n.jsx("div",{className:"text-xs text-gray-600",children:"High Risk"})]})]})]})]})]}),n.jsxs("div",{className:"mt-8 bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Pn,{className:"w-6 h-6 text-indigo-600"}),n.jsx("h3",{className:"mt-0 mb-0 text-indigo-900",children:"Geospatial Mapping Applications"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700",children:"Key Benefits:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Visualize supply chain geography and identify high-risk regions"}),n.jsx("li",{children:"Prioritize inspections based on geospatial risk analysis"}),n.jsx("li",{children:"Track supplier locations and monitor regional risks"}),n.jsx("li",{children:"Identify clusters of facilities requiring attention"}),n.jsx("li",{children:"Plan efficient audit routes and inspection schedules"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700",children:"Use Cases:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Mapping supplier facilities across global supply chains"}),n.jsx("li",{children:"Identifying high-risk regions for targeted monitoring"}),n.jsx("li",{children:"Creating inspection scorecards based on location and risk"}),n.jsx("li",{children:"Visualizing deforestation or environmental impacts"}),n.jsx("li",{children:"Planning sustainable sourcing strategies by geography"})]})]})]})]})]})]})}const Nn=[{id:1,question:"Do you have a complete Tier-1 supplier list?"},{id:2,question:"Can you trace high-risk materials to Tier-2 or Tier-3 sources?"},{id:3,question:"Do you conduct spot-checks on critical raw-material origins?"},{id:4,question:"Do you disclose subcontractors and validate their compliance?"},{id:5,question:"Do you check for red flags (duplicate paperwork, missing batch IDs)?"},{id:6,question:"Do you screen suppliers using UFLPA?"}];function qx(){const[a,r]=M.useState([]),[s,o]=M.useState(!1),c=x=>{a.includes(x)?r(a.filter(k=>k!==x)):r([...a,x])},u=()=>Nn.length===0?0:Math.round(a.length/Nn.length*100),h=x=>x>=80?"advanced":x>=50?"developing":"foundational",p=x=>{switch(x){case"advanced":return{title:"Advanced",description:"Eligible for Google Recognition Certificate",color:"from-green-600 to-emerald-600",bgColor:"bg-green-50",borderColor:"border-green-500",textColor:"text-green-800",icon:iv,passing:!0};case"developing":return{title:"Developing",description:"Requires an Action Plan",color:"from-yellow-600 to-amber-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-500",textColor:"text-yellow-800",icon:ka,passing:!0};case"foundational":return{title:"Foundational",description:"Mandatory follow-up training",color:"from-red-600 to-orange-600",bgColor:"bg-red-50",borderColor:"border-red-500",textColor:"text-red-800",icon:In,passing:!1};default:return{title:"Unknown",description:"",color:"from-gray-600 to-gray-700",bgColor:"bg-gray-50",borderColor:"border-gray-500",textColor:"text-gray-800",icon:Vt,passing:!1}}},m=()=>{o(!0)},y=()=>{r([]),o(!1)},v=u(),b=h(v),_=p(b),w=_.icon;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Vt,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Transparency & Traceability Self-Assessment Checklist"})]}),n.jsx("p",{className:"m-0 text-blue-100",children:"Evaluate your organization's transparency and traceability practices. Complete the checklist to receive your maturity score and recommendations."})]}),n.jsxs("div",{className:"p-8",children:[s?n.jsxs("div",{children:[n.jsx("div",{className:"text-center mb-8",children:n.jsxs("div",{className:`inline-block bg-gradient-to-r ${_.color} text-white rounded-full px-8 py-4 mb-4 shadow-lg`,children:[n.jsxs("div",{className:"text-5xl font-bold mb-2",children:[v,"%"]}),n.jsx("div",{className:"text-lg",children:"Maturity Score"})]})}),n.jsx("div",{className:`mb-6 ${_.bgColor} border-l-4 ${_.borderColor} rounded-lg p-6`,children:n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(w,{className:`w-8 h-8 ${_.textColor}`}),n.jsxs("div",{children:[n.jsx("h3",{className:`mt-0 mb-1 ${_.textColor} text-2xl font-bold`,children:_.title}),n.jsx("p",{className:`m-0 ${_.textColor} font-semibold`,children:_.description})]})]})}),n.jsx("div",{className:`mb-6 p-6 rounded-lg border-2 ${_.passing?"bg-green-50 border-green-500":"bg-red-50 border-red-500"}`,children:n.jsx("div",{className:"flex items-center gap-3",children:_.passing?n.jsxs(n.Fragment,{children:[n.jsx(rt,{className:"w-8 h-8 text-green-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-1 text-green-900 font-bold text-lg",children:"Status: Passing"}),n.jsxs("p",{className:"m-0 text-green-800",children:["Your organization meets the minimum requirements for transparency and traceability practices.",b==="advanced"&&" Congratulations on achieving advanced maturity!"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-8 h-8 text-red-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-1 text-red-900 font-bold text-lg",children:"Status: Not Passing"}),n.jsx("p",{className:"m-0 text-red-800",children:"Your organization needs to improve transparency and traceability practices. Follow-up training is required to reach minimum standards."})]})]})})}),n.jsxs("div",{className:"mb-6 bg-indigo-50 border-l-4 border-indigo-500 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Pn,{className:"w-6 h-6 text-indigo-600"}),n.jsx("h3",{className:"mt-0 mb-0 text-indigo-900",children:"Recommendations"})]}),b==="advanced"?n.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-0 text-sm text-indigo-800",children:[n.jsx("li",{children:"Maintain your current practices and continue monitoring for continuous improvement"}),n.jsx("li",{children:"Consider applying for the Google Recognition Certificate to showcase your commitment"}),n.jsx("li",{children:"Share best practices with your supply chain partners to raise industry standards"}),n.jsx("li",{children:"Explore deeper traceability for additional high-risk materials or regions"})]}):b==="developing"?n.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-0 text-sm text-indigo-800",children:[n.jsx("li",{children:"Develop a comprehensive action plan to address gaps in your transparency and traceability practices"}),n.jsx("li",{children:"Prioritize implementing Tier-2 and Tier-3 traceability for high-risk materials"}),n.jsx("li",{children:"Establish regular spot-check procedures for critical raw-material origins"}),n.jsx("li",{children:"Implement red flag detection systems for documentation verification"}),n.jsx("li",{children:"Set up UFLPA screening processes for all suppliers"})]}):n.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-0 text-sm text-indigo-800",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Mandatory:"})," Complete follow-up training on transparency and traceability fundamentals"]}),n.jsx("li",{children:"Start by creating a complete Tier-1 supplier list if you don't have one"}),n.jsx("li",{children:"Begin implementing basic traceability for your highest-risk materials"}),n.jsx("li",{children:"Establish documentation verification processes to catch red flags"}),n.jsx("li",{children:"Develop a roadmap to reach developing maturity level (50%+)"}),n.jsx("li",{children:"Consider working with a consultant or using compliance tools to accelerate progress"})]})]}),n.jsxs("div",{className:"mb-6 bg-gray-50 rounded-lg p-6",children:[n.jsx("h4",{className:"mt-0 mb-4 text-gray-900",children:"Scoring Breakdown"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Items Checked"}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[a.length," / ",Nn.length]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Percentage Score"}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[v,"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Maturity Level"}),n.jsx("span",{className:`font-semibold ${_.textColor}`,children:_.title})]})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:y,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Retake Assessment"})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-900",children:"How to Use This Checklist:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1 mb-0 text-sm text-blue-800",children:[n.jsx("li",{children:"Review each question and check all items that apply to your organization"}),n.jsx("li",{children:"Be honest in your assessment - this helps identify areas for improvement"}),n.jsx("li",{children:"Your score will be calculated as a percentage based on checked items"}),n.jsx("li",{children:"You'll receive a maturity level and specific recommendations based on your score"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded-t-lg",children:n.jsx("h3",{className:"mt-0 mb-0 text-center font-semibold",children:"Checklist"})}),n.jsx("div",{className:"border-2 border-dashed border-green-500 rounded-b-lg p-6 bg-white",children:n.jsx("div",{className:"space-y-4",children:Nn.map((x,k)=>{const N=a.includes(x.id);return n.jsx("button",{onClick:()=>c(x.id),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${N?"border-green-600 bg-green-50":"border-gray-300 bg-white hover:border-green-400 hover:bg-green-50"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${N?"bg-green-600 border-green-600":"bg-white border-gray-400"}`,children:N?n.jsx(rt,{className:"w-5 h-5 text-white"}):n.jsx("span",{className:"text-gray-600 font-semibold",children:k+1})}),n.jsx("span",{className:`flex-1 ${N?"text-green-800 font-semibold":"text-gray-700"}`,children:x.question})]})},x.id)})})})]}),n.jsxs("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Progress"}),n.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[a.length," of ",Nn.length," items checked"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-300",style:{width:`${a.length/Nn.length*100}%`}})})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:m,disabled:a.length===0,className:`px-8 py-3 rounded-lg font-semibold transition-all ${a.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 shadow-lg"}`,children:"Calculate Score & Get Results"})})]}),n.jsxs("div",{className:"mt-8 bg-blue-50 border-l-4 border-blue-500 p-6 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Pn,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"mt-0 mb-0 text-blue-900",children:"Understanding Transparency & Traceability Maturity"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:"Maturity Levels:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Advanced (80-100%):"})," Eligible for Google Recognition Certificate"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Developing (50-79%):"})," Requires an Action Plan"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Foundational (<50%):"})," Mandatory follow-up training"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-700",children:"Key Practices:"}),n.jsxs("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Maintain complete supplier lists and documentation"}),n.jsx("li",{children:"Trace high-risk materials to source"}),n.jsx("li",{children:"Conduct regular spot-checks and validations"}),n.jsx("li",{children:"Screen for compliance with regulations like UFLPA"})]})]})]})]})]})]})}const Yh=[{id:"tshirt",name:"Cotton T-Shirt",category:"Textile & Apparel",icon:Es},{id:"smartphone",name:"Smartphone",category:"Electronics",icon:Es},{id:"chocolate",name:"Chocolate Bar",category:"Food & Beverage",icon:Es},{id:"coffee",name:"Coffee",category:"Food & Beverage",icon:Es},{id:"shoes",name:"Leather Shoes",category:"Footwear",icon:Es}],Xh=[{id:0,name:"Tier 0: Final Assembly",description:"Final assembly and finishing",icon:Il},{id:1,name:"Tier 1: Direct Supplier",description:"Direct supplier",icon:jm},{id:2,name:"Tier 2: Fabric Mill / Component Vendor",description:"Fabric mill or component vendor",icon:Il},{id:3,name:"Tier 3: Raw-Material Processor",description:"Raw-material processor",icon:Il},{id:4,name:"Tier 4: Farm/Mine",description:"Farm or mine",icon:ax}];function Hx(){const[a,r]=M.useState(null),[s,o]=M.useState([]),[c,u]=M.useState(null),[h,p]=M.useState(""),[m,y]=M.useState(""),[v,b]=M.useState(""),[_,w]=M.useState(!1),[x,k]=M.useState("product"),N=Yh.find(q=>q.id===a),P=q=>{r(q),o(Xh.map(oe=>({id:oe.id,name:oe.name,description:oe.description,userInput:""}))),k("mapping")},$=(q,oe)=>{o(s.map(Se=>Se.id===q?{...Se,userInput:oe}:Se))},C=()=>{s.every(oe=>oe.userInput.trim()!=="")?k("questions"):alert("Please fill in all tier mappings before proceeding.")},R=()=>{h.trim()&&m.trim()&&v.trim()?(w(!0),k("results")):alert("Please answer all questions before submitting.")},F=()=>{r(null),o([]),p(""),y(""),b(""),w(!1),k("product")},U=()=>["Purchase receipts with GPS coordinates","Third-party certifications","Transportation records","Audit reports","Batch tracking documentation","Chain of custody records"],D=()=>["Duplicate addresses","Missing batch IDs","Inconsistent dates","Gaps in documentation","Unable to verify certifications","Missing chain of custody"];return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(km,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Product Mapping Exercise"})]}),n.jsx("p",{className:"m-0 text-green-100",children:"Choose a simple product and map it through your supply chain tiers, then answer key traceability questions"})]}),n.jsx("div",{className:"bg-gray-100 px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsxs("div",{className:`flex items-center gap-2 ${x==="product"?"text-green-600 font-semibold":x!=="product"?"text-gray-400":"text-gray-600"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x==="product"?"bg-green-600 text-white":x!=="product"?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:x!=="product"?n.jsx(rt,{className:"w-5 h-5"}):"1"}),n.jsx("span",{className:"text-sm",children:"Choose Product"})]}),n.jsx(la,{className:"w-4 h-4 text-gray-400"}),n.jsxs("div",{className:`flex items-center gap-2 ${x==="mapping"?"text-green-600 font-semibold":x==="questions"||x==="results"?"text-gray-400":"text-gray-600"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x==="mapping"?"bg-green-600 text-white":x==="questions"||x==="results"?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:x==="questions"||x==="results"?n.jsx(rt,{className:"w-5 h-5"}):"2"}),n.jsx("span",{className:"text-sm",children:"Map Tiers"})]}),n.jsx(la,{className:"w-4 h-4 text-gray-400"}),n.jsxs("div",{className:`flex items-center gap-2 ${x==="questions"?"text-green-600 font-semibold":x==="results"?"text-gray-400":"text-gray-600"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x==="questions"?"bg-green-600 text-white":x==="results"?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:x==="results"?n.jsx(rt,{className:"w-5 h-5"}):"3"}),n.jsx("span",{className:"text-sm",children:"Answer Questions"})]})]})}),n.jsxs("div",{className:"p-8",children:[x==="product"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-900",children:"Instructions:"}),n.jsx("p",{className:"text-sm text-blue-800 m-0",children:"Choose a simple product from the list below. You'll then map this product through your supply chain tiers (Tier 0-4) and answer questions about traceability challenges."})]}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:Yh.map(q=>{const oe=q.icon;return n.jsx("button",{onClick:()=>P(q.id),className:"p-6 bg-white border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all text-left",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(oe,{className:"w-6 h-6 text-green-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-0 text-lg font-semibold",children:q.name}),n.jsx("p",{className:"text-sm text-gray-600 m-0",children:q.category})]})]})},q.id)})})]}),x==="mapping"&&N&&n.jsxs("div",{children:[n.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-1 text-green-900",children:"Mapping Exercise"}),n.jsxs("p",{className:"text-sm text-green-800 m-0",children:["Map your ",n.jsx("strong",{children:N.name})," through the supply chain tiers. For each tier, describe what happens at that level."]})]}),n.jsx("button",{onClick:()=>k("product"),className:"text-sm text-green-700 hover:text-green-900 underline",children:"Change Product"})]})}),n.jsx("div",{className:"space-y-4 mb-6",children:s.map(q=>{const Se=Xh.find(he=>he.id===q.id)?.icon||jm;return n.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx("div",{className:"bg-green-100 p-2 rounded",children:n.jsx(Se,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"mt-0 mb-1 text-gray-900 font-semibold",children:q.name}),n.jsx("p",{className:"text-sm text-gray-600 m-0 mb-3",children:q.description}),n.jsx("textarea",{value:q.userInput,onChange:he=>$(q.id,he.target.value),placeholder:`Describe what happens at ${q.name.toLowerCase()} for ${N.name}...`,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none",rows:3})]})]})},q.id)})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:C,disabled:!s.every(q=>q.userInput.trim()!==""),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit'] flex items-center gap-2",children:["Continue to Questions",n.jsx(la,{className:"w-4 h-4"})]})})]}),x==="questions"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-900",children:"Answer These Questions:"}),n.jsx("p",{className:"text-sm text-indigo-800 m-0",children:"Based on your mapping exercise, answer the following questions about traceability challenges."})]}),n.jsxs("div",{className:"mb-6 bg-white border-2 border-dashed border-green-500 rounded-lg p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-gray-900",children:"Which tier is hardest to trace? Why?"}),n.jsx("textarea",{value:h,onChange:q=>p(q.target.value),placeholder:"Explain which tier is hardest to trace and why...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none",rows:4})]}),n.jsxs("div",{className:"mb-6 bg-white border-2 border-dashed border-green-500 rounded-lg p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-gray-900",children:"Which documents verify Tier-2 authenticity?"}),n.jsx("textarea",{value:m,onChange:q=>y(q.target.value),placeholder:"List the documents needed to verify Tier-2 authenticity...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none",rows:4})]}),n.jsxs("div",{className:"mb-6 bg-white border-2 border-dashed border-green-500 rounded-lg p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-gray-900",children:"What red flags might appear (duplicate addresses, missing batch IDs, inconsistent dates)?"}),n.jsx("textarea",{value:v,onChange:q=>b(q.target.value),placeholder:"List potential red flags that might indicate traceability issues...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none",rows:4})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:R,disabled:!h.trim()||!m.trim()||!v.trim(),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-['Outfit'] flex items-center gap-2",children:["Submit Answers",n.jsx(rt,{className:"w-4 h-4"})]})})]}),x==="results"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-4",children:n.jsx(rt,{className:"w-10 h-10 text-green-600"})}),n.jsx("h2",{className:"mt-0 mb-2",children:"Mapping Exercise Complete!"}),n.jsx("p",{className:"text-gray-600 mb-0",children:"Review your answers and key learning points below."})]}),n.jsxs("div",{className:"mb-6 bg-blue-50 rounded-lg p-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-blue-900",children:"Your Answers"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Which tier is hardest to trace? Why?"}),n.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-blue-200 m-0",children:h||"No answer provided"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Which documents verify Tier-2 authenticity?"}),n.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-blue-200 m-0",children:m||"No answer provided"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"What red flags might appear?"}),n.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-blue-200 m-0",children:v||"No answer provided"})]})]})]}),n.jsxs("div",{className:"mb-6 bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Vt,{className:"w-6 h-6 text-indigo-600"}),n.jsx("h3",{className:"mt-0 mb-0 text-indigo-900",children:"Key Learning Points"})]}),n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Hardest Tier to Trace:"}),n.jsxs("p",{className:"text-gray-700 m-0",children:[n.jsx("strong",{children:"Tier 4 (Farm/Mine)"})," is typically the hardest to trace because:"]}),n.jsxs("ul",{className:"list-disc pl-5 mt-2 mb-0 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Thousands of smallholder farms or artisanal mines with limited documentation"}),n.jsx("li",{children:"Remote locations with limited infrastructure"}),n.jsx("li",{children:"Complex aggregation and trading networks"}),n.jsx("li",{children:"Limited technology adoption at source level"}),n.jsx("li",{children:"Scale makes individual farm/mine tracking challenging"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Verification Documents for Tier-2:"}),n.jsx("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:U().map((q,oe)=>n.jsx("li",{children:q},oe))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Common Red Flags:"}),n.jsx("ul",{className:"list-disc pl-5 mb-0 text-gray-700 space-y-1",children:D().map((q,oe)=>n.jsx("li",{children:q},oe))})]})]})]}),n.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-6 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-green-900",children:"Exercise Summary"}),n.jsx("p",{className:"text-sm text-green-800 m-0",children:"This exercise builds supplier capability in visualizing multi-tier risk. By mapping products through all tiers and identifying traceability challenges, you develop a deeper understanding of where risks emerge and what documentation is needed to verify authenticity. Regular mapping exercises help identify gaps and prioritize traceability improvements."})]}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsx("button",{onClick:F,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-['Outfit']",children:"Start New Exercise"})})]})]})]})}const Zh=[{id:"sourcemap",name:"Sourcemap",description:"Supply Chain Regulatory Software",primaryFunction:"Tier mapping + supply chain visualization"},{id:"trustrace",name:"TrusTrace",description:"Traceability Platform",primaryFunction:"Batch-level tracking for apparel & electronics"},{id:"everstream",name:"Everstream Analytics",description:"Supply Chain Risk Intelligence",primaryFunction:"Detects illegal subcontracting & geopolitical risks"}],wr=[{id:"problem1",description:"Need to visualize and map all tiers of your supply chain from raw materials to finished products",correctTool:"sourcemap",explanation:"Sourcemap specializes in tier mapping and supply chain visualization, allowing companies to map and monitor upstream suppliers and verify chain of custody data from raw materials to finished products."},{id:"problem2",description:"Need to track individual batches of products through the supply chain for apparel or electronics",correctTool:"trustrace",explanation:"TrusTrace provides batch-level tracking specifically designed for apparel and electronics supply chains, enabling detailed traceability of individual product batches."},{id:"problem3",description:"Need to detect unauthorized subcontracting and assess geopolitical risks in your supply chain",correctTool:"everstream",explanation:"Everstream Analytics uses advanced analytics to detect illegal subcontracting and monitor geopolitical risks, providing intelligence on supply chain vulnerabilities."},{id:"problem4",description:"Need to create a visual representation of your multi-tier supplier network",correctTool:"sourcemap",explanation:"Sourcemap excels at creating visual maps of supply chain networks, helping companies understand their supplier relationships across all tiers."},{id:"problem5",description:"Need to verify the authenticity and origin of specific product batches in fashion supply chains",correctTool:"trustrace",explanation:"TrusTrace provides detailed batch-level tracking and verification capabilities, making it ideal for fashion and textile supply chains where batch authenticity is critical."},{id:"problem6",description:"Need to identify potential compliance violations and geopolitical risks that could disrupt supply",correctTool:"everstream",explanation:"Everstream Analytics specializes in risk detection, including identifying compliance violations, illegal subcontracting, and geopolitical factors that could impact supply chain continuity."}];function Wx(){const[a,r]=M.useState({}),[s,o]=M.useState(!1),[c,u]=M.useState(0),[h,p]=M.useState(!1),m=(x,k)=>{s||r(N=>({...N,[x]:k}))},y=()=>{let x=0;wr.forEach(k=>{a[k.id]===k.correctTool&&x++}),u(x),o(!0),p(!0)},v=()=>{r({}),o(!1),u(0),p(!1)},b=wr.every(x=>a[x.id]),_=wr.filter(x=>a[x.id]===x.correctTool).length,w=wr.length>0?Math.round(_/wr.length*100):0;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Nm,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Digital Traceability Tools Matching Exercise"})]}),n.jsx("p",{className:"m-0 text-blue-100",children:"Match each traceability tool to the specific problem it solves best"})]}),n.jsx("div",{className:"p-8",children:h?n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 ${w>=80?"bg-green-100":w>=60?"bg-yellow-100":"bg-red-100"}`,children:n.jsx("span",{className:`text-4xl ${w>=80?"text-green-700":w>=60?"text-yellow-700":"text-red-700"}`,children:w>=80?"":w>=60?"":""})}),n.jsx("h2",{className:"mt-0 mb-2",children:"Matching Exercise Complete!"}),n.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[_," / ",wr.length," Correct"]}),n.jsxs("div",{className:"text-xl text-gray-600",children:["Score: ",w,"%"]})]}),n.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-indigo-900",children:"Key Takeaways"}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Sourcemap"}),n.jsx("p",{className:"text-gray-700 m-0",children:"Best for tier mapping and supply chain visualization. Use when you need to map and monitor upstream suppliers and verify chain of custody data from raw materials to finished products."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"TrusTrace"}),n.jsx("p",{className:"text-gray-700 m-0",children:"Best for batch-level tracking in apparel and electronics. Use when you need detailed traceability of individual product batches and verification of authenticity in fashion and textile supply chains."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Everstream Analytics"}),n.jsx("p",{className:"text-gray-700 m-0",children:"Best for detecting illegal subcontracting and geopolitical risks. Use when you need to identify compliance violations, unauthorized subcontracting, and geopolitical factors that could disrupt supply chain continuity."})]})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("button",{onClick:v,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-['Outfit'] flex items-center gap-2",children:[n.jsx(Is,{className:"w-4 h-4"}),"Try Again"]})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-900",children:"Instructions:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1 mb-0 text-sm text-blue-800",children:[n.jsx("li",{children:"Review the three digital traceability tools and their primary functions"}),n.jsx("li",{children:"Read each traceability problem carefully"}),n.jsx("li",{children:"Match each problem to the tool that best solves it"}),n.jsx("li",{children:"Each tool can be matched to multiple problems"}),n.jsx("li",{children:"Submit when you've matched all problems"})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"mt-0 mb-4 text-gray-900",children:"Digital Traceability Tools"}),n.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:Zh.map(x=>n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 border-2 border-indigo-200 rounded-lg p-5",children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-900 font-bold text-lg",children:x.name}),n.jsx("p",{className:"text-sm text-indigo-700 mb-3",children:x.description}),n.jsxs("div",{className:"bg-white rounded p-3 border border-indigo-200",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-600 mb-1",children:"Primary Function:"}),n.jsx("p",{className:"text-sm text-gray-800 m-0 font-semibold",children:x.primaryFunction})]})]},x.id))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-gray-900",children:"Interactive Exercise: Match Each Tool to a Specific Traceability Problem"}),n.jsx("div",{className:"space-y-4",children:wr.map(x=>{const k=a[x.id],N=s&&k===x.correctTool,P=s&&k&&k!==x.correctTool;return n.jsxs("div",{className:`border-2 rounded-lg p-5 transition-all ${N?"border-green-500 bg-green-50":P?"border-red-500 bg-red-50":k?"border-blue-500 bg-blue-50":"border-gray-300 bg-white"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-gray-800 font-medium mb-0",children:x.description})}),s&&n.jsx("div",{className:"ml-4",children:N?n.jsx(rt,{className:"w-6 h-6 text-green-600"}):n.jsx(Os,{className:"w-6 h-6 text-red-600"})})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:Zh.map($=>{const C=k===$.id;return n.jsxs("button",{onClick:()=>m(x.id,$.id),disabled:s,className:`p-3 rounded-lg border-2 text-left transition-all text-sm ${C?"border-blue-600 bg-blue-100 font-semibold":"border-gray-300 bg-white hover:border-blue-400 hover:bg-blue-50"} ${s?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("div",{className:"font-semibold text-gray-900",children:$.name}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:$.primaryFunction})]},$.id)})}),s&&n.jsx("div",{className:`mt-4 p-3 rounded ${N?"bg-green-100":"bg-red-100"}`,children:n.jsxs("p",{className:`text-sm m-0 ${N?"text-green-800":"text-red-800"}`,children:[n.jsx("strong",{children:N?"Correct!":"Incorrect."})," ",x.explanation]})})]},x.id)})})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:y,disabled:!b||s,className:`px-8 py-3 rounded-lg font-semibold transition-all ${b&&!s?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:s?"Results Submitted":b?"Submit Matches":`Match All Problems (${Object.keys(a).length}/${wr.length})`})})]})})]})}const kn=[{id:"a1",section:"A",question:"Which evidence showed undisclosed Tier-2 processing?",type:"multiple-choice",options:["Fabric rolls with two different batch numbers","Packing slips bearing two supplier names","No transport documentation from the second mill","All of the above"],correctAnswer:3,explanation:'All of the above evidence indicated undisclosed Tier-2 processing. The two different batch numbers, packing slips with two supplier names, and missing transport documentation all pointed to unauthorized subcontracting. Additionally, operators revealing "overflow dyeing" done by an undisclosed Tier-2 site confirmed the issue.'},{id:"a2",section:"A",question:"Why are mismatched batch numbers a traceability risk?",type:"multiple-choice",options:["They indicate potential quality issues","They suggest unauthorized subcontracting and break the chain of custody","They are difficult to read","They increase shipping costs"],correctAnswer:1,explanation:"Mismatched batch numbers are a critical traceability risk because they suggest unauthorized subcontracting and break the chain of custody. When batch numbers don't match, it becomes impossible to verify the true origin of materials, creating gaps in traceability that can hide compliance violations, forced labor, or other supply chain risks."},{id:"b1",section:"B",question:"Why might suppliers hide Tier-2 subcontractors?",type:"multiple-choice",options:["To reduce costs and avoid compliance requirements","To speed up production","To improve quality","To simplify documentation"],correctAnswer:0,explanation:"Suppliers may hide Tier-2 subcontractors to reduce costs and avoid compliance requirements. By using unauthorized subcontractors, they can bypass audits, avoid meeting labor standards, use cheaper (potentially non-compliant) facilities, and avoid the documentation and verification processes required for disclosed suppliers."},{id:"b2",section:"B",question:"How does poor documentation create UFLPA risk?",type:"multiple-choice",options:["It slows down shipping","It makes it impossible to verify that goods are not from prohibited regions or made with forced labor","It increases costs","It improves traceability"],correctAnswer:1,explanation:"Poor documentation creates UFLPA (Uyghur Forced Labor Prevention Act) risk because it makes it impossible to verify that goods are not from prohibited regions or made with forced labor. Without proper documentation showing origin, chain of custody, and labor conditions, companies cannot prove compliance with UFLPA requirements, risking import bans and legal consequences."},{id:"c1",section:"C",question:"Which control BEST ensures batch-level traceability?",type:"multiple-choice",options:["Random spot checks","QR-coded batch IDs for each roll of fabric","Centralized digital storage","Mandatory disclosure of subcontractors"],correctAnswer:1,explanation:"QR-coded batch IDs for each roll of fabric BEST ensures batch-level traceability because they provide unique, scannable identifiers that can be tracked through the entire supply chain. This creates an immutable record linking each batch to its origin, processing steps, and final destination, enabling real-time verification and preventing batch number mismatches."},{id:"d1",section:"D",question:"Outline a corrective action plan for incomplete traceability.",type:"essay",explanation:"A comprehensive corrective action plan should include: (1) Immediate actions: audit all current suppliers, identify gaps in documentation, suspend shipments from non-compliant suppliers; (2) Short-term: implement mandatory Tier-2 disclosure, establish QR-coded batch tracking, create centralized digital documentation system; (3) Medium-term: conduct random batch audits, train suppliers on traceability requirements, phase out unauthorized subcontractors; (4) Long-term: establish continuous monitoring, integrate traceability into supplier contracts, build supplier capability in documentation practices."}],zr={case:{title:"Case",initialClaim:'A Tier-1 apparel factory claims all fabric comes from "Mill A."',discovery:["Fabric rolls with two different batch numbers","Packing slips bearing two supplier names","No transport documentation from the second mill",'Operators reveal "overflow dyeing" done by an undisclosed Tier-2 site']},actions:{title:"Actions Taken",items:["Mandatory disclosure of all Tier-2 subcontractors","QR-coded batch IDs for each roll of fabric","Random batch audits by compliance team","Centralized digital storage of traceability evidence","Phased removal of unauthorized subcontractor"]},impact:{title:"Impact (12 months)",items:["100% traceability for fabric","Zero unauthorized subcontracting","Audit closure time reduced by 40%","Documentation errors reduced by 70%"]}};function Kx(){const[a,r]=M.useState("case"),[s,o]=M.useState({}),[c,u]=M.useState({}),[h,p]=M.useState([]),[m,y]=M.useState(!1),v=(C,R)=>{o(F=>({...F,[C]:R}))},b=C=>{u(F=>({...F,[C]:!0}));const R=kn.find(F=>F.id===C);if(R&&R.type==="multiple-choice"){const F=R.section;h.includes(F)||p(U=>[...U,F])}},_=C=>{u(F=>({...F,[C]:!0}));const R=kn.find(F=>F.id===C);if(R){const F=R.section;h.includes(F)||p(U=>[...U,F])}},w=()=>{let C=0,R=0;return kn.forEach(F=>{F.type==="multiple-choice"&&(R++,s[F.id]===F.correctAnswer&&C++)}),{correct:C,total:R,percentage:R>0?Math.round(C/R*100):0}},x=()=>{y(!0)},k=()=>{o({}),u({}),p([]),y(!1),r("case")},N=w(),P=kn.filter(C=>C.type==="multiple-choice").every(C=>s[C.id]!==void 0&&c[C.id]),$=kn.filter(C=>C.type==="essay").some(C=>s[C.id]&&c[C.id]);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Vt,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-white mt-0 mb-0",children:"Supplier Case Study: Traceability Challenge"})]}),n.jsx("p",{className:"m-0 text-green-100",children:"Analyze a real-world traceability case, identify risks, analyze root causes, and develop corrective actions"})]}),m?n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 ${N.percentage>=80?"bg-green-100":N.percentage>=60?"bg-yellow-100":"bg-red-100"}`,children:n.jsx("span",{className:`text-4xl ${N.percentage>=80?"text-green-700":N.percentage>=60?"text-yellow-700":"text-red-700"}`,children:N.percentage>=80?"":N.percentage>=60?"":""})}),n.jsx("h2",{className:"mt-0 mb-2",children:"Case Study Test Complete!"}),n.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[N.correct," / ",N.total," Correct"]}),n.jsxs("div",{className:"text-xl text-gray-600",children:["Score: ",N.percentage,"%"]})]}),n.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"mt-0 mb-4 text-indigo-900",children:"Key Takeaways from This Case Study"}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Risk Identification"}),n.jsx("p",{className:"text-gray-700 m-0",children:"Multiple red flags (mismatched batch numbers, multiple supplier names, missing documentation) often indicate unauthorized subcontracting. Spot checks and operator interviews are critical for uncovering hidden Tier-2 activities."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Root Causes"}),n.jsx("p",{className:"text-gray-700 m-0",children:"Suppliers may hide subcontractors to reduce costs and avoid compliance requirements. Poor documentation creates UFLPA and other regulatory risks by making it impossible to verify origin and labor conditions."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Preventive Actions"}),n.jsx("p",{className:"text-gray-700 m-0",children:"QR-coded batch IDs, mandatory Tier-2 disclosure, random audits, and centralized digital documentation create robust traceability systems that prevent unauthorized subcontracting and ensure compliance."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"mt-0 mb-2 text-indigo-700 font-semibold",children:"Impact"}),n.jsx("p",{className:"text-gray-700 m-0",children:"Proper traceability systems can achieve 100% traceability, eliminate unauthorized subcontracting, reduce audit closure time by 40%, and cut documentation errors by 70%demonstrating both compliance and operational efficiency benefits."})]})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("button",{onClick:k,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-['Outfit'] flex items-center gap-2",children:[n.jsx(Is,{className:"w-4 h-4"}),"Retake Test"]})})]}):n.jsxs("div",{className:"p-8",children:[a==="case"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[n.jsx("h4",{className:"mt-0 mb-2 text-blue-900",children:"Instructions:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1 mb-0 text-sm text-blue-800",children:[n.jsx("li",{children:"Read the case study carefully, including the case, actions taken, and impact"}),n.jsx("li",{children:"Answer questions in each section: Risk Identification, Root-Cause Analysis, Preventive Action, and Long-Form Case Question"}),n.jsx("li",{children:"Submit each answer to receive immediate feedback"}),n.jsx("li",{children:"Review the impact achieved after implementing the corrective actions"})]})]}),n.jsxs("div",{className:"mb-6 bg-gray-100 rounded-lg p-6 border-2 border-dashed border-green-500",children:[n.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded-t-lg -mt-6 -mx-6 mb-4",children:n.jsx("h3",{className:"mt-0 mb-0 text-center font-semibold",children:zr.case.title})}),n.jsxs("div",{className:"bg-white rounded-lg p-5",children:[n.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:"Initial Claim:"}),n.jsx("p",{className:"text-gray-700 mb-4 italic",children:zr.case.initialClaim}),n.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:"Discovery during spot checks:"}),n.jsx("ul",{className:"list-disc pl-5 space-y-2 mb-0",children:zr.case.discovery.map((C,R)=>n.jsx("li",{className:"text-gray-700",children:C},R))})]})]}),n.jsxs("div",{className:"mb-6 bg-gray-100 rounded-lg p-6 border-2 border-dashed border-green-500",children:[n.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded-t-lg -mt-6 -mx-6 mb-4",children:n.jsx("h3",{className:"mt-0 mb-0 text-center font-semibold",children:zr.actions.title})}),n.jsx("div",{className:"bg-white rounded-lg p-5",children:n.jsx("ul",{className:"list-disc pl-5 space-y-2 mb-0",children:zr.actions.items.map((C,R)=>n.jsx("li",{className:"text-gray-700",children:C},R))})})]}),n.jsxs("div",{className:"mb-6 bg-gray-100 rounded-lg p-6 border-2 border-dashed border-green-500",children:[n.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded-t-lg -mt-6 -mx-6 mb-4",children:n.jsx("h3",{className:"mt-0 mb-0 text-center font-semibold",children:zr.impact.title})}),n.jsx("div",{className:"bg-white rounded-lg p-5",children:n.jsx("ul",{className:"list-disc pl-5 space-y-2 mb-0",children:zr.impact.items.map((C,R)=>n.jsx("li",{className:"text-gray-700 font-semibold",children:C},R))})})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:()=>r("questions"),className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-semibold shadow-lg",children:"Begin Case Study Test"})})]}),a==="questions"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded",children:[n.jsx("h3",{className:"mt-0 mb-2 text-indigo-900",children:"Case Study Test"}),n.jsx("p",{className:"text-sm text-indigo-800 m-0",children:"Answer the questions below based on the case study. Submit each answer to receive feedback."})]}),n.jsx("div",{className:"space-y-8",children:kn.map(C=>{const R=s[C.id],F=c[C.id],U=C.type==="multiple-choice"&&R===C.correctAnswer;return n.jsxs("div",{className:`border-2 rounded-lg p-6 ${F?U?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-gray-300 bg-white"}`,children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"bg-indigo-600 text-white px-3 py-1 rounded font-semibold text-sm",children:["SECTION ",C.section]}),F&&C.type==="multiple-choice"&&(U?n.jsx(rt,{className:"w-6 h-6 text-green-600"}):n.jsx(Os,{className:"w-6 h-6 text-red-600"}))]}),n.jsx("h4",{className:"mt-0 mb-0 text-gray-900 font-semibold",children:C.question})]})}),C.type==="multiple-choice"&&C.options&&n.jsx("div",{className:"space-y-2 mb-4",children:C.options.map((D,q)=>n.jsx("button",{onClick:()=>v(C.id,q),disabled:F,className:`w-full text-left p-4 rounded-lg border-2 transition-all ${R===q?"border-blue-600 bg-blue-100 font-semibold":"border-gray-300 bg-white hover:border-blue-400"} ${F?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:D},q))}),C.type==="essay"&&n.jsx("div",{className:"mb-4",children:n.jsx("textarea",{value:R||"",onChange:D=>v(C.id,D.target.value),disabled:F,placeholder:"Type your answer here... Be comprehensive and include specific actions from the case study.",className:`w-full p-4 border-2 rounded-lg resize-none ${F?"opacity-75 cursor-not-allowed":"border-gray-300 focus:border-blue-500"}`,rows:8})}),!F&&n.jsx("button",{onClick:()=>C.type==="essay"?_(C.id):b(C.id),disabled:R===void 0||R==="",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Answer"}),F&&n.jsx("div",{className:`mt-4 p-4 rounded-lg ${C.type==="multiple-choice"?U?"bg-green-100 border-2 border-green-500":"bg-red-100 border-2 border-red-500":"bg-blue-100 border-2 border-blue-500"}`,children:n.jsxs("p",{className:`text-sm m-0 ${C.type==="multiple-choice"?U?"text-green-800":"text-red-800":"text-blue-800"}`,children:[n.jsx("strong",{children:C.type==="multiple-choice"?U?"Correct! ":"Incorrect. ":"Answer Submitted. "}),C.explanation]})})]},C.id)})}),(P||$)&&n.jsx("div",{className:"mt-8 flex justify-center",children:n.jsx("button",{onClick:x,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-semibold shadow-lg",children:"View Results"})})]})]})]})}function Gx({accessToken:a,lessonId:r,onBack:s}){const[o,c]=M.useState(null),[u,h]=M.useState(!0);M.useEffect(()=>{p()},[r]);const p=async()=>{try{const m=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons/${r}`,{headers:{Authorization:`Bearer ${a}`}}),y=await m.json();m.ok&&y.lesson&&c(y.lesson)}catch(m){console.error("Error fetching lesson:",m)}finally{h(!1)}};return u?n.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center",children:n.jsx("div",{className:"text-[var(--color-text-secondary)]",children:"Loading lesson..."})}):o?n.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[n.jsx("header",{className:"bg-[var(--color-surface)] border-b border-[var(--color-border)] sticky top-0 z-10 shadow-sm",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Mn,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dn,{className:"w-8 h-8 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-xl text-[var(--color-primary-dark)]",children:"EduLearn"})]})]}),n.jsxs("div",{className:"flex items-center gap-6 text-[var(--color-text-secondary)]",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_v,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"15 min read"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(On,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Lesson"})]})]})]})}),n.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("div",{className:"mb-8",children:[o.category&&n.jsx("div",{className:"inline-block px-3 py-1 bg-blue-100 text-[var(--color-primary)] rounded-full text-sm mb-4",children:o.category}),n.jsx("h1",{children:o.title}),o.subtitle&&n.jsx("p",{className:"text-[var(--color-text-secondary)] text-lg",children:o.subtitle})]}),o.objectives&&o.objectives.length>0&&n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 mb-10",children:[n.jsx("h3",{className:"mt-0 mb-4 text-blue-900",children:"Learning Objectives"}),n.jsx("ul",{className:"list-disc pl-6 space-y-2 mb-0",children:o.objectives.map((m,y)=>n.jsx("li",{className:"text-blue-900",children:m},y))})]}),o.content&&o.content.map((m,y)=>n.jsxs("div",{className:"mb-6",children:[m.type==="heading"&&n.jsx("h2",{className:"mt-8 mb-4",children:m.text}),m.type==="paragraph"&&n.jsx("p",{className:"text-[var(--color-text)] leading-relaxed mb-4",children:m.text}),m.type==="list"&&m.items&&n.jsx("ul",{className:"list-disc pl-6 space-y-3 mb-6",children:m.items.map((v,b)=>n.jsx("li",{className:"text-[var(--color-text)] leading-relaxed",children:v},b))}),m.type==="interactive-activity"&&m.component==="SupplierEthicsActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx($x,{})}),m.type==="interactive-activity"&&m.component==="SupplyChainMapActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Mx,{})}),m.type==="interactive-activity"&&m.component==="AIDetectiveDeskActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Dx,{})}),m.type==="interactive-activity"&&m.component==="DigitalTwinFactoryActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Ux,{})}),m.type==="interactive-activity"&&m.component==="SupplyChainCompassActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(zx,{})}),m.type==="interactive-activity"&&m.component==="SupplyChainMappingActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Fx,{})}),m.type==="interactive-activity"&&m.component==="MonitoringSimulationActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Bx,{})}),m.type==="interactive-activity"&&m.component==="GeospatialMappingActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Vx,{})}),m.type==="interactive-activity"&&m.component==="TransparencyTraceabilityChecklistActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(qx,{})}),m.type==="interactive-activity"&&m.component==="ProductMappingExerciseActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Hx,{})}),m.type==="interactive-activity"&&m.component==="TraceabilityToolsMatchingActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Wx,{})}),m.type==="interactive-activity"&&m.component==="SupplierCaseStudyActivity"&&n.jsx("section",{className:"mb-12",children:n.jsx(Kx,{})})]},y)),o.sections&&o.sections.map((m,y)=>n.jsxs("section",{className:"mb-10",children:[m.heading&&n.jsx("div",{className:"prose prose-blue max-w-none",dangerouslySetInnerHTML:{__html:m.heading}}),m.content&&n.jsx("div",{className:"prose prose-blue max-w-none",dangerouslySetInnerHTML:{__html:m.content}})]},y)),!o.title?.includes("Interactive Activity:")&&(o.quiz&&o.quiz.length>0||o.questions&&o.questions.length>0)&&n.jsxs("section",{className:"mb-12",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-8 text-white mb-8",children:[n.jsx("h2",{className:"text-white mt-0",children:"Test Your Knowledge"}),n.jsx("p",{className:"m-0 text-blue-100",children:"Answer the following questions to check your understanding. Click on your answer choice to see immediate feedback!"})]}),(o.quiz||o.questions||[]).map((m,y)=>n.jsx(Lx,{question:m.question,type:m.isEssay?"essay":m.type||"multiple-choice",options:m.options||[],correctAnswer:m.correctAnswer,explanation:m.explanation||"",questionNumber:y+1,optionExplanations:m.optionExplanations,lessonId:r,accessToken:a},y))]}),n.jsx("div",{className:"border-t border-[var(--color-border)] pt-8 mt-12",children:n.jsx("button",{onClick:s,className:"px-6 py-3 rounded-lg border-2 border-[var(--color-border)] hover:border-[var(--color-primary)] transition-colors",children:" Back to Dashboard"})})]})]}):n.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-[var(--color-text-secondary)] mb-4",children:"Lesson not found"}),n.jsx("button",{onClick:s,className:"px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors",children:"Back to Dashboard"})]})})}function Qx({accessToken:a,userRole:r,currentUserId:s,onViewLesson:o,onBack:c}){const[u,h]=M.useState([]),[p,m]=M.useState(!0),[y,v]=M.useState(""),[b,_]=M.useState("All Categories"),[w,x]=M.useState(null),[k,N]=M.useState(new Set);M.useEffect(()=>{P()},[]);const P=async()=>{try{const D=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/browse/lessons`,{headers:{Authorization:`Bearer ${a}`}}),q=await D.json();D.ok&&q.lessons&&h(q.lessons)}catch(D){console.error("Error fetching lessons:",D)}finally{m(!1)}},$=["All Categories",...new Set(u.map(D=>D.category).filter(Boolean))],C=u.filter(D=>{const q=y===""||D.title.toLowerCase().includes(y.toLowerCase())||D.subtitle?.toLowerCase().includes(y.toLowerCase())||D.category?.toLowerCase().includes(y.toLowerCase())||D.authorName?.toLowerCase().includes(y.toLowerCase()),oe=b==="All Categories"||D.category===b;return q&&oe}),R={};C.forEach(D=>{const q=D.category||"Uncategorized";R[q]||(R[q]=[]),R[q].push(D)});const F=Object.keys(R).sort(),U=async D=>{x(D);try{const q=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons/${D}/add-to-dashboard`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),oe=await q.json();q.ok&&oe.success&&N(Se=>new Set([...Se,D]))}catch(q){console.error("Error adding lesson:",q)}finally{x(null)}};return n.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[n.jsx("header",{className:"bg-[var(--color-surface)] border-b border-[var(--color-border)] sticky top-0 z-10 shadow-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Mn,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dn,{className:"w-8 h-8 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-xl text-[var(--color-primary-dark)]",children:"Browse All Lessons"})]})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[var(--color-text-secondary)]"}),n.jsx("input",{type:"text",value:y,onChange:D=>v(D.target.value),placeholder:"Search lessons by title, category, or author...",className:"w-full pl-10 pr-4 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Lv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[var(--color-text-secondary)]"}),n.jsx("select",{value:b,onChange:D=>_(D.target.value),className:"pl-10 pr-8 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] bg-white appearance-none cursor-pointer min-w-[200px]",children:$.map(D=>n.jsx("option",{value:D,children:D},D))})]})]})]})}),n.jsx("main",{className:"max-w-7xl mx-auto px-6 py-8",children:p?n.jsx("div",{className:"text-center py-12 text-[var(--color-text-secondary)]",children:"Loading lessons..."}):C.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(On,{className:"w-16 h-16 text-[var(--color-text-secondary)] mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-[var(--color-text-secondary)] mb-2",children:"No lessons found"}),y&&n.jsx("button",{onClick:()=>{v(""),_("All Categories")},className:"text-[var(--color-primary)] hover:underline",children:"Clear filters"})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 text-[var(--color-text-secondary)]",children:["Showing ",C.length," ",C.length===1?"lesson":"lessons"]}),F.map(D=>n.jsxs("div",{className:"mb-10",children:[n.jsxs("h2",{className:"mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"px-3 py-1 bg-[var(--color-primary)] text-white rounded-full text-sm",children:R[D].length}),D]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R[D].map(q=>n.jsxs("div",{onClick:()=>o(q.id),className:"bg-white rounded-xl p-6 shadow-sm border border-[var(--color-border)] hover:shadow-md hover:border-[var(--color-primary)] transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(On,{className:"w-5 h-5 text-[var(--color-primary)]"}),q.userId===s&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Your Lesson"})]}),r==="student"&&q.userId!==s&&!k.has(q.id)&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(q.id)},disabled:w===q.id,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",title:"Add to My Lessons",children:w===q.id?n.jsx("div",{className:"w-5 h-5 border-2 border-[var(--color-primary)] border-t-transparent rounded-full animate-spin"}):n.jsx(Ps,{className:"w-5 h-5 text-[var(--color-primary)]"})}),k.has(q.id)&&n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(ca,{className:"w-5 h-5 text-green-600"})})]}),n.jsx("h3",{className:"mb-2 group-hover:text-[var(--color-primary)] transition-colors",children:q.title}),q.subtitle&&n.jsx("p",{className:"text-[var(--color-text-secondary)] mb-4 line-clamp-2",children:q.subtitle}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--color-text-secondary)] pt-3 border-t border-[var(--color-border)]",children:[n.jsx(Em,{className:"w-4 h-4"}),n.jsx("span",{children:q.authorName})]})]},q.id))})]},D))]})}),n.jsx("style",{children:`
        .line-clamp-2 {
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      `})]})}function Jx({accessToken:a,lessonId:r,onBack:s}){const[o,c]=M.useState({}),[u,h]=M.useState(null),[p,m]=M.useState(!0);M.useEffect(()=>{y()},[r]);const y=async()=>{try{const w=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons/${r}`,{headers:{Authorization:`Bearer ${a}`}}),x=await w.json();w.ok&&x.lesson&&h(x.lesson);const k=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/essay-responses/${r}`,{headers:{Authorization:`Bearer ${a}`}}),N=await k.json();k.ok&&N.responses&&c(N.responses)}catch(w){console.error("Error fetching data:",w)}finally{m(!1)}},v=w=>new Date(w).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});if(p)return n.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center",children:n.jsx("div",{className:"text-[var(--color-text-secondary)]",children:"Loading responses..."})});const b=u?.questions.filter((w,x)=>w.type==="essay").map((w,x)=>{const k=u.questions.findIndex((N,P)=>N===w);return{...w,questionNumber:k+1}})||[],_=Object.values(o).reduce((w,x)=>w+x.length,0);return n.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[n.jsx("header",{className:"bg-[var(--color-surface)] border-b border-[var(--color-border)] sticky top-0 z-10 shadow-sm",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Mn,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"w-8 h-8 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-xl text-[var(--color-primary-dark)]",children:"Student Responses"})]})]}),n.jsxs("div",{className:"ml-14",children:[n.jsx("h2",{className:"m-0 mb-1",children:u?.title}),n.jsxs("p",{className:"text-[var(--color-text-secondary)] m-0",children:[_," ",_===1?"response":"responses"," submitted"]})]})]})}),n.jsx("main",{className:"max-w-6xl mx-auto px-6 py-12",children:b.length===0?n.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-[var(--color-border)]",children:[n.jsx(Vt,{className:"w-16 h-16 text-[var(--color-text-secondary)] mx-auto mb-4 opacity-50"}),n.jsx("h3",{className:"mb-2",children:"No essay questions in this lesson"}),n.jsx("p",{className:"text-[var(--color-text-secondary)] mb-6",children:"This lesson doesn't have any essay-style questions."}),n.jsx("button",{onClick:s,className:"px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors",children:"Back to Dashboard"})]}):_===0?n.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-[var(--color-border)]",children:[n.jsx(Vt,{className:"w-16 h-16 text-[var(--color-text-secondary)] mx-auto mb-4 opacity-50"}),n.jsx("h3",{className:"mb-2",children:"No responses yet"}),n.jsx("p",{className:"text-[var(--color-text-secondary)]",children:"Students haven't submitted any responses to the essay questions yet."})]}):n.jsx("div",{className:"space-y-8",children:b.map(w=>{const x=o[w.questionNumber]||[];return n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-[var(--color-border)]",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[n.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--color-primary)] text-white flex items-center justify-center",children:w.questionNumber}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"prose prose-blue max-w-none",dangerouslySetInnerHTML:{__html:w.question}}),n.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)] mt-2",children:[x.length," ",x.length===1?"response":"responses"]})]})]}),x.length===0?n.jsx("div",{className:"ml-11 p-4 bg-gray-50 rounded-lg text-[var(--color-text-secondary)] text-sm",children:"No responses yet for this question"}):n.jsx("div",{className:"ml-11 space-y-4",children:x.map(k=>n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3 text-sm text-[var(--color-text-secondary)]",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Em,{className:"w-4 h-4"}),n.jsx("span",{children:k.userName}),n.jsxs("span",{className:"text-xs",children:["(",k.userEmail,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(mv,{className:"w-4 h-4"}),n.jsx("span",{children:v(k.submittedAt)})]})]}),n.jsx("div",{className:"p-3 bg-white rounded border border-gray-200 whitespace-pre-wrap",children:k.response})]},k.id))})]},w.questionNumber)})})})]})}function Yx({moduleName:a,accessToken:r,onBack:s,onSelectLesson:o}){const[c,u]=M.useState([]),[h,p]=M.useState(!0),[m,y]=M.useState(null),[v,b]=M.useState(null);M.useEffect(()=>{w(),_()},[a]);const _=async()=>{try{const N=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/recommendations`,{headers:{Authorization:`Bearer ${r}`}}),P=await N.json();console.log("Recommendations response:",P),N.ok&&P.recommendations?(b(P.recommendations),console.log("Set recommendations:",P.recommendations)):console.log("No recommendations found or error")}catch(N){console.error("Error fetching recommendations:",N)}},w=async()=>{try{const N=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/lessons`,{headers:{Authorization:`Bearer ${r}`}}),P=await N.json();if(N.ok){const $=(P.lessons||[]).filter(C=>C.category===a);u($)}else console.error("Failed to fetch lessons:",P.error)}catch(N){console.error("Error fetching lessons:",N)}finally{p(!1)}},x=N=>{y(N),o(N)},k=N=>{if(!v)return!0;const P=a==="Responsible Sourcing"?"responsibleSourcing":a==="General Solutions"?"generalSolutions":a==="Emerging Technology & AI Integration"?"emergingTech":null;if(!P||v[P]==="all")return!0;const C=N.title.toLowerCase(),R=N.subtitle?.toLowerCase()||"";return["advanced","complex","optimization","strategic","integration","ai","analytics","predictive"].some(U=>C.includes(U)||R.includes(U))};return n.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)] flex",children:[n.jsxs("aside",{className:"w-80 bg-white border-r border-[var(--color-border)] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-[var(--color-border)]",children:[n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-[var(--color-text-secondary)] hover:text-[var(--color-primary)] mb-4 transition-colors",children:[n.jsx(Mn,{className:"w-4 h-4"}),"Back to Modules"]}),n.jsx("h2",{className:"text-[var(--color-primary-dark)] mb-1",children:a}),n.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)]",children:[c.length," ",c.length===1?"lesson":"lessons"]})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4",children:[v&&n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Kh,{className:"w-4 h-4 text-yellow-500",fill:"currentColor"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Personalized for You"})]}),n.jsx("p",{className:"text-xs text-blue-700",children:"Starred lessons are recommended based on your knowledge assessment."})]}),h?n.jsx("div",{className:"text-center py-8 text-[var(--color-text-secondary)]",children:"Loading lessons..."}):c.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(On,{className:"w-12 h-12 text-[var(--color-text-secondary)] mx-auto mb-3"}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-sm",children:"No lessons in this module yet"})]}):n.jsx("ul",{className:"space-y-2",children:c.map((N,P)=>{const $=k(N);return n.jsx("li",{children:n.jsx("button",{onClick:()=>x(N.id),className:`w-full text-left p-4 rounded-lg transition-all ${m===N.id?"bg-[var(--color-primary)] text-white shadow-md":"hover:bg-gray-50 text-[var(--color-text)]"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs ${m===N.id?"bg-white text-[var(--color-primary)]":"bg-gray-200 text-gray-600"}`,children:P+1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:`font-medium ${m===N.id?"text-white":"text-[var(--color-text)]"}`,children:N.title}),$&&v&&n.jsx(Kh,{className:`w-4 h-4 flex-shrink-0 ${m===N.id?"text-yellow-300":"text-yellow-500"}`,fill:"currentColor"})]}),n.jsx("div",{className:`text-sm line-clamp-2 ${m===N.id?"text-blue-100":"text-[var(--color-text-secondary)]"}`,children:N.subtitle})]}),m===N.id&&n.jsx(dc,{className:"w-5 h-5 text-white flex-shrink-0"})]})})},N.id)})})]})]}),n.jsx("main",{className:"flex-1 flex items-center justify-center p-12",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(On,{className:"w-24 h-24 text-[var(--color-text-secondary)] mx-auto mb-6 opacity-50"}),n.jsx("h2",{className:"text-[var(--color-text)] mb-3",children:"Select a Lesson"}),n.jsx("p",{className:"text-[var(--color-text-secondary)]",children:"Choose a lesson from the sidebar to begin learning"})]})})]})}function Xx({accessToken:a,onComplete:r}){const[s,o]=M.useState(0),[c,u]=M.useState(0),[h,p]=M.useState({overallSustainability:0,generalSolutions:0,responsibleSourcing:0,emergingTech:0}),m=[{id:"overallSustainability",title:"Overall Sustainability Knowledge",description:"How would you rate your overall understanding of sustainability in supply chain management?",icon:Wv,color:"text-green-600",bgColor:"bg-green-100"},{id:"responsibleSourcing",title:"Responsible Sourcing",description:"This module covers ethical labor practices, human rights, transparency & traceability, environmental management, and the business rationale for responsible sourcing.",icon:Rx,color:"text-blue-600",bgColor:"bg-blue-100"},{id:"generalSolutions",title:"General Solutions",description:"This module explores OECD Due Diligence Guidance, Comply Chain frameworks, third-party auditing processes, supplier codes of conduct, supplier training programs, and ESG reporting standards.",icon:Gv,color:"text-purple-600",bgColor:"bg-purple-100"},{id:"emergingTech",title:"Emerging Technology & AI Integration",description:"This module covers data analytics for proactive risk management, optimization through predictive analytics and live monitoring, management with digital twins and control towers, and leveraging key AI tools for supply chain sustainability.",icon:wm,color:"text-orange-600",bgColor:"bg-orange-100"}],y=m[s],v=y.icon,b=w=>{u(w)},_=()=>{if(c===0)return;const w={...h,[y.id]:c};p(w),s<m.length-1?(o(s+1),u(0)):r(w)};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-6",children:n.jsxs("div",{className:"w-full max-w-3xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[n.jsx(Dn,{className:"w-12 h-12 text-[var(--color-primary)]"}),n.jsx("span",{className:"font-['Outfit'] text-3xl text-[var(--color-primary-dark)]",children:"Welcome!"})]}),n.jsx("p",{className:"text-[var(--color-text-secondary)] text-lg",children:"Let's personalize your learning experience"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between mb-2 text-sm text-[var(--color-text-secondary)]",children:[n.jsxs("span",{children:["Question ",s+1," of ",m.length]}),n.jsxs("span",{children:[Math.round((s+1)/m.length*100),"%"]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-[var(--color-primary)] transition-all duration-500 ease-out",style:{width:`${(s+1)/m.length*100}%`}})})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-[var(--color-border)]",children:[n.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[n.jsx("div",{className:`p-4 rounded-xl ${y.bgColor}`,children:n.jsx(v,{className:`w-8 h-8 ${y.color}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"mb-2",children:y.title}),n.jsx("p",{className:"text-[var(--color-text-secondary)]",children:y.description})]})]}),n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-center mb-4",children:"How would you rate your current knowledge in this area?"})}),n.jsx("div",{className:"space-y-3 mb-6",children:[{value:1,label:"Beginner",description:"Little to no experience"},{value:2,label:"Novice",description:"Some basic knowledge"},{value:3,label:"Intermediate",description:"Moderate understanding"},{value:4,label:"Advanced",description:"Strong knowledge and experience"},{value:5,label:"Expert",description:"Extensive expertise"}].map(w=>n.jsx("button",{onClick:()=>b(w.value),className:`w-full p-4 rounded-xl border-2 transition-all text-left hover:border-[var(--color-primary)] hover:bg-blue-50 group ${c===w.value?"border-[var(--color-primary)] bg-blue-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${c===w.value?"bg-[var(--color-primary)] text-white":"bg-gray-100 text-[var(--color-text-secondary)] group-hover:bg-[var(--color-primary)] group-hover:text-white"}`,children:w.value}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:w.label}),n.jsx("div",{className:"text-sm text-[var(--color-text-secondary)]",children:w.description})]})]}),n.jsx(dc,{className:`w-5 h-5 transition-all ${c===w.value?"text-[var(--color-primary)] translate-x-1":"text-gray-300 group-hover:text-[var(--color-primary)] group-hover:translate-x-1"}`})]})},w.value))}),n.jsx("button",{onClick:_,disabled:c===0,className:`w-full py-4 rounded-xl font-medium transition-all ${c===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] shadow-lg hover:shadow-xl"}`,children:s<m.length-1?"Continue":"Complete Quiz"})]}),n.jsx("div",{className:"flex justify-center gap-2 mt-6",children:m.map((w,x)=>n.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${x===s?"w-8 bg-[var(--color-primary)]":x<s?"w-2 bg-[var(--color-primary)] opacity-50":"w-2 bg-gray-300"}`},x))})]})})}function Zx(){const[a,r]=M.useState(null),[s,o]=M.useState(""),[c,u]=M.useState("student"),[h,p]=M.useState(""),[m,y]=M.useState(!0),[v,b]=M.useState({type:"auth"}),[_,w]=M.useState(!0);M.useEffect(()=>{x();const{data:{subscription:I}}=Nr.auth.onAuthStateChange(async(K,G)=>{console.log("Auth state changed:",K,G?"session exists":"no session"),K==="SIGNED_OUT"?(r(null),o(""),p(""),b({type:"auth"})):(K==="TOKEN_REFRESHED"||K==="SIGNED_IN")&&G&&(console.log("Token refreshed or signed in, updating access token"),r(G.access_token))});return()=>{I.unsubscribe()}},[]);const x=async()=>{try{console.log("Checking for existing session...");const{data:{session:I}}=await Nr.auth.getSession();if(I){console.log("Session found:",{userId:I.user.id,role:I.user.user_metadata?.role,tokenLength:I.access_token?.length}),r(I.access_token),o(I.user.user_metadata?.name||"User");const K=I.user.user_metadata?.role||"student",G=I.user.user_metadata?.onboardingComplete||!1;u(K),p(I.user.id),y(G),K==="student"&&!G?(console.log("Student needs onboarding"),b({type:"onboarding"})):(console.log("Redirecting to dashboard"),b({type:"dashboard"}))}else console.log("No active session found")}catch(I){console.error("Error checking session:",I)}finally{w(!1)}},k=(I,K)=>{console.log("handleAuthSuccess called:",{hasToken:!!I,tokenLength:I?.length,name:K}),r(I),o(K),Nr.auth.getSession().then(({data:{session:G}})=>{if(G?.user){console.log("Got user session after auth:",{userId:G.user.id,role:G.user.user_metadata?.role}),p(G.user.id);const le=G.user.user_metadata?.role||"student",be=G.user.user_metadata?.onboardingComplete||!1;u(le),y(be),b(le==="student"&&!be?{type:"onboarding"}:{type:"dashboard"})}})},N=async I=>{if(a){console.log("Quiz completed with answers:",I);try{const K=await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-b28f81bc/onboarding-quiz`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(I)}),G=await K.json();if(console.log("Quiz save response:",G),K.ok){y(!0),b({type:"dashboard"});const{data:le}=await Nr.auth.refreshSession();console.log("Refreshed session:",le)}else console.error("Failed to save quiz:",G)}catch(K){console.error("Error saving quiz:",K)}}},P=async()=>{await Nr.auth.signOut(),r(null),o(""),p(""),b({type:"auth"})},$=()=>{b({type:"create"})},C=I=>{b({type:"edit",lessonId:I})},R=I=>{b({type:"view",lessonId:I})},F=()=>{b({type:"dashboard"})},U=()=>{b({type:"dashboard"})},D=()=>{b({type:"dashboard"})},q=()=>{b({type:"browse"})},oe=I=>{b({type:"responses",lessonId:I})},Se=I=>{b({type:"module",moduleName:I})};if(_)return n.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center",children:n.jsx("div",{className:"text-[var(--color-text-secondary)]",children:"Loading..."})});if(!a)return n.jsx(Ll,{onAuthSuccess:k});const he=v;if(he.type==="onboarding")return n.jsx(Xx,{accessToken:a,onComplete:N});if(he.type==="auth")return n.jsx(Ll,{onAuthSuccess:k});switch(he.type){case"dashboard":return n.jsx(Ix,{accessToken:a,userName:s,userRole:c,onLogout:P,onCreateLesson:$,onEditLesson:C,onViewLesson:R,onBrowseLessons:q,onViewResponses:oe,onViewModule:Se});case"browse":return n.jsx(Qx,{accessToken:a,userRole:c,currentUserId:h,onViewLesson:R,onBack:D});case"create":return n.jsx(Jh,{accessToken:a,onSave:F,onCancel:U});case"edit":return n.jsx(Jh,{accessToken:a,lessonId:he.lessonId,onSave:F,onCancel:U});case"view":return n.jsx(Gx,{accessToken:a,lessonId:he.lessonId,onBack:D});case"responses":return n.jsx(Jx,{accessToken:a,lessonId:he.lessonId,onBack:D});case"module":return n.jsx(Yx,{accessToken:a,moduleName:he.moduleName,onBack:D,onSelectLesson:R});default:return n.jsx(Ll,{onAuthSuccess:k})}}Ig.createRoot(document.getElementById("root")).render(n.jsx(Zx,{}));
